angular.module("SurveyEngine",[]),function(e){"use strict";e.module("SurveyEngine").run(["$templateCache",function(e){e.put("AutocodeQuestion.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                <div><img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}"/>\r\n                <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div>\r\n        <div ng-if="qObject.Text[language] != undefined"  bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined"  bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n        <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}"/>\r\n        <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n        </audio>\r\n        <video controls video-on-load  ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n        </video>\r\n</div>\r\n    </div>\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n        <ul class="marginZero" auto-code>\r\n            <li ng-repeat="textbox in AutocodeTextbox" style="list-style: none;">\r\n                <input type="text" ng-model="AutocodeTextbox[$index].value" class="focusableInput input-txt darkBdr"\r\n                       ng-blur="SaveAutocodeAnswer(AutocodeTextbox[$index].value, $index)"/>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>'),e.put("CaptureQuestion.html",'<div class="hide-default card">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div class="sq-name table-cell" ng-if="ShowQuestionNumber">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block" bind-html-compile="qObject.Text[language]"></div>\r\n        <div>\r\n            <span style="color: red" ng-if="ShowMandatoryStar" class="font-size">\r\n                <b>*</b>\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="sv-container">\r\n        <div ng-if="isMobileDevice">\r\n            \x3c!-- web--\x3e\r\n            <div ng-if="platform == 2">\r\n                <input type="file" id="file" class="button" name="file" /><br>\r\n                <button style="margin:10px" ng-click="SaveImage()" class="captureMediaBtn"  >Save File</button>\r\n            </div>\r\n            \x3c!-- android--\x3e\r\n            <button ng-if="platform == 1" ng-click="SaveImage()">Capture media</button>\r\n\r\n            <img ng-if="qObject.Properties.MediaType == 1 && receivedMedia" ng-src="{{receivedMedia}}" style="max-height:100%;max-width:100%"/>\r\n            <audio ng-if="qObject.Properties.MediaType == 2" controls ng-src="{{receivedMedia}}" type="audio/mp3"></audio>\r\n            <video ng-if="qObject.Properties.MediaType == 3" controls ng-src="{{receivedMedia}}"></video>\r\n        </div>\r\n        <div ng-if="!isMobileDevice">\r\n            <div ng-if="qObject.Properties.MediaType == 1">\r\n\r\n                <div ng-if="(!receivedMedia || editMode)" ng-click="SaveImage(ImageLocation)">\r\n                    <ng-camera output-height="160" output-width="213" viewer-height="320" viewer-width="426" image-format="jpeg" jpeg-quality="100"\r\n                        action-message="Take picture" snapshot="ImageLocation"></ng-camera>\r\n                </div>\r\n\r\n                <div ng-if="receivedMedia && !editMode" style="max-height:100%;max-width:100%">\r\n                    <img style="max-width:100%" ng-src="{{receivedMedia}}" /><br>\r\n                    <button ng-click="EditMedia()" class="captureMediaBtn">Edit media</button>\r\n                </div>\r\n            </div>\r\n            <span ng-if="qObject.Properties.MediaType != 1">\r\n                <div ng-if="qObject.Properties.MediaType == 2">\r\n\r\n                    <audio id="captureAudio" controls class="maxSize"></audio>\r\n                </div>\r\n                <div ng-if="qObject.Properties.MediaType == 3">\r\n                    <video id="captureVideo" controls class="maxSize"></video>\r\n                </div>\r\n                <button id="start-recording" ng-click="StartRecording();" class="captureMediaBtn">Start Recording</button>\r\n                <button id="stop-recording" disabled ng-click="StopRecording();" class="captureMediaBtn">{{StopButtonText}}</button>\r\n                <button id="play-recording" ng-disabled="!DataAvailable" ng-click="PlayRecording();" class="captureMediaBtn">Play</button>\r\n                \x3c!--<button id="pause-recording" disabled ng-click="PauseRecoding()">Pause</button>\r\n                <button id="resume-recording" disabled ng-click="ResumeRecoding()">Resume</button>--\x3e\r\n            </span>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("datetime.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                <div><img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}"/>\r\n                <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div>\r\n        <div ng-if="qObject.Text[language] != undefined"  bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined"  bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n        <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}"/>\r\n        <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n        </audio>\r\n        <video controls video-on-load  ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n        </video>\r\n</div>\r\n    </div>\r\n\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n           <div><span style="color: red" ng-if="ShowMandatoryStar && !AnswerInvalid" class="font-75"><b>*This field is mandatory</b></span></div>\r\n        <survey-variable ng-repeat="item in qObject.QuestionLevelSequence" variable="qObject.Variables[item.ID]">\r\n          \r\n            <div class="sg-container">\r\n                <input ng-if="!showFallBackDate" type="date" value="yyyy-MM-dd 00:00:00" step="1" ng-model="answerInput" ng-blur="OnBlurSave(answerInput)" class="focusableInput date padding-5">\r\n                <input ng-if="showFallBackDate" ng-model="dateAnswer.answerInput"  datetime-picker date-only date-format="yyyy-MM-dd" class="focusableInput darkBdr fallBackDate date padding-5" placeholder="MM / DD / YYYY"/>\r\n               \x3c!-- <button ng-click="SaveAnswer()">ok</button>--\x3e\r\n            </div>\r\n            <div class="error" ng-if="!valid">*Date out of range. Please select a date <span ng-if="localStartDateString"> after {{localStartDateString}}</span><span ng-if="localEndDateString"> and before {{localEndDateString}}</span></div>\r\n        </survey-variable>\r\n    </div>\r\n</div>'),e.put("displayText.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block" bind-html-compile="displayedText"></div></div>\r\n    <div class="sv-container text-center">\r\n        <div><span style="color: red; padding:10px;" ng-if="ShowMandatoryStar">*Media is mandatory to Watch/Listen</span></div>\r\n\r\n        <img image-on-load onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';"\r\n             ng-click="ShowFullScreen()" ng-if="isImage" ng-src="{{qObject.Properties.MediaPath}}"\r\n             class="darkBdr img-display" height="{{qObject.Properties.Height}}" width="{{qObject.Properties.Width}}"/>\r\n\r\n        <audio ng-if="isAudio" controls src="{{path}}" type="audio/mp3"  height="{{qObject.Properties.Height}}" width="{{qObject.Properties.Width}}"></audio>\r\n        <video ng-if="isVideo" controls style="max-width:100%"  height="{{qObject.Properties.Height}}" width="{{qObject.Properties.Width}}" video-on-load seek-disable>\r\n        <source src=\'{{path}}\' type=\'video/mp4\'/>\r\n        </video>\r\n    </div>\r\n\r\n    <div id="img-modal" class="full-screen-mode">\r\n        <span ng-if="qObject.Properties.AutoDisappear != \'true\'" ng-click="HideFullScreen()" class="clickable marginRight pull-right" style="float: right; margin: 10px 20px 0px 0px;position: absolute;right: 0px;top: 30px;" >\r\n            <img src="assets/images/close.png" />\r\n        </span>\r\n        <img class="rank-img-expand" style="max-width: 100%;max-height: 100%;padding: 5px;" />\r\n        <span ng-if="qObject.Properties.AutoDisappear == \'true\'" style="position: absolute;bottom: 0px;width: 100%;left: 0px;background: rgba(0, 0, 0, 0.54);color: #fff;padding: .5rem;font-weight: bold;font-size: 1.1rem;">\r\n         Please study the image for {{timeRemaining}} seconds\r\n        </span>\r\n    </div>\r\n</div>'),e.put("dropdown.html",'<div class="sg-container">\r\n     <select  ng-model="SelectedValue" ng-change="SaveAnswer(SelectedValue)"  class="dropdown darkBdr">\r\n             <optgroup ng-repeat="group in variable.OptionGroupSequence" label="{{variable.OptionGroups[group].Text[Language]}}">                        \r\n                       <option ng-repeat="optionID in variable.OptionGroups[group].OptionSequence" value="{{variable.OptionGroups[group].Options[optionID].Code}}">\r\n                             {{variable.OptionGroups[group].Options[optionID].Text[Language]}}\r\n\t\t\t\t\t\t</option>\r\n             </optgroup>\r\n     </select>\r\n     <div ng-repeat="group in variable.OptionGroupSequence">\r\n     \t<div ng-repeat="optionID in variable.OptionGroups[group].OptionSequence">\r\n\t\t\t<input class="input-txt darkBdr" type="{{OtherVariableType}}" ng-show="variable.OptionGroups[group].Options[optionID].IsOther && SelectedValue == variable.OptionGroups[group].Options[optionID].Code" ng-model="OtherAnswer.Value[SelectedValue]" ng-keyup="SaveOtherValue(SelectedValue, variable.OptionGroups[group].Options[optionID].OtherVariableID)" />\r\n     \t</div>\r\n    </div>\r\n</div>\r\n      '),e.put("gamifyOptions.html",'\x3c!-- <div>\r\n    <div ng-if="ShowOptions" style="text-align: center; font-size: 2em;">\r\n        <span>{{Options[OptionIndex].Text[Language]}}</span>\r\n    </div>\r\n\r\n    <br />\r\n    <div class="prev-next clickable" ng-if="ShowPlayButton" ng-click="Play()">Play <i class="fa fa-caret-right"></i></div>\r\n</div> --\x3e\r\n\r\n<div id="win-canvasContainer">\r\n    <canvas id="win-canvas" width="350" height="380">\r\n        Canvas not supported, please user another browser.\r\n    </canvas>\r\n    <img id="win-prizePointer" src="app/ui/utils/win_pointer.png" alt="V" />\r\n    <div class="prev-next clickable" style="width: 350px" ng-if="ShowPlayButton" ng-click="Play()">Play <i class="fa fa-caret-right"></i></div>\r\n    <div ng-if="!ShowPlayButton" style="text-align: -webkit-center; width: 350px;">\r\n        \x3c!-- <span>You have won </span> --\x3e\r\n        <strong> {{Answer}}</strong>\r\n    </div>\r\n</div>'),
e.put("grid.html",'<table class="table grid-text-color">\r\n    <thead class="grid-width" ng-if="!(qObject.QuestionType == 8)">\r\n        <tr ng-class="{\'grid-var-header font-75\': $index == GridData.head.length-1}" ng-repeat="header in GridData.head">\r\n            <td></td>\r\n            <td ng-class="{\'group-seperator\': item.IsLastVariable || item.Property == \'Groups\', \'grid-text-header\': item.Property == \'Groups\'}" colspan="{{item.Property == \'Groups\'? qObject[item.Property][item.Id].VariableSequence.length : 1}}" ng-repeat="item in header" class="font-bold">\r\n\r\n                <span ng-if="item.Property == \'Attributes\' && qObject[item.Property][item.Id].Media[language]"><img onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{qObject[item.Property][item.Id].Media[language]}}" style="max-height:100px;max-width:100px;"/></span>\r\n                <span ng-if="(item.Property == \'Groups\' || item.Property == \'Attributes\') && qObject[item.Property][item.Id].Text[language] != undefined" bind-html-compile="qObject[item.Property][item.Id].Text[language]"></span>\r\n                <span ng-if="(item.Property == \'Groups\' || item.Property == \'Attributes\') && qObject[item.Property][item.Id].Text[language] == undefined" bind-html-compile="qObject[item.Property][item.Id].Text[DefaultLanguage]">\r\n                </span>\r\n\r\n                <div ng-switch="qObject[item.Property][item.Id].VariableType">\r\n                    <div ng-switch-when="1" class="grid-cat-head">\r\n                        \r\n                        <div grid-option-width ng-class="[OptionClass]" index="{{$index}}" class="grid-cat-headtext font-bold" ng-repeat="option in qObject[item.Property][item.Id].VariableLevelSequence" ng-if="qObject[item.Property][item.Id].Properties.ShowAs != \'2\'">\r\n                            <div ng-if="qObject[item.Property][item.Id].Options[option.ID].Text[language]" bind-html-compile="qObject[item.Property][item.Id].Options[option.ID].Text[language]"></div>\r\n                            <div ng-if="!qObject[item.Property][item.Id].Options[option.ID].Text[language]" bind-html-compile="qObject[item.Property][item.Id].Options[option.ID].Text[DefaultLanguage]"></div>\r\n                             \r\n                            <span ng-if="qObject[item.Property][item.Id].Options[option.ID].Media[language]"><img onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{qObject[item.Property][item.Id].Options[option.ID].Media[language]}}" style="max-height:100px;max-width:100px;"/></span>\r\n                        </div>\r\n                    </div>\r\n                    <div ng-switch-when="2" class="grid-cat-head">\r\n                        \r\n                        <div grid-option-width ng-class="[OptionClass]" index="{{$index}}" class="grid-cat-headtext font-bold" ng-repeat="option in qObject[item.Property][item.Id].VariableLevelSequence">\r\n                            <div ng-if="qObject[item.Property][item.Id].Options[option.ID].Text[language] != undefined" bind-html-compile="qObject[item.Property][item.Id].Options[option.ID].Text[language]"></div>\r\n                            <div ng-if="qObject[item.Property][item.Id].Options[option.ID].Text[language] == undefined" bind-html-compile="qObject[item.Property][item.Id].Options[option.ID].Text[DefaultLanguage]"></div>\r\n                            <span ng-if="qObject[item.Property][item.Id].Options[option.ID].Media[language]"><img onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{qObject[item.Property][item.Id].Options[option.ID].Media[language]}}" style="max-height:100px;max-width:100px;"/></span>\r\n                        </div>\r\n                    </div>\r\n                    <div ng-if="qObject[item.Property][item.Id].Text[language] != undefined" ng-switch-when="3" bind-html-compile="qObject[item.Property][item.Id].Text[language]">\r\n                    </div>\r\n                    <div ng-if="qObject[item.Property][item.Id].Text[language] == undefined" ng-switch-when="3" bind-html-compile="qObject[item.Property][item.Id].Text[DefaultLanguage]">\r\n                    </div>\r\n                    <div ng-if="qObject[item.Property][item.Id].Text[language] != undefined" ng-switch-when="4" bind-html-compile="qObject[item.Property][item.Id].Text[language]">\r\n                    </div>\r\n                    <div ng-if="qObject[item.Property][item.Id].Text[language] == undefined" ng-switch-when="4" bind-html-compile="qObject[item.Property][item.Id].Text[DefaultLanguage]">\r\n                    </div>\r\n                    <div ng-if="qObject[item.Property][item.Id].Text[language] != undefined" ng-switch-when="5" bind-html-compile="qObject[item.Property][item.Id].Text[language]">\r\n                    </div>\r\n                    <div ng-if="qObject[item.Property][item.Id].Text[language] == undefined" ng-switch-when="5" bind-html-compile="qObject[item.Property][item.Id].Text[DefaultLanguage]">\r\n                    </div>\r\n\r\n                </div>\r\n            </td>\r\n            <td ng-if="ShowAs == 11 && TotalBox == \'RowTotal\'"><b>Total</b></td>\r\n        </tr>\r\n    </thead>\r\n\r\n    <tbody class="grid-width">\r\n        <tr ng-repeat="row in GridData.row" ng-init="rowIndex=$index">\r\n            <td ng-if="qObject.Properties.Transpose == \'true\'" class="font-size text-right" style="min-width:200px;">\r\n                <div ng-if="QuestionType == 11 && qObject.Variables[OptionsVariable.Id].Properties.ShowAs != \'2\'" ng-repeat="option in qObject.Variables[OptionsVariable.Id].VariableLevelSequence" class="option-container">\r\n                    <span ng-if="qObject.Variables[OptionsVariable.Id].Options[option.ID].Media[language]"><img onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{qObject.Variables[OptionsVariable.Id].Options[option.ID].Media[language]}}" style="max-height:100px;max-width:100px;"/></span>\r\n                    <span ng-if="qObject.Variables[OptionsVariable.Id].Options[option.ID].Text[language] != undefined" bind-html-compile="qObject.Variables[OptionsVariable.Id].Options[option.ID].Text[language]" class="font-bold span-height"></span>\r\n                    <span ng-if="qObject.Variables[OptionsVariable.Id].Options[option.ID].Text[language] == undefined" bind-html-compile="qObject.Variables[OptionsVariable.Id].Options[option.ID].Text[DefaultLanguage]" class="font-bold span-height"></span>\r\n                </div>\r\n                <div ng-if="QuestionType != 11" class="font-size">\r\n                    <span ng-if="qObject.Variables[GridData.row[$index][0].Id].Media[language]"><img onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{qObject.Variables[GridData.row[$index][0].Id].Media[language]}}" style="max-height:100px;max-width:100px;"/></span>\r\n                    <span ng-if="qObject.Variables[GridData.row[$index][0].Id].Text[language] != undefined" bind-html-compile="qObject.Variables[GridData.row[$index][0].Id].Text[language]" class="font-bold span-height"></span>\r\n                    <span ng-if="qObject.Variables[GridData.row[$index][0].Id].Text[language] == undefined" bind-html-compile="qObject.Variables[GridData.row[$index][0].Id].Text[DefaultLanguage]" class="font-bold span-height"></span>\r\n                </div>\r\n            </td>\r\n            <td ng-class="{\'attribute-indent\': cell.InGroup,\'text-right\': qObject[cell.Property][cell.Id].Properties.ShowAs != \'dropdown\' && (cell.Property == \'AttributeHeaders\' || cell.Property == \'Attributes\'), \'group-seperator\': cell.IsLastVariable, \'grid-text-header\': cell.Property == \'AttributeHeaders\'}" ng-repeat="cell in row" ng-init="dataIndex=$index" class="padding-5 font-bold">\r\n                <span ng-if="qObject[cell.Property][cell.Id].Media[language]"><img onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{qObject[cell.Property][cell.Id].Media[language]}}" style="max-height:100px;max-width:100px;"/></span>\r\n                <span ng-if="(cell.Property == \'AttributeHeaders\' || cell.Property == \'Attributes\') && qObject[cell.Property][cell.Id].Text[language] != undefined" bind-html-compile="qObject[cell.Property][cell.Id].Text[language]" class="font-size text-right">\r\n                </span>\r\n                <span ng-if="(cell.Property == \'AttributeHeaders\' || cell.Property == \'Attributes\') && qObject[cell.Property][cell.Id].Text[language] == undefined" bind-html-compile="qObject[cell.Property][cell.Id].Text[DefaultLanguage]" class="font-size text-right">\r\n                </span>\r\n                <span ng-if="cell.Property == \'Text2\' && qObject.Attributes[cell.Id].Text2[language] != undefined" bind-html-compile="qObject.Attributes[cell.Id].Text2[language]" class="font-size font-bold">\r\n                </span>\r\n                <span ng-if="cell.Property == \'Text2\' && qObject.Attributes[cell.Id].Text2[language] == undefined" bind-html-compile="qObject.Attributes[cell.Id].Text2[DefaultLanguage]" class="font-size font-bold">\r\n                </span>\r\n\r\n                <span ng-if="cell.Property == \'Empty\'"></span>\r\n                \x3c!-- Repeat Headers --\x3e\r\n                \r\n\t\t\t\t<div ng-switch="qObject[cell.Property][cell.Id].VariableType" ng-if="isHeader[rowIndex] && qObject[cell.Property][cell.Id].Properties.ShowAs != \'2\'">\r\n\t\t\t\t\t<div ng-switch-when="1" class="grid-cat-head  font-75">\r\n\t\t\t\t\t\t<div ng-if="qObject[cell.Property][cell.Id].Options[option.ID].Text[language] != undefined" bind-html-compile="qObject[cell.Property][cell.Id].Options[option.ID].Text[language]" class="grid-cat-headtext" ng-repeat="option in qObject[cell.Property][cell.Id].VariableLevelSequence" ng-if="qObject[cell.Property][cell.Id].Properties.ShowAs != \'dropdown\'">\r\n\t\t\t\t\t\t</div>\r\n                        <div ng-if="qObject[cell.Property][cell.Id].Options[option.ID].Text[language] == undefined" bind-html-compile="qObject[cell.Property][cell.Id].Options[option.ID].Text[DefaultLanguage]" class="grid-cat-headtext" ng-repeat="option in qObject[cell.Property][cell.Id].VariableLevelSequence" ng-if="qObject[cell.Property][cell.Id].Properties.ShowAs != \'dropdown\'">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ng-switch-when="2" class="grid-cat-head  font-75">\r\n\t\t\t\t\t\t<div ng-if="qObject[cell.Property][cell.Id].Options[option.ID].Text[language] != undefined" bind-html-compile="qObject[cell.Property][cell.Id].Options[option.ID].Text[language]" grid-option-width index="{{$index}}" class="grid-cat-headtext" ng-repeat="option in qObject[cell.Property][cell.Id].VariableLevelSequence">\r\n\t\t\t\t\t\t</div>\r\n                        <div ng-if="qObject[cell.Property][cell.Id].Options[option.ID].Text[language] == undefined" bind-html-compile="qObject[cell.Property][cell.Id].Options[option.ID].Text[DefaultLanguage]" grid-option-width index="{{$index}}" class="grid-cat-headtext" ng-repeat="option in qObject[cell.Property][cell.Id].VariableLevelSequence">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ng-if="qObject[cell.Property][cell.Id].Text[language] != undefined" bind-html-compile="qObject[cell.Property][cell.Id].Text[language]" ng-switch-when="3">\r\n\t\t\t\t\t</div>\r\n                    <div ng-if="qObject[cell.Property][cell.Id].Text[language] == undefined" bind-html-compile="qObject[cell.Property][cell.Id].Text[DefaultLanguage]" ng-switch-when="3">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ng-if="qObject[cell.Property][cell.Id].Text[language] != undefined" bind-html-compile="qObject[cell.Property][cell.Id].Text[language]" ng-switch-when="4">\r\n\t\t\t\t\t</div>\r\n                    <div ng-if="qObject[cell.Property][cell.Id].Text[language] == undefined" bind-html-compile="qObject[cell.Property][cell.Id].Text[DefaultLanguage]" ng-switch-when="4">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ng-if="qObject[cell.Property][cell.Id].Text[language] != undefined" bind-html-compile="qObject[cell.Property][cell.Id].Text[language]" ng-switch-when="5">\r\n\t\t\t\t\t</div>\r\n                    <div ng-if="qObject[cell.Property][cell.Id].Text[language] == undefined" bind-html-compile="qObject[cell.Property][cell.Id].Text[DefaultLanguage]" ng-switch-when="5">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n                <div ng-switch="qObject[cell.Property][cell.Id].VariableType" ng-if="!isHeader[rowIndex]">\r\n                    <div ng-switch-when="1" class="opt-container">\r\n                        <survey-variable variable="qObject.Variables[cell.Id]">\r\n                            <survey-options show-option-label="false" is-grid-options="true"></survey-options>\r\n                        </survey-variable>\r\n                    </div>\r\n                    <div ng-switch-when="2">\r\n                        <survey-variable variable="qObject.Variables[cell.Id]">\r\n                            <survey-options show-option-label="false" is-grid-options="true"></survey-options>\r\n                        </survey-variable>\r\n                    </div>\r\n                    <div ng-switch-when="3">\r\n                        <survey-variable variable="qObject.Variables[cell.Id]">\r\n                            <div class="sg-container">\r\n                                <input type="text" ng-model="answerInput" ng-blur="OnBlurSave(answerInput)" class="input-txt darkBdr">\r\n                            </div>\r\n                        </survey-variable>\r\n                    </div>\r\n                    <div ng-switch-when="4">\r\n                        <survey-variable variable="qObject.Variables[cell.Id]" ng-if="qObject.QuestionType == 14 || qObject.QuestionType == 12">\r\n                            <div class="sg-container">\r\n                                <span ng-if="variable.Properties.Prefix != \'\'" class="font-size">{{variable.Properties.Prefix}}</span>\r\n                                <input type="number" class="input-txt darkBdr paddingZero" ng-if="TotalBox == \'RowTotal\' || TotalBox == \'None\'" ng-model="SelectedValues.single" ng-change="SetDecimalPlaces(SelectedValues.single)" ng-blur="SaveAnswer(SelectedValues.single);addVariable($parent.$parent.rowIndex)" ng-init="addVariable($parent.$parent.rowIndex)" style="width: 70%!important"/>\r\n                                <input type="number" class="input-txt darkBdr paddingZero" ng-if="TotalBox == \'ColumnTotal\'" ng-model="SelectedValues.single" ng-change="SetDecimalPlaces(SelectedValues.single)" ng-blur="SaveAnswer(SelectedValues.single);addVariable($parent.$parent.dataIndex)" ng-init="addVariable($parent.$parent.dataIndex)" style="width: 70%!important"/>\r\n                                <span ng-if="variable.Properties.Suffix != \'\'" class="font-size">{{variable.Properties.Suffix}}</span>\r\n                                <div class="error font-75" ng-if="!valid">*Invalid Input</div>\r\n                                <span class="error font-75" ng-if="!valid">(Min: {{variable.Properties.Min}}, Max: {{variable.Properties.Max}})\r\n                            </div>\r\n                        </survey-variable>\r\n                         <survey-variable variable="qObject.Variables[cell.Id]" ng-if="qObject.QuestionType == 8">\r\n                            <div class="sg-container font-size">\r\n                               \x3c!-- <span>Min: {{variable.Properties.Min}}, Max: {{variable.Properties.Max}}</span>--\x3e\r\n                               <rzslider rz-slider-model="answerInput" rz-slider-options="{id:variable.Name, floor:variable.Properties.Min, ceil:variable.Properties.Max, step:variable.Properties.IncrementScaleBy, onChange:OnValueChange(variable.Name,answerInput,variable.Properties.Max)}"></rzslider>\r\n                                \x3c!--<span  class="numericSpan">{{answerInput}}</span>--\x3e\r\n                                \x3c!--<span>Min: {{variable.Properties.Min}}, Max: {{variable.Properties.Max}}</span>\r\n                                <input type="range" min="{{variable.Properties.Min}}" max="{{variable.Properties.Max}}" step="{{variable.Properties.IncrementScaleBy}}" ng-model="answerInput" ng-blur="SaveAnswer(answerInput)" class=" darkBdr">\r\n                                <span  class="numericSpan">{{answerInput}}</span>--\x3e\r\n                            </div>\r\n                        </survey-variable>\r\n                         \x3c!-- <survey-variable variable="qObject.Variables[cell.Id]" ng-if="qObject.QuestionType == 8">\r\n                            <div class="sg-container">\r\n                              {{answerInput}}  <input type="range" min="0" max="100" ng-model="answerInput" ng-blur="SaveAnswer(answerInput)">\r\n                            </div>\r\n                        </survey-variable> --\x3e\r\n                    </div>\r\n                    <div ng-switch-when="5" bind-html-compile="qObject[item.Property][item.Id].Text[language]">\r\n                    </div>\r\n\r\n                </div>\r\n            </td>\r\n            <td ng-if="ShowAs == 11 && TotalBox == \'RowTotal\' && GridData.row[$index][0].Property != \'AttributeHeaders\'" class="padding-5">\r\n                <div class="sg-container">\r\n                    <b><input type="number" readonly class="total-values input-txt" ng-value="Total.sum[$index]"></b>\r\n                </div>\r\n            </td>\r\n        </tr>\r\n        <tr ng-if="ShowAs == 11 && TotalBox == \'ColumnTotal\'" class="total-row">\r\n            <td style="text-align:right!important;padding-right: 3em !important"><b>Total</b></td>\r\n            <td ng-repeat="column in GridData.head[0]" ng-class="{\'group-seperator\': $index == GridData.head[0].length}">\r\n                <div ng-class="sg-container" ng-if="qObject.Properties.Transpose == \'false\'">\r\n                    <b><input type="number" readonly ng-value="Total.sum[$index + 1]" class="total-values input-txt"></b>\r\n                </div>\r\n                <div ng-class="sg-container" ng-if="qObject.Properties.Transpose == \'true\'">\r\n                    <b><input type="number" readonly ng-value="Total.sum[$index]" class="total-values input-txt"></b>\r\n                </div>\r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n</table>'),e.put("grid.v2.html",'<div class="qGird-table survey-grid-table" >\r\n    <survey-table style="height:100%;width:100%;display: block" ng-class="{\'disable-table-input\':review}"> \r\n        <survey-variable variable="variable" ng-repeat="(id, variable) in qObject.Variables"></survey-variable>\r\n    </survey-table>\r\n</div>'),e.put("GridQuestion.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                <div><img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}"/>\r\n                <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div>\r\n\r\n        <div ng-if="qObject.Text[language] != undefined"  bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined"  bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n   \r\n        \r\n <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}"/>\r\n <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}">\r\n         <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n </audio>\r\n <video controls video-on-load  ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n         <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n </video>\r\n</div>\r\n    </div>\r\n    <div><span style="color: red"  class="font-size"><b>{{ErrorMessage}}</b></span></div>\r\n    <div><span style="color: red" ng-if="qObject.Properties.MobileFriendly == \'true\' && ShowMandatoryStar && !AnswerInvalid" class="font-size"><b>*This question is mandatory</b></span></div>\r\n    <div><span style="color: red" ng-if="qObject.Properties.MobileFriendly == \'false\' && ShowMandatoryStar && !AnswerInvalid" class="font-size"><b>*All questions in this grid are mandatory</b></span></div>\r\n    <div><span style="color: red" ng-if="ShowMandatoryStar && AnswerInvalid" class="font-size"><b>*Invalid Input</b></span></div>\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n        \x3c!--Grid--\x3e\r\n        <div>\r\n            <div ng-if="qObject.Properties.MobileFriendly == \'true\'" id="mobileGridPage" ng-init="GenerateMobileGridHtml()">\r\n            </div>\r\n        </div>\r\n         \x3c!--Grid View--\x3e\r\n        <div ng-if="qObject.Properties.MobileFriendly != \'true\'" ng-class="{\'fixedLayout\':qObject.QuestionType == 14, \'nowrap-white-space width-80\':qObject.QuestionType == 21,\'simpleGrid\':qObject.QuestionType == 11 || qObject.QuestionType == 27, \'distributionGrid\':qObject.QuestionType == 27}">\r\n            <survey-grid ng-if="qObject.QuestionType != 21 && (qObject.Properties.OptimiseForMobile != \'true\' || (qObject.Properties.OptimiseForMobile == \'true\' && !isMobileDevice))"></survey-grid>\r\n            <div ng-if="qObject.QuestionType == 21 " id="mobileGridPage" ng-init="GenerateMobileGridHtml()">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("HeatMapQuestion.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                \x3c!-- <div><img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}"/>\r\n                <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div> --\x3e\r\n        <div ng-if="qObject.Text[language] != undefined"  bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined"  bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n        \x3c!-- <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}"/>\r\n        <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n        </audio>\r\n        <video controls video-on-load  ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n        </video> --\x3e\r\n</div>\r\n    </div>\r\n    <div><span style="color: red" ng-if="ShowMandatoryStar" class="font-75"><b>*This field is mandatory</b></span></div>\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container overflow-auto">\r\n        <div class="overflow-auto">\r\n        \x3c!--Grid--\x3e\r\n        <canvas id="{{\'mainCanvas\' + qObject.Name}}" survey-heatmap resize style="background-size: cover; background-position: center center;"></canvas></div>\r\n    </div>\r\n</div>'),e.put("maxdiff.html",'<table class="table max-diffTable">\r\n\t<thead>\r\n\t\t<tr ng-class="{\'grid-var-header\': $index == GridData.head.length-1}" ng-repeat="header in GridData.head">\r\n\t\t\t<td ng-repeat="item in header" ng-class="{\'group-seperator\' : !$last}">\r\n\t\t\t\t<div ng-switch="item.Type">\r\n\t\t\t\t\t<div ng-switch-when="text" class="grid-cat-head font-bold">\r\n\t\t\t\t\t\t\x3c!--<span>{{item.Text}}</span>--\x3e\r\n\t\t\t\t\t\t\x3c!--<span ng-if="item.Media"><img onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{item.Media}}?dt={{ticks}}" style="max-height:100px;max-width:100px;"/></span>--\x3e\r\n\t\t\t\t\t\t<span bind-html-compile="item.Text"  class="survey-option-text font-size-Xlg">\r\n                   \t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</thead>\r\n\r\n\t<tbody>\r\n\t\t<tr ng-repeat="row in GridData.row">\r\n\t\t\t<td ng-class="{\'attribute-indent\': cell.InGroup, \'group-seperator\': cell.IsLastVariable, \'grid-text-header\': cell.Property == \'AttributeHeaders\'}"\r\n\t\t\t ng-repeat="cell in row">\r\n\t\t\t\t<div class="maxDiff-attr">\r\n\t\t\t\t\t<span ng-if="qObject[cell.Property][cell.Id].Media[language]"><img onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{qObject[cell.Property][cell.Id].Media[language]}}?dt={{ticks}}" style="max-height:100px;max-width:100px;"/></span>\r\n\t\t\t\t\t<span ng-if="cell.Property == \'AttributeHeaders\' || cell.Property == \'Attributes\'" bind-html-compile="qObject[cell.Property][cell.Id].Text[language]" class="survey-option-text font-size-Xlg">\r\n                    </span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t\x3c!--<div ng-if="cell.Property == \'none\'">\r\n\t\t\t\t\t<label class="form-radio display-block">\r\n                        <input type="radio" name="{{cell.parentId}}" ng-model="SelectedValues.single[cell.parentId]" ng-value="cell.Id" ng-click="SaveAnswer(cell.parentId, qObject.Variables[cell.parentId].Name, qObject.Variables[cell.parentId].VariableType, cell.Id)"/>\r\n                        <i class="form-icon input-button-center"></i> \r\n                        <span >&nbsp;</span>\r\n                    </label>\r\n\t\t\t\t</div>--\x3e\r\n\r\n\t\t\t\t<div ng-if="cell.Property == \'none\'">\r\n\t\t\t\t\t<label ng-if="!qObject.Variables[cell.parentId].Options[cell.Id].Media[language]" class="form-radio display-block">\r\n                        <input style="visibility: hidden;" type="radio" name="{{cell.parentId}}" ng-model="SelectedValues.single[cell.parentId]" ng-value="cell.Id" ng-change="SaveAnswer(cell.parentId, qObject.Variables[cell.parentId].Name, qObject.Variables[cell.parentId].VariableType, cell.Id)"/>\r\n                        <i class="form-icon input-button-center"></i> \r\n                        <span >&nbsp;</span>\r\n                    </label>\r\n\r\n\t\t\t\t\t<label ng-if="qObject.Variables[cell.parentId].Options[cell.Id].Media[language]" class="imageInput">\r\n\t\t\t\t\t\t<input type="radio" name="{{cell.parentId}}" ng-model="SelectedValues.single[cell.parentId]" ng-value="cell.Id" ng-change="SaveAnswer(cell.parentId, qObject.Variables[cell.parentId].Name, qObject.Variables[cell.parentId].VariableType, cell.Id)"/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t<div class="input-img-mask CaptureImg">\r\n\t\t\t\t\t\t\t<img ng-src="{{qObject.Variables[cell.parentId].Options[cell.Id].Media[language]}}?dt={{ticks}}" style="max-height:70px;max-width:70px;"/>\r\n\t\t\t\t\t\t\t<div class="image-select-ovelay"></div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>'),
e.put("MaxDiffQuestion.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                <div><img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}"/>\r\n                <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div>\r\n        <div ng-if="qObject.Text[language] != undefined"  bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined"  bind-html-compile="qObject.Text[DefaultLanguage]"></div>  \r\n        <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}"/>\r\n        <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n        </audio>\r\n        <video controls video-on-load  ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n        </video>\r\n</div>\r\n    </div>\r\n    <div><span style="color: red" ng-if="ShowMandatoryStar" class="font-75"><b>*This field is mandatory</b></span></div>     \r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n\r\n        \x3c!--Grid--\x3e\r\n        <survey-maxdiff></survey-maxdiff>\r\n\r\n    </div>\r\n</div>'),e.put("multiChoice.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container">\r\n        <div class="sq-name table-cell">{{qObject.Name}}  </div>\r\n        <div class="sq-text table-cell" bind-html-compile="qObject.Text[language]"></div>\r\n    </div>\r\n\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n        <survey-variable variable="qObject.Variables[qObject.QuestionLevelSequence[0].ID]">\r\n            \x3c!--<div>--\x3e\r\n                \r\n                <survey-options></survey-options>\r\n                \x3c!--<survey-option-group ng-switch-when="radio" ng-repeat="group in variable.OptionGroupSequence" type="{{variable.VariableType}}"  option-group="variable.OptionGroups[group]">\r\n                </survey-option-group>\r\n                <survey-single-select ng-switch-default show-as="{{variable.Properties.ShowAs.toLowerCase()}}"></survey-single-select>--\x3e\r\n            \x3c!--</div>--\x3e\r\n        </survey-variable>\r\n    </div>\r\n</div>'),e.put("multiSelectBox.html",'<div class="sg-container">\r\n    <select class="dropdown darkBdr" multiple size="15"  ng-model="data.SelectedValues" ng-change="updateOptionsSelected(data.SelectedValues)">\r\n        <optgroup ng-repeat="group in variable.OptionGroupSequence" label="{{variable.OptionGroups[group].Text[Language]}}">\r\n            <option ng-click="onSelect(variable.OptionGroups[group].Options[optionID], SelectedValues)" ng-repeat="optionID in variable.OptionGroups[group].OptionSequence" ng-value="variable.OptionGroups[group].Options[optionID].Code">{{variable.OptionGroups[group].Options[optionID].Text[Language]}}</option>\r\n        </optgroup>\r\n    </select>\r\n    <div ng-repeat="group in variable.OptionGroupSequence">\r\n    \t<div ng-repeat="optionID in variable.OptionGroups[group].OptionSequence">\r\n    \t\t<label ng-show="variable.OptionGroups[group].Options[optionID].IsOther && data.optionsSelected[variable.OptionGroups[group].Options[optionID].Code]">{{variable.OptionGroups[group].Options[optionID].Text[Language]}}></label>\r\n\t\t</div>\r\n    </div>\r\n </div>\r\n   '),e.put("nps.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n            <div ng-if="qObject.Properties.MediaPath">\r\n                <img image-on-load class="maxSize"\r\n                    ng-if="qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) "\r\n                    ng-src="{{qObject.Properties.MediaPath}}" />\r\n                <audio controls class="maxSize"\r\n                    ng-if="qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) "\r\n                       ng-src="{{qObject.Properties.MediaPath}}">\r\n                    <source ng-src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load class="maxSize"\r\n                    ng-if="qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                    <source ng-src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div>\r\n            <div ng-if="qObject.Text[language] != undefined" bind-html-compile="qObject.Text[language]"></div>\r\n            <div ng-if="qObject.Text[language] == undefined" bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n            <div ng-if="qObject.Properties.MediaPath">\r\n                <img image-on-load class="maxSize"\r\n                     ng-if="qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'"\r\n                     ng-src="{{qObject.Properties.MediaPath}}" />\r\n                <audio controls class="maxSize"\r\n                       ng-if="qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'"\r\n                       ng-src="{{qObject.Properties.MediaPath}}">\r\n                    <source ng-src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load\r\n                       ng-if="qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n                    <source ng-src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div><span style="color: red" ng-if="ShowMandatoryStar" class="font-75"><b>* This field is mandatory</b></span>\r\n    </div>\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container" layout="column">\r\n\r\n        \x3c!--NPS--\x3e\r\n        <survey-variable variable="qObject.Variables[qObject.QuestionLevelSequence[0].ID]" language="{{language}}">\r\n            <div layout="column">\r\n                <div layout="row" style="display: table;width:100%; border-spacing:5px"\r\n                    ng-if="!RatingQuestionConfig.ShapeType || RatingQuestionConfig.ShapeType == \'8\'">\r\n                    <span ng-if="!RatingQuestionConfig.ShapeType || RatingQuestionConfig.ShapeType == \'8\'"\r\n                        style="display: table-cell" id="{{value.Code}}" class="focusable nps-box pos-rel"\r\n                        ng-repeat="(option,value) in variable.Options"\r\n                        ng-click="SaveNPSAnswer(variable.Name,variable.VariableType,value.Code)"\r\n                        ng-class="{\'nps-background\' : NPSAnswer == value.Code, \'nps-shading\': RatingQuestionConfig.Properties.NPSOptionColors == \'true\'}">\r\n                        {{value.Code}}\r\n                        <div class="bg"></div>\r\n                    </span>\r\n                </div>\r\n                <div layout="row" style="display: table;border-spacing:5px"\r\n                    ng-if="(RatingQuestionConfig.ShapeType == \'1\' || RatingQuestionConfig.ShapeType == \'6\' )">\r\n                    <ul class="marginZero paddingZero display-inline-block" style="table-layout:fixed"\r\n                        ng-if="(RatingQuestionConfig.ShapeType == \'1\' || RatingQuestionConfig.ShapeType == \'6\' )">\r\n                        <li ng-if="(RatingQuestionConfig.ShapeType == \'1\' || RatingQuestionConfig.ShapeType == \'6\' )"\r\n                            id="{{value.Code}}" style="display: table-cell" ng-repeat="(option,value) in variable.Options"\r\n                            ng-click="SaveNPSAnswer(variable.Name,variable.VariableType,value.Code)"\r\n                            class="ratingShape shape-large focusable pos-rel"\r\n                            ng-class="{\'smiley-big\' :variable.VariableLevelSequence.length >= 8, \'smiley-small\': variable.VariableLevelSequence.length < 8,\'shape-small\':properties.ShapeSize == \'small\',\'shape-medium\':properties.ShapeSize == \'medium\',\'nps-star\':RatingQuestionConfig.ShapeType == \'1\'}">\r\n                            \x3c!-- Star Shape --\x3e\r\n                            <div></div>\r\n                            <svg ng-model="SelectedValues.single" ng-if="RatingQuestionConfig.ShapeType == \'1\'"\r\n                                role="img" class="stkv-c-hoverable-icon stkv-us-secondary--fill rating-option-theme"\r\n                                viewBox="0 0 32 32"\r\n                                ng-class="{\'svg-focus\':OptionId <= hover.hoverID && hover.hoverID != ExclusiveId,\'svg-filled blink\': NPSAnswer == value.Code}">\r\n                                <svg width="32" height="32" viewBox="0 0 32 32"\r\n                                    class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--outline">\r\n                                    <path\r\n                                        d="M0 11.625h12.219q.469-1.469 1.422-4.375T16 0q.469 1.438 1.422 4.344t2.359 7.281H32q-1.219.875-3.688 2.672t-6.188 4.516q.469 1.438 1.406 4.359t2.344 7.266q-1.219-.906-3.688-2.703t-6.188-4.484q-1.219.906-3.688 2.703t-6.188 4.484Q6.591 29 7.528 26.079t2.344-7.266q-1.219-.906-3.688-2.703t-6.188-4.484zm3.938 1.25q.938.688 2.813 2.047t4.656 3.422q-.344 1.063-1.063 3.25t-1.813 5.469q.938-.656 2.813-2.016T16 21.656q.938.656 2.813 2.016t4.656 3.391q-.344-1.094-1.063-3.281t-1.813-5.438l2.813-2.063 4.656-3.406h-9.219q-.344-1.094-1.063-3.281t-1.781-5.469q-.344 1.094-1.063 3.281t-1.781 5.469H3.936z">\r\n                                    </path>\r\n                                </svg>\r\n                                <svg width="32" height="32" viewBox="0 0 32 32"\r\n                                    class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--hover stkv-us-secondary-color--fill20-hover stkv-us-secondary-color--fill-checked">\r\n                                    <path\r\n                                        d="M0,11.625h12.219c0.313-0.979,0.787-2.438,1.422-4.375S15.063,2.896,16,0c0.313,0.958,0.787,2.407,1.422,4.344  c0.635,1.937,1.422,4.364,2.359,7.281H32c-0.813,0.583-2.042,1.474-3.688,2.672c-1.646,1.198-3.709,2.703-6.188,4.516  c0.313,0.959,0.781,2.412,1.405,4.359c0.625,1.947,1.406,4.369,2.345,7.266c-0.813-0.604-2.042-1.504-3.688-2.703  c-1.646-1.197-3.708-2.691-6.188-4.483c-0.813,0.604-2.042,1.505-3.688,2.703s-3.708,2.692-6.188,4.483  c0.313-0.958,0.781-2.411,1.406-4.358c0.625-1.947,1.406-4.37,2.344-7.267C9.06,18.209,7.83,17.309,6.184,16.11  c-1.646-1.198-3.709-2.692-6.188-4.484L0,11.625z">\r\n                                    </path>\r\n                                </svg>\r\n                            </svg>\r\n                            \x3c!-- Circle Shape --\x3e\r\n                            <svg ng-if="RatingQuestionConfig.ShapeType == \'6\'" role="img"\r\n                                class="stkv-c-hoverable-icon stkv-us-secondary--fill npsCircle rating-option-theme"\r\n                                viewBox="0 0 32 32" ng-model="SelectedValues.single"\r\n                                ng-class="{\'svg-focus\':OptionId <= hover.hoverID && hover.hoverID != ExclusiveId,\'svg-filled blink\': NPSAnswer == value.Code}">\r\n                                <svg width="32" height="32" viewBox="0 0 73.25 74.5">\r\n                                    <circle fill="none" stroke="#d5d7d9" stroke-width="3" cx="36.25" cy="38.5" r="31">\r\n                                    </circle>\r\n                                </svg>\r\n\r\n                            </svg>\r\n                            <span class="ratingCircle-txt">\r\n                                <div>{{value.Code}}</div>\r\n                            </span>\r\n                        </li>\r\n                    </ul>\r\n                    <div ng-if="(RatingQuestionConfig.ShapeType == \'1\' || RatingQuestionConfig.ShapeType == \'6\' )"\r\n                        layout="row" style="display: table;width:99.5%" class="font-size">\r\n                        <span flex="50"\r\n                            ng-if="variable.Options[variable.VariableLevelSequence[0].ID].Text[Language] != undefined"\r\n                            class="display-inline-block survey-option-text" style="float:left;width: 50%;\r\n                            display: block;"\r\n                            bind-html-compile="variable.Options[variable.VariableLevelSequence[0].ID].Text[Language]"></span>\r\n                        <span flex="50"\r\n                            ng-if="variable.Options[variable.VariableLevelSequence[0].ID].Text[Language] == undefined"\r\n                            class="display-inline-block survey-option-text" style="float:left;width: 50%;\r\n                            display: block;"\r\n                            bind-html-compile="variable.Options[variable.VariableLevelSequence[0].ID].Text[DefaultLanguage]"></span>\r\n                        <span flex="50"\r\n                            ng-if="variable.Options[variable.VariableLevelSequence[variable.VariableLevelSequence.length - 1].ID].Text[Language] != undefined"\r\n                            class="text-right display-inline-block survey-option-text paddingZero" style="float:right;width: 50%;\r\n                            display: block;padding-right:0px;"\r\n                            bind-html-compile="variable.Options[variable.VariableLevelSequence[variable.VariableLevelSequence.length - 1].ID].Text[Language]"></span>\r\n                        <span flex="50"\r\n                            ng-if="variable.Options[variable.VariableLevelSequence[variable.VariableLevelSequence.length - 1].ID].Text[Language] == undefined"\r\n                            class="text-right display-inline-block survey-option-text paddingZero" style="float:right;width: 50%;\r\n                            display: block;padding-right:0px;"\r\n                            bind-html-compile="variable.Options[variable.VariableLevelSequence[variable.VariableLevelSequence.length - 1].ID].Text[DefaultLanguage]"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div ng-if="!RatingQuestionConfig.ShapeType || RatingQuestionConfig.ShapeType == \'8\'" layout="row"\r\n                style="display: table;width:99.5%" class="padding-5 font-size">\r\n                <span flex="50"\r\n                    ng-if="variable.Options[variable.VariableLevelSequence[0].ID].Text[Language] != undefined"\r\n                    class="display-inline-block survey-option-text" style="float:left;width: 50%;\r\n                    display: block;"\r\n                    bind-html-compile="variable.Options[variable.VariableLevelSequence[0].ID].Text[Language]"></span>\r\n                <span flex="50"\r\n                    ng-if="variable.Options[variable.VariableLevelSequence[0].ID].Text[Language] == undefined"\r\n                    class="display-inline-block survey-option-text" style="float:left;width: 50%;\r\n                    display: block;"\r\n                    bind-html-compile="variable.Options[variable.VariableLevelSequence[0].ID].Text[DefaultLanguage]"></span>\r\n                <span flex="50"\r\n                    ng-if="variable.Options[variable.VariableLevelSequence[variable.VariableLevelSequence.length - 1].ID].Text[Language] != undefined"\r\n                    class="text-right display-inline-block survey-option-text paddingZero" style="float:right;width: 50%;\r\n                    display: block;padding-right:0px;"\r\n                    bind-html-compile="variable.Options[variable.VariableLevelSequence[variable.VariableLevelSequence.length - 1].ID].Text[Language]"></span>\r\n                <span flex="50"\r\n                    ng-if="variable.Options[variable.VariableLevelSequence[variable.VariableLevelSequence.length - 1].ID].Text[Language] == undefined"\r\n                    class="text-right display-inline-block survey-option-text paddingZero" style="float:right;width: 50%;\r\n                    display: block;padding-right:0px;"\r\n                    bind-html-compile="variable.Options[variable.VariableLevelSequence[variable.VariableLevelSequence.length - 1].ID].Text[DefaultLanguage]"></span>\r\n            </div>\r\n    </div>\r\n    </survey-variable>\r\n</div>\r\n</div>\r\n'),e.put("numeric.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                <div><img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}"/>\r\n                <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div>\r\n\r\n        <div ng-if="qObject.Text[language] != undefined"  bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined"  bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n\r\n        <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}"/>\r\n        <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n        </audio>\r\n        <video controls video-on-load  ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n        </video>\r\n</div>\r\n\r\n    </div>\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n        <div><span style="color: red" ng-if="ShowMandatoryStar && !AnswerInvalid" class="font-75">*This field is mandatory</span></div>\r\n      \r\n        <survey-variable ng-repeat="item in qObject.QuestionLevelSequence" variable="qObject.Variables[item.ID]">\r\n            <div class="sg-container">\r\n                <div ng-if="variable.VariableType == 4">\r\n                    <span ng-if="variable.Properties.Prefix != \'\'" class="survey-option-text display-inline-block">{{variable.Properties.Prefix}}</span>\r\n                    <input id="{{variable.Name}}" ng-class="{\'border-all\':variable.Properties.ShowFullBorder == \'true\', \'border-red\':(SelectedValues.single < variable.Properties.Min || SelectedValues.single > variable.Properties.Max) && SelectedValues.single}" class="input-txt focusableInput" type="number" ng-model="SelectedValues.single" placeholder="{{Placeholder}}" ng-blur="OnBlurSave(SelectedValues.single)">\r\n                    <span ng-if="variable.Properties.Suffix != \'\'" class="survey-option-text display-inline-block">{{variable.Properties.Suffix}}</span>\r\n                </div>\r\n                <div ng-if="SelectedValues.single && HideOkButton != \'true\' && variable.VariableType == 4">\r\n                <div  class="button nav enabled  display-inline-block" ng-click="SaveAnswer(SelectedValues.single)">\r\n                    <span>{{(Buttons[\'Ok\'][Language] || Buttons[\'Ok\'][DefaultLanguage])}} <i class="fa fa-check"></i></span>\r\n                </div>\r\n                \x3c!-- <div class="text display-inline-block" ng-if="!isMobileDevice">press <strong>ENTER</strong></div> --\x3e\r\n            </div>\r\n            </div>\r\n\r\n                <survey-options ng-if="variable.VariableType == 1"></survey-options>\r\n                \x3c!-- <span class="error" ng-if="!valid">*Invalid Input</span> --\x3e\r\n                \x3c!-- <span class="error max-min" ng-if="!valid && ((variable.Properties.Min && answerInput < variable.Properties.Min) || (variable.Properties.Max && answerInput > variable.Properties.Max))">(Min: {{variable.Properties.Min}}, Max: {{variable.Properties.Max}})</span> --\x3e\r\n            </div>\r\n        </survey-variable>\r\n    </div>\r\n</div>'),
e.put("option.html",'<div class="hide-default">\r\n    <div ng-switch="variable.VariableType" ng-if="!isGridOptions" ng-class="{\'otherOption\':variable.Options[OptionId].IsOther}">\r\n\r\n        <div ng-switch-when="1">\r\n            \x3c!--radio plus label --\x3e\r\n            <label class="form-radio" ng-if="OptionLayout == 1 && variable.Properties.ShowAs != \'14\'" ng-click="SingleSelectOption()">\r\n                <input type="radio" name="{{variable.Name}}" ng-model="SelectedValues.single" value="{{variable.Options[OptionId].Code}}"/>\r\n                <i class="form-icon"></i> \r\n                <span class="survey-option-text" ng-if="showOptionLabel && variable.Options[OptionId].Text[Language] != undefined" bind-html-compile="variable.Options[OptionId].Text[Language]"></span>\r\n                <span class="survey-option-text" ng-if="showOptionLabel && variable.Options[OptionId].Text[Language] == undefined" bind-html-compile="variable.Options[OptionId].Text[DefaultLanguage]"></span>\r\n                <input class="focusableInput otherInput" type="{{OtherVariableType[OptionId]}}" ng-if="variable.Options[OptionId].IsOther && (SelectedValues.single == variable.Options[OptionId].Code)"\r\n                ng-blur="saveOtherValue(variable.Options[OptionId])" placeholder="{{Placeholders[\'Other\'][Language] || Placeholders[\'Other\'][DefaultLanguage]}}" ng-model="OtherAnswer.Value[variable.Options[OptionId].Code]">\r\n\r\n            </label>\r\n            \x3c!-- image plus label --\x3e\r\n            <label ng-click="SingleSelectOption()" ng-class="{\'selected\':SelectedValues.single == OptionId}" ng-if="variable.Properties.ShowAs == \'14\'" style="display: block" class="imageInput">\r\n                <i class="icon icon-check pos-abs" ng-if="SelectedValues.single == OptionId" style="top:10px;right:5px;"></i> \r\n                <div class="tick-wrapper" ng-if="SelectedValues.single == OptionId"></div> \r\n                <div class="bd"></div> \r\n                <div class="bg focusable"  id="{{::OptionId}}" ng-mouseenter="onmouseEnter($event)" ng-mouseleave="onmouseLeave($event)"></div>\r\n                <input  type="radio" name="{{variable.Name}}" ng-model="SelectedValues.single" value="{{variable.Options[OptionId].Code}}" />\r\n            <div class="imgContent">\r\n                <div class="input-img-mask image-wrapper wrapper100" ng-class="{\'wrapper100\':variable.Properties.ImageSize == \'dim100\',\'wrapper50\':variable.Properties.ImageSize == \'dim50\',\'wrapper200\':variable.Properties.ImageSize == \'dim200\'}">\r\n                        <img ng-if="!(variable.Options[OptionId].Media[Language] || variable.Options[OptionId].Media[DefaultLanguage])" class="dim100" ng-class="{\'dim100\':variable.Properties.ImageSize == \'dim100\',\'dim50\':variable.Properties.ImageSize == \'dim50\',\'dim200\':variable.Properties.ImageSize == \'dim200\'}" ng-src="{{variable.Options[OptionId].IsOther?\'assets/images/other-image.png\':\'assets/images/default-image.png\'}}"/>\r\n                        <img ng-if="(variable.Options[OptionId].Media[Language] || variable.Options[OptionId].Media[DefaultLanguage])" class="dim100" ng-class="{\'dim100\':variable.Properties.ImageSize == \'dim100\',\'dim50\':variable.Properties.ImageSize == \'dim50\',\'dim200\':variable.Properties.ImageSize == \'dim200\'}" ng-src="{{variable.Options[OptionId].Media[Language]?variable.Options[OptionId].Media[Language]:variable.Options[OptionId].Media[DefaultLanguage]}}"/>\r\n                    \x3c!-- <img class="dim100"  ng-class="{\'dim100\':variable.Properties.ImageSize == \'dim100\',\'dim50\':variable.Properties.ImageSize == \'dim50\',\'dim200\':variable.Properties.ImageSize == \'dim200\'}" onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{variable.Options[OptionId].Media[Language]?variable.Options[OptionId].Media[Language]:variable.Options[OptionId].Media[DefaultLanguage]}}" /> --\x3e\r\n                    \x3c!-- <img ng-src="{{variable.Options[OptionId].Media[Language]?variable.Options[OptionId].Media[Language]:variable.Options[OptionId].Media[DefaultLanguage]}}" onError="this.onerror=null;this.src=\'../../../assets/images/default-image.jpg\';"  /> --\x3e\r\n                    <div class="image-select-ovelay"></div>                   \r\n                </div>\r\n                <span class="survey-option-text" ng-if="showOptionLabel && variable.Options[OptionId].Text[Language] != undefined" bind-html-compile="variable.Options[OptionId].Text[Language]"></span>\r\n                <span class="survey-option-text" ng-if="showOptionLabel && variable.Options[OptionId].Text[Language] == undefined" bind-html-compile="variable.Options[OptionId].Text[DefaultLanguage]"></span>\r\n               \r\n\r\n            </div>\r\n           \r\n            </label>\r\n            <input class="focusableInput input-txt" placeholder="{{Placeholders[\'Other\'][Language] || Placeholders[\'Other\'][DefaultLanguage]}}" type="{{OtherVariableType[OptionId]}}" ng-if="variable.Options[OptionId].IsOther && (SelectedValues.single == variable.Options[OptionId].Code) && (variable.Properties.ShowAs == \'14\')"\r\n            ng-blur="saveOtherValue(variable.Options[OptionId])" ng-model="OtherAnswer.Value[variable.Options[OptionId].Code]">\r\n            \x3c!--boxed label --\x3e\r\n            <div ng-class="{\'option-checked\':SelectedValues.single == OptionId,\'otherOption\':variable.Options[OptionId].IsOther}"\r\n                ng-if="OptionLayout == 2 && variable.Properties.ShowAs != \'14\'" ng-click="SingleSelectOption($event)" class=" pos-rel option-as-label">\r\n                <i class="icon icon-check pos-abs" ng-if="SelectedValues.single == OptionId" style="top:10px;right:5px;"></i>\r\n                <div class="bd"></div>\r\n                <div class="bg focusable" id="{{::OptionId}}" ng-mouseenter="onmouseEnter($event)" ng-mouseleave="onmouseLeave($event)"></div>\r\n                <span class="survey-option-text" ng-if="variable.Options[OptionId].Text[Language] != undefined" bind-html-compile="variable.Options[OptionId].Text[Language]"></span>\r\n                <span class="survey-option-text" ng-if="variable.Options[OptionId].Text[Language] == undefined" bind-html-compile="variable.Options[OptionId].Text[DefaultLanguage]"></span>\r\n                <i class="icon icon-edit pos-abs" style="top:10px;right:5px;" ng-if="variable.Options[OptionId].IsOther"></i>\r\n            </div>\r\n            <input class="focusableInput input-txt" type="{{OtherVariableType[OptionId]}}" ng-if="OptionLayout == 2 && variable.Properties.ShowAs != \'14\' && variable.Options[OptionId].IsOther && (SelectedValues.single == variable.Options[OptionId].Code)"\r\n            ng-blur="saveOtherValue(variable.Options[OptionId])" ng-model="OtherAnswer.Value[variable.Options[OptionId].Code]" placeholder="{{Placeholders[\'Other\'][Language] || Placeholders[\'Other\'][DefaultLanguage]}}" style="width: 100%;margin-top: 15px;">\r\n\r\n        </div>\r\n\r\n        <div ng-switch-when="2">\r\n            \x3c!--checkbox plus label --\x3e\r\n            <label ng-if="OptionLayout == 1 && variable.Properties.ShowAs != \'15\'" ng-class="{\'form-radio\':variable.Options[OptionId].IsExclusive,\'form-checkbox\':!variable.Options[OptionId].IsExclusive}">\r\n                <input  ng-disabled="MaxChoices == answers.length && !SelectedValues[OptionId]" type="checkbox" ng-model="SelectedValues[OptionId]" value="{{variable.Options[OptionId].Code}}" ng-change="MuiltiSelectOption(false, variable.Options[OptionId])" />\r\n                <i class="form-icon"></i> \r\n                <span class="survey-option-text" ng-if="variable.Options[OptionId].Text[Language] != undefined" bind-html-compile="variable.Options[OptionId].Text[Language]"></span>\r\n                <span class="survey-option-text" ng-if="variable.Options[OptionId].Text[Language] == undefined" bind-html-compile="variable.Options[OptionId].Text[DefaultLanguage]"></span>\r\n            \r\n            <input class="focusableInput otherInput" type="{{OtherVariableType[OptionId]}}" ng-show="variable.Options[OptionId].IsOther && SelectedValues[variable.Options[OptionId].Code]"\r\n                   ng-blur="saveOtherValue(variable.Options[OptionId])" placeholder="{{Placeholders[\'Other\'][Language] || Placeholders[\'Other\'][DefaultLanguage]}}" ng-model="OtherAnswer.Value[variable.Options[OptionId].Code]"\r\n                   style="margin-top:5px">\r\n                </label>\r\n            \x3c!-- image plus label --\x3e\r\n            <label ng-if="variable.Properties.ShowAs == \'15\'" ng-class="{\'selected\':SelectedValues[OptionId]}" class="imageInput" style="display: block">\r\n                <input ng-disabled="MaxChoices == answers.length && !SelectedValues[OptionId]" type="checkbox" ng-model="SelectedValues[OptionId]" value="{{variable.Options[OptionId].Code}}" ng-change="MuiltiSelectOption(false, variable.Options[OptionId])"  />\r\n                <i class="icon icon-check pos-abs" ng-if="SelectedValues[OptionId]" style="right:5px;top:10px"></i>\r\n                <div class="tick-wrapper" ng-if="SelectedValues[OptionId]"></div> \r\n                <div class="bd"></div> \r\n                <div class="bg focusable"  id="{{::OptionId}}" ng-mouseenter="onmouseEnter($event)" ng-mouseleave="onmouseLeave($event)"></div>\r\n                <div class="imgContent">\r\n                <div class="input-img-mask image-wrapper wrapper100"  ng-class="{\'wrapper100\':variable.Properties.ImageSize == \'dim100\',\'wrapper50\':variable.Properties.ImageSize == \'dim50\',\'wrapper200\':variable.Properties.ImageSize == \'dim200\'}">\r\n                    <img class="dim100"  ng-class="{\'dim100\':variable.Properties.ImageSize == \'dim100\',\'dim50\':variable.Properties.ImageSize == \'dim50\',\'dim200\':variable.Properties.ImageSize == \'dim200\'}" onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{variable.Options[OptionId].Media[Language]?variable.Options[OptionId].Media[Language]:variable.Options[OptionId].Media[DefaultLanguage]}}" />\r\n                    <div class="image-select-ovelay"></div>\r\n                </div>\r\n                <span class="survey-option-text" ng-if="variable.Options[OptionId].Text[Language] != undefined" bind-html-compile="variable.Options[OptionId].Text[Language]"></span>\r\n                <span class="survey-option-text" ng-if="variable.Options[OptionId].Text[Language] == undefined" bind-html-compile="variable.Options[OptionId].Text[DefaultLanguage]"></span>\r\n               \r\n                </div>\r\n            </label>\r\n            <input class="focusableInput input-txt darkBdr" type="{{OtherVariableType[OptionId]}}" ng-show="variable.Options[OptionId].IsOther && SelectedValues[variable.Options[OptionId].Code] && variable.Properties.ShowAs == \'15\'"\r\n            ng-blur="saveOtherValue(variable.Options[OptionId])" ng-model="OtherAnswer.Value[variable.Options[OptionId].Code]"\r\n            style="margin-top:5px" placeholder="{{Placeholders[\'Other\'][Language] || Placeholders[\'Other\'][DefaultLanguage]}}">\r\n            \x3c!-- labeled  option in modern view --\x3e\r\n            <fieldset ng-disabled="MaxChoices == answers.length && !SelectedValues[OptionId]" ng-class="{\'option-checked\':SelectedValues[OptionId]}"\r\n                ng-if="OptionLayout == 2 && variable.Properties.ShowAs != \'15\'" ng-click="MuiltiSelectOption(true, variable.Options[OptionId], $event)" class="pos-rel option-as-label">\r\n                <i class="icon icon-check pos-abs" ng-if="SelectedValues[OptionId]" style="right:5px;top:10px"></i>\r\n                <div class="bd"></div>\r\n                <div class="bg focusable" id="{{::OptionId}}" ng-mouseenter="onmouseEnter($event)" ng-mouseleave="onmouseLeave($event)"></div>\r\n                <span ng-if="variable.Options[OptionId].Text[Language] != undefined" class="survey-option-text" bind-html-compile="variable.Options[OptionId].Text[Language]"></span>\r\n                <span ng-if="variable.Options[OptionId].Text[Language] == undefined" class="survey-option-text" bind-html-compile="variable.Options[OptionId].Text[DefaultLanguage]"></span>\r\n            </fieldset >\r\n                <input class="focusableInput input-txt darkBdr" type="{{OtherVariableType[OptionId]}}" ng-class="{\'otherOption\':variable.Options[OptionId].IsOther}" ng-show="variable.Options[OptionId].IsOther && SelectedValues[variable.Options[OptionId].Code] && OptionLayout == 2 && variable.Properties.ShowAs != \'15\'"\r\n                ng-blur="saveOtherValue(variable.Options[OptionId])" ng-model="OtherAnswer.Value[variable.Options[OptionId].Code]"\r\n                style="margin-top:15px;width:100%" placeholder="{{Placeholders[\'Other\'][Language] || Placeholders[\'Other\'][DefaultLanguage]}}">\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div ng-switch="variable.VariableType" class="option-container" ng-if="isGridOptions">\r\n        <div ng-switch-when="1" style="position:relative;">\r\n            \x3c!--<div style="visibility: hidden">{{variable.Options[OptionId].Text[Language]}}</div> --\x3e\r\n            <div ng-class="{\'grid-options\': variable.Properties.Orientation == \'Horizontal\'}">\r\n                <label class="form-radio" ng-click="SingleSelectOption()">\r\n                    <input type="radio" name="{{variable.Name}}" ng-model="SelectedValues.single" value="{{variable.Options[OptionId].Code}}" />\r\n                    <i class="form-icon input-button-center"></i> \r\n                    <span >&nbsp;</span>\r\n\r\n                </label>\r\n            </div>\r\n\r\n            <input type="text" class="focusableInput input-txt darkBdr" ng-if="variable.Options[OptionId].IsOther && SelectedValues.single == variable.Options[OptionId].Code"\r\n                ng-blur="saveOtherValue(variable.Options[OptionId])" ng-model="OtherAnswer.Value[variable.Options[OptionId].Code]"\r\n            />\r\n        </div>\r\n\r\n        <div ng-switch-when="2" style="position:relative">\r\n            \x3c!-- <div style="visibility: hidden">{{variable.Options[OptionId].Text[Language]}}</div>--\x3e\r\n            <div ng-class="{\'grid-options\': variable.Properties.Orientation == \'Horizontal\'}">\r\n                <label ng-if="variable.Options[OptionId].IsExclusive" class="form-radio">\r\n                    <input type="checkbox" name="{{variable.Name}}" ng-model="SelectedValues[OptionId]" value="{{variable.Options[OptionId].Code}}" ng-change="MuiltiSelectOption(false, variable.Options[OptionId])" />\r\n                    <i class="form-icon input-button-center"></i> \r\n                    <span style="visibility: hidden" >&nbsp;</span>\r\n                </label>\r\n\r\n                <label ng-if="!variable.Options[OptionId].IsExclusive" class="form-checkbox">\r\n                    <input type="checkbox" name="{{variable.Name}}" ng-model="SelectedValues[OptionId]" value="{{variable.Options[OptionId].Code}}" ng-change="MuiltiSelectOption(false, variable.Options[OptionId])" />\r\n                    <i class="form-icon input-button-center"></i> \r\n                    <span style="visibility: hidden" >&nbsp;</span>\r\n                </label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("optionGroup.html",'<div class="sg-container" ng-class="{\'opt-horizontal\' : !showOptionLabel}">\r\n    <div class="sg-name" ng-if="!optionGroup.IsDefault" bind-html-compile="optionGroup.Text[language]"></div>\r\n\r\n    <div ng-repeat="optionID in optionGroup.OptionSequence" ng-switch="type" ng-class="{\'option-indent\' : !optionGroup.IsDefault}">\r\n        <div ng-switch-when="1">\r\n            <label class="form-radio">\r\n            <input type="radio" name="{{GetGroupName()}}" ng-model="SelectedValues.single" ng-value="optionGroup.Options[optionID].Code" ng-change="SaveSingle()" />\r\n            <i class="form-icon"></i> \r\n            <img ng-if="optionGroup.Options[optionID].Media.hasOwnProperty(\'src\')" src="{{optionGroup.Options[optionID].Media.src}}" alt="{{optionGroup.Options[optionID].Media.altText}}" height="{{optionGroup.Options[optionID].Media.height}}" width="{{optionGroup.Options[optionID].Media.width}}">\r\n            <span class="survey-option-text" ng-if="showOptionLabel" bind-html-compile="optionGroup.Options[optionID].Text[language]"></span>\r\n            <span class="survey-option-text" ng-if="!showOptionLabel">\'&nbsp;\'</span>\r\n        </label>\r\n            <input class="form-input" type="{{OtherVariableType}}" ng-if="optionGroup.Options[optionID].IsOther && (SelectedValues.single == optionGroup.Options[optionID].Code)" ng-keyup="saveOtherValue(optionGroup.Options[optionID])" ng-model="OtherAnswer.Value[optionGroup.Options[optionID].Code]">\r\n        </div>\r\n        <div  ng-switch-when="2">        \r\n            <label class="form-checkbox">\r\n            <input type="checkbox" ng-model="SelectedValues[optionGroup.Options[optionID].Code]" ng-value="optionGroup.Options[optionID].Code" ng-click="ToggelOption(optionGroup.Options[optionID])" />\r\n            <i class="form-icon"></i> \r\n            <img ng-if="optionGroup.Options[optionID].Media.hasOwnProperty(\'src\')" src="{{optionGroup.Options[optionID].Media.src}}" alt="{{optionGroup.Options[optionID].Media.altText}}" height="{{optionGroup.Options[optionID].Media.height}}" width="{{optionGroup.Options[optionID].Media.width}}">\r\n            <span class="survey-option-text" bind-html-compile="optionGroup.Options[optionID].Text[language]"></span>\r\n        </label>\r\n            <input class="form-input" type="{{OtherVariableType}}" ng-show="optionGroup.Options[optionID].IsOther && SelectedValues[optionGroup.Options[optionID].Code]" ng-keyup="saveOtherValue(optionGroup.Options[optionID])" ng-model="OtherAnswer.Value[optionGroup.Options[optionID].Code]">\r\n        </div>\r\n    </div>\r\n</div>'),e.put("otp.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div id="ques" ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                <div><img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}"/>\r\n                <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div>\r\n        <div ng-if="qObject.Text[language] != undefined"  bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined"  bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n        <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}"/>\r\n        <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n        </audio>\r\n        <video controls video-on-load  ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n        </video>\r\n</div>\r\n</div>\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n        <div><span style="color: red" ng-if="ShowMandatoryStar && AnswerInvalid">*Invalid Input</span></div>\r\n        <div>{{otpMessage}}</div>\r\n        <ul>\r\n            <li>\r\n                <survey-variable ng-repeat="item in qObject.QuestionLevelSequence" variable="qObject.Variables[item.ID]" ng-if="qObject.Variables[item.ID].VariableType == 3">\r\n\r\n                    <div class="sg-container">\r\n                        \x3c!-- <input ng-if="variable.Properties.RegexType == \'Telephone\' || variable.Properties.RegexType == \'Postal\'" placeholder="{{RegexExample}}" class="input-txt darkBdr"  type="number" ng-model="answerInput" ng-blur="SaveAnswer(answerInput)" /> --\x3e\r\n                        <input  id="{{variable.Name}}" ng-class="{\'border-all\':variable.Properties.ShowFullBorder, \'border-red\':SelectedValues.single.length < variable.Properties.Min && SelectedValues.single }"\r\n                            maxlength="{{variable.Properties.Max}}" variableName="{{variable.Name}}" placeholder="{{Placeholder}}"\r\n                            class="focusableInput darkBdr input-txt full-width" type="text" ng-model="SelectedValues.single"\r\n                            ng-blur="OnBlurSave(SelectedValues.single)" />\r\n                    </div>\r\n                </survey-variable>\r\n            </li>\r\n\r\n        </ul>\r\n        <ul>\r\n            <li ng-class="{\'disabled\':VerifiedQuestionOTPMap[qObject.ID] || SendClicked}" class="btnOTP" ng-click="SendOTP()">Send OTP</li>\r\n            <li>Didn\'t receive OTP? <span ng-class="{\'disabled\':VerifiedQuestionOTPMap[qObject.ID]}" ng-click="SendOTP()" style="font-size: 14px;\r\n                margin-left: 10px;\r\n                color: #2196F3;\r\n                text-decoration: underline;" class="clickable">Resend OTP</span></li>\r\n\r\n        </ul>\r\n        <span class="clearfix"></span>\r\n        <ul>\r\n            <li> Please enter the 6 Digit OTP sent to your mobile number</li>\r\n        </ul>\r\n        <ul class=" otp-container">\r\n            <li>\r\n                <input ng-disabled="VerifiedQuestionOTPMap[qObject.ID]" type="number" id="1" tabindex="5" ng-model="EnteredOTP[0]" maxlength="1"\r\n                    ng-keyup="ShiftFocus($event)" class="input-txt" />\r\n                <input ng-disabled="VerifiedQuestionOTPMap[qObject.ID]" type="number" id="2" tabindex="6" ng-model="EnteredOTP[1]" maxlength="1"\r\n                    ng-keyup="ShiftFocus($event)" class="input-txt" />\r\n                <input ng-disabled="VerifiedQuestionOTPMap[qObject.ID]" type="number" id="3" tabindex="7" ng-model="EnteredOTP[2]" maxlength="1"\r\n                    ng-keyup="ShiftFocus($event)" class="input-txt" />\r\n                <input ng-disabled="VerifiedQuestionOTPMap[qObject.ID]" type="number" id="4" tabindex="8" ng-model="EnteredOTP[3]" maxlength="1"\r\n                    ng-keyup="ShiftFocus($event)" class="input-txt" />\r\n                <input ng-disabled="VerifiedQuestionOTPMap[qObject.ID]" type="number" id="5" tabindex="9" ng-model="EnteredOTP[4]" maxlength="1"\r\n                    ng-keyup="ShiftFocus($event)" class="input-txt" />\r\n                <input ng-disabled="VerifiedQuestionOTPMap[qObject.ID]" type="number" id="6" tabindex="10" ng-model="EnteredOTP[5]" maxlength="1"\r\n                    class="input-txt" />\r\n            </li>\r\n            <li class="btnOTP" ng-click="VerifyOTP()" ng-class="{\'disabled\':VerifiedQuestionOTPMap[qObject.ID]}">Verify OTP</li>\r\n        </ul>\r\n    </div>\r\n</div>'),e.put("rank.html",'<div>\r\n    <table ng-if="ShowAs == 6" class="table">\r\n        <tr ng-repeat="attribute in qObject.QuestionLevelSequence" ng-init="rowIndex=$index;rankVariables=RankVariables;">\r\n            <td class="font-size font-bold text-right" style="border: none!important">\r\n                <span ng-if="qObject.Attributes[attribute.ID].Media[language]"><img ng-click="ExpandImage($event)" onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{qObject.Attributes[attribute.ID].Media[language]}}" class="rank-img"/></span>\r\n                <span bind-html-compile="qObject.Attributes[attribute.ID].Text[language]" class="display-inline-block survey-option-text"></span></td>\r\n            \x3c!--<span ng-if="qObject.Attributes[attribute.ID].Text[language] == undefined" bind-html-compile="qObject.Attributes[attribute.ID].Text[DefaultLanguage]"></span></td>--\x3e\r\n\r\n            <td class="rank-number-cell text-left">\r\n\r\n                <survey-variable variable="NumericVariables[0][$index]">\r\n                    <input name min="1" class="input-txt rank-border darkBdr" type="number" ng-model="answerInput"\r\n                        ng-change="SaveRankAnswer(answerInput, $parent.rankVariables, variable)"\r\n                    />\r\n                </survey-variable>\r\n                <div><span style="color: red" ng-if="ErrorAttribute == attribute.ID" class="font-75"><b>*{{RankMessage}}</b></span></div>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <div ng-if="ShowAs == 7" layout="row">\r\n        <ul id="rankList1" style="list-style: none;width: 100%; float: left;" class="marginZero paddingZero" ng-init="BuildLists(1)"\r\n            ng-if="AnsweredValues[0].length == 0">\r\n            <li id="draggableItem" class="padding-5 font-size pos-rel rank-text dragHere" ng-repeat="attribute in qObject.QuestionLevelSequence" style="cursor: move;border-radius:2px;">\r\n                <span ng-if="!qObject.Attributes[attribute.ID].Media[language]" bind-html-compile="qObject.Attributes[attribute.ID].Text[language]" class="font-size-75"></span>\r\n                <span ng-if="qObject.Attributes[attribute.ID].Media[language]"><img ng-src="{{qObject.Attributes[attribute.ID].Media[language]}}"  class="rank-img"/><img ng-click="ExpandImage($event)" src="assets/images/zoom-In.png" class="clickable" style="position:absolute;top:2px;left:2px;" /></span>\r\n                <span class=\'rank-position font-size-75\'>{{$index + 1}}</span>\r\n            </li>\r\n        </ul>\r\n        <div id="rankList1" style="min-height: 200px;" ng-if="AnsweredValues[0].length > 0" ng-init="BuildLists(1)" class="pos-rel"></div>\r\n    </div>\r\n\r\n\r\n    <div id="ExpandedImageDiv" class="expand-image">\r\n        <span style="float: right; margin-right: 5px;" ng-click="RemoveExpandedImage()" class="clickable marginRight pull-right"><img src="assets/images/close.png" /></span>\r\n        <img src="{{ExpandedImageSource}}" class="rank-img-expand" />\r\n    </div>\r\n\r\n</div>'),e.put("RankQuestion.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                <div><img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}"/>\r\n                <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div>\r\n        <div ng-if="qObject.Text[language] != undefined"  bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined" bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n        <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}"/>\r\n        <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n        </audio>\r\n        <video controls video-on-load  ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n        </video>\r\n</div>\r\n    </div>\r\n    <div><span style="color: red" ng-if="ShowMandatoryStar && !AnswerInvalid" class="font-75"><b>*This field is mandatory</b></span></div>\r\n    <div><span style="color: red" ng-if="ShowMandatoryStar && AnswerInvalid && RankMessage != \'Incorrect value entered\'" class="font-75"><b>*{{RankMessage}}</b></span></div>\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n\r\n        \x3c!--Rank--\x3e\r\n        <survey-rank></survey-rank>\r\n\r\n    </div>\r\n</div>'),
e.put("rankSort.html",'<div>\r\n    <div layout="row">\r\n        <ul id="rankList" style="list-style: none;width: 45%; float: left" class="marginZero paddingZero" ng-init="BuildLists(0)"\r\n            ng-if="ShowList">\r\n            <li id="draggableItem" class="padding-5 font-size-75 border-all darkBdr dragHere full-width" ng-repeat="attribute in qObject.QuestionLevelSequence" style=" cursor: move; margin-top: 5px;border-radius:2px;"\r\n                bind-html-compile="qObject.Attributes[attribute.ID].Text[language]">\r\n                <span ng-if="qObject.Attributes[attribute.ID].Media[language]">\r\n                <img onError="this.onerror=null;this.src=\'./Project/app/Components/SE/assets/images/default.jpg\';" ng-src="{{qObject.Attributes[attribute.ID].Media[language]}}?dt={{ticks}}" style="max-height:100px;max-width:100px;"/></span>\r\n                \x3c!-- <i id="draggableIcon" class="fa fa-ellipsis-v" style="float:right; font-size: 17px; line-height: 12px;"></i> --\x3e\r\n            </li>\r\n        </ul>\r\n        <div class="padding-5" style="width: 50%; float: right">\r\n            <span ng-if="NumberOfLists >= 1" class="padding-5 display-inline-block font-size-75 font-bold dragHere" bind-html-compile="GroupNames[0]"></span>\r\n            <div style="min-height: 200px;" id="rankList1" ng-init="BuildLists(1)" class="border-radius pos-rel border-all darkBdr">\r\n                <span ng-if="ShowList" class="font-size-75 pos-abs display-inline-block dragHere" style="top:40%;left:40%;">Drag Here</span></div>\r\n\r\n            <span ng-if="NumberOfLists >= 2" class="padding-5 display-inline-block font-size-75 font-bold dragHere" bind-html-compile="GroupNames[1]"></span>\r\n            <div ng-if="NumberOfLists >= 2" class="pos-rel border-all border-radius darkBdr" style="min-height: 200px;" id="rankList2" ng-init="BuildLists(2)">\r\n                <span ng-if="ShowList" class="font-size-75 pos-abs display-inline-block dragHere" style="top:40%;left:40%;">Drag Here</span></div>\r\n\r\n            <span ng-if="NumberOfLists >= 3" class="padding-5 display-inline-block font-size-75 font-bold dragHere" bind-html-compile="GroupNames[2]"></span>\r\n            <div ng-if="NumberOfLists >= 3" class="pos-rel border-all border-radius darkBdr" style="min-height: 200px;"  id="rankList3" ng-init="BuildLists(3)">\r\n                <span ng-if="ShowList" class="font-size-75 pos-abs display-inline-block dragHere" style="top:40%;left:40%;">Drag Here</span></div>\r\n\r\n            <span ng-if="NumberOfLists >= 4" class="padding-5 display-inline-block font-size-75 font-bold dragHere" bind-html-compile="GroupNames[3]"></span>\r\n            <div ng-if="NumberOfLists >= 4" class="pos-rel border-all border-radius darkBdr" style="min-height: 200px;" id="rankList4" ng-init="BuildLists(4)">\r\n                <span ng-if="ShowList" class="font-size-75 pos-abs display-inline-block dragHere" style="top:40%;left:40%;">Drag Here</span></div>\r\n\r\n            <span ng-if="NumberOfLists >= 5" class="padding-5 display-inline-block font-size-75 font-bold dragHere" bind-html-compile="GroupNames[4]"></span>\r\n            <div ng-if="NumberOfLists >= 5" class="pos-rel border-all border-radius darkBdr" style="min-height: 200px;" id="rankList5" ng-init="BuildLists(5)">\r\n                <span ng-if="ShowList" class="font-size-75 pos-abs display-inline-block dragHere" style="top:40%;left:40%;">Drag Here</span></div>\r\n        </div>\r\n        <div style="clear: both;"></div>\r\n\r\n    </div>\r\n</div>'),e.put("RatingQuestion.html",'<div class="hide-default card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                <div><img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}"/>\r\n                <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                </audio>\r\n                <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                        <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                </video>\r\n            </div>\r\n        <div ng-if="qObject.Text[language] != undefined"  bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined"  bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n        <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}"/>\r\n        <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n        </audio>\r\n        <video controls video-on-load  ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n        </video>\r\n</div>\r\n    </div>\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n        <div>\r\n            <span style="color: red" ng-if="ShowMandatoryStar" class="font-75">* This field is mandatory</span>\r\n        </div>\r\n        \x3c!-- LikeDislike --\x3e\r\n        <survey-variable ng-repeat="item in qObject.QuestionLevelSequence" variable="qObject.Variables[item.ID]" ng-if="qObject.QuestionType == 22">\r\n            <div class="sg-container">\r\n                <div class="likeDislike">\r\n                    <div class="pos-rel" style="float:left;width:50%;text-align:right;padding-right:20px;">\r\n                        <input id="like" type="radio" name="like-dislike-rating" value="{{likeOptionCode}}" ng-model="SelectedValues.single" ng-click="SaveAnswer(SelectedValues.single)" ng-change="SaveAnswer(SelectedValues.single)"\r\n                        />\r\n                        <label id="1" for="like" class="focusable like-class">1</label>\r\n                    </div>\r\n                    <div class="pos-rel" style="float:left;width:48%;text-align:left">\r\n                        <input id="dislike" type="radio" name="like-dislike-rating" value="{{dislikeOptionCode}}" ng-model="SelectedValues.single" ng-change="SaveAnswer(SelectedValues.single)"\r\n                            ng-click="SaveAnswer(SelectedValues.single)" />\r\n                        <label id="2" for="dislike" class="focusable dislike-class">2</label>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </survey-variable>\r\n        \x3c!-- Stars --\x3e\r\n        <survey-variable ng-repeat="item in qObject.QuestionLevelSequence" variable="qObject.Variables[item.ID]" properties="qObject.Properties" ng-if="qObject.QuestionType == 18"\r\n            class="pos-rel display-inline-block"  ng-class="{\'large\':qObject.Properties.ShapeSize == \'large\',\'smallRating\':qObject.Variables[qObject.QuestionLevelSequence[0].ID].VariableLevelSequence.length == \'5\' && qObject.Properties.ShapeSize == \'small\',\'mediumRating\':qObject.Properties.ShapeSize == \'medium\' && qObject.Variables[qObject.QuestionLevelSequence[0].ID].VariableLevelSequence.length==\'5\'}">\r\n            <div class="display-inline-block">\r\n                <ul class="marginZero paddingZero display-inline-block" style="table-layout:fixed">\r\n                    <li ng-repeat="sequence in variable.VariableLevelSequence" class="ratingShape shape-large" style="display:table-cell" ng-class="{\'smiley-big\' :variable.VariableLevelSequence.length >= 8, \'smiley-small\': variable.VariableLevelSequence.length < 8,\'shape-small\':properties.ShapeSize == \'small\',\'shape-medium\':properties.ShapeSize == \'medium\'}">\r\n                       \r\n                            <span>\r\n                                    <survey-stars ng-click="SaveAnswer(variable.Options[sequence.ID].Code)" class="focusable pos-rel" ng-mouseenter="setHoverID(sequence.ID)"\r\n                                        ng-mouseleave="removeHoverID()" ng-if="!variable.Options[sequence.ID].IsExclusive" exclusive-id="{{RatingQuestionConfig.ExclusiveID}}"\r\n                                        option-id="{{sequence.ID}}" id="{{sequence.ID}}" style="background-color: transparent!important;margin-right:5px;"></survey-stars>\r\n                                </span>\r\n                    </li>\r\n                </ul>\r\n                 \x3c!-- for showing labels --\x3e\r\n            <div ng-if="RatingQuestionConfig.ShowLabels == \'true\'" class="padding-5 rating-label">\r\n                <span class="text-left display-inline-block" style="width:31%">\r\n                    {{RatingQuestionConfig.LeftLabel}}\r\n                </span>\r\n                <span class="text-center display-inline-block" style="width:33%;display:inline-block!important">\r\n                    {{RatingQuestionConfig.MidLabel}}\r\n                </span>\r\n                <span class="text-right display-inline-block" style="width:31%">\r\n                    {{RatingQuestionConfig.RightLabel}}\r\n                </span>\r\n            </div>\r\n           <div class="clearfix"></div>\r\n            \r\n           \r\n            \x3c!-- for showing no answer option --\x3e\r\n            <div ng-if="RatingQuestionConfig.ExclusiveID" class="noAnswer">\r\n                <survey-option option-id="{{RatingQuestionConfig.ExclusiveID}}"></survey-option>\r\n            </div>\r\n        </div>\r\n        </survey-variable>\r\n        \x3c!-- Smiley --\x3e\r\n        \x3c!-- <survey-variable ng-repeat="(qKey, value) in qObject.Variables" variable="value" ng-if="qObject.QuestionType == 17">\r\n            <div layout="row" class="smiley overflow-auto" style="display:flex">\r\n                <img class="focusable" ng-class="{\'box-shadow\' : IsSelected[$index]}" ng-click=\'SaveAnswer(variable.Options[sequence.ID].Code);ShowSelectedSmiley(variable.Options[sequence.ID].Code)\'\r\n                    ng-repeat="sequence in variable.VariableLevelSequence" src="{{variable.Options[sequence.ID].Media[\'en-us\']}}"\r\n                    id="{{variable.Options[sequence.ID].Code}}" style="width:40px;height:40px;margin-right:10px" />\r\n            </div>\r\n        </survey-variable> --\x3e\r\n    </div>\r\n\r\n\r\n</div>'),e.put("singleChoice.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n   \r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n      \r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                <div ng-if="qObject.Properties.MediaPath && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition)">\r\n                    <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaType == \'1\'" ng-src="{{qObject.Properties.MediaPath}}"/>\r\n                    <audio controls class="maxSize" ng-if="qObject.Properties.MediaType == \'2\'" ng-src="{{qObject.Properties.MediaPath}}">\r\n                            <source ng-src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                    </audio>\r\n                    <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaType == \'3\'">\r\n                            <source ng-src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                    </video>\r\n                </div>\r\n                <div ng-if="qObject.Text[language] != undefined" bind-html-compile="qObject.Text[language]"></div>\r\n                <div ng-if="qObject.Text[language] == undefined" bind-html-compile="qObject.Text[DefaultLanguage]"></div>       \r\n                <div ng-if="qObject.Properties.MediaPath  && qObject.Properties.MediaPosition == \'down\'">\r\n                    <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaType == \'1\'" ng-src="{{qObject.Properties.MediaPath}}"/>\r\n                    <audio controls class="maxSize" ng-if="qObject.Properties.MediaType == \'2\'" ng-src="{{qObject.Properties.MediaPath}}">\r\n                        <source ng-src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                    </audio>\r\n                    <video controls video-on-load  ng-if="qObject.Properties.MediaType == \'3\'">\r\n                        <source ng-src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                    </video>\r\n                </div>\r\n        </div>\r\n      \r\n        \r\n    </div>\r\n   \r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n        <survey-variable variable="qObject.Variables[qObject.QuestionLevelSequence[0].ID]">\r\n                <i id="blinkingHint" ng-if="HideHint != \'true\' && variable.VariableType == 2 && displayType !=\'longlist\'" class="survey-option-text font-bold">{{(Hints["SelectionHint"][Language]) || (Hints["SelectionHint"][DefaultLanguage])}}</i>\r\n                <survey-options></survey-options>\r\n        </survey-variable>\r\n    </div>\r\n</div>'),e.put("singleChoiceGamify.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div ng-if="qObject.Text[language] != undefined" class="sq-text table-cell" bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined" class="sq-text table-cell" bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n    </div>\r\n    <div>\r\n        <span style="color: red" ng-if="ShowMandatoryStar" class="font-75">\r\n            <b>* This field is mandatory</b>\r\n        </span>\r\n    </div>\r\n    <div>\r\n        <span style="color: red" ng-if="ShowMinStar" class="font-75">\r\n            <b>* You need to fill at least {{qObject.Properties.MinChoices}} choices</b>\r\n        </span>\r\n    </div>\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n        <survey-variable variable="qObject.Variables[qObject.QuestionLevelSequence[0].ID]">\r\n            <single-choice-gamify variable="variable">\r\n\r\n            </single-choice-gamify>\r\n        </survey-variable>\r\n    </div>\r\n</div>'),e.put("singleSelectBox.html",'<div class="sg-container">\r\n      <select size="15"  ng-model="SelectedValue" ng-change="SaveAnswer(SelectedValue)" class="dropdown darkBdr">\r\n            <optgroup ng-repeat="group in variable.OptionGroupSequence" label="{{variable.OptionGroups[group].Text[Language]}}">\r\n                 <option ng-repeat="optionID in variable.OptionGroups[group].OptionSequence" value="{{variable.OptionGroups[group].Options[optionID].Code}}">{{variable.OptionGroups[group].Options[optionID].Text[Language]}}</option>\r\n            </optgroup>\r\n      </select>\r\n</div>\r\n       '),e.put("surveyOptions.html",'<div>\r\n    <div ng-switch="displayType" style="display: table; width: 100%" class="active">\r\n\r\n        <div ng-switch-when="dropdown" class="input-wrapper pos-rel">\r\n            <a ng-click="ShowDropDown()" class="triangle"><span></span></a>\r\n            <input type="text" ng-model="filter.input" placeholder="{{Placeholders[\'Dropdown\'][Language] || Placeholders[\'Dropdown\'][DefaultLanguage]}}"\r\n                ng-click="ShowDropDown()" ng-change="filterOptions(filter.input)" />\r\n            <ul class="dropOption" ng-if="InputClicked">\r\n                <li ng-repeat="item in OptionsList">\r\n                    \x3c!--option group--\x3e\r\n                    <div ng-if="!item.IsOption" class="group-container">\r\n                        <div class="sg-name" ng-if="variable.OptionGroups[item.ID].ShowHeader">{{variable.OptionGroups[item.ID].Text[Language]}}</div>\r\n\r\n                        <div ng-repeat="optionCode in variable.OptionGroups[item.ID].OptionSequence" class="option-indent">\r\n                            <survey-option option-id="{{optionCode}}"></survey-option>\r\n                        </div>\r\n                    </div>\r\n                    <div ng-if="item.IsOption">\r\n                        <survey-option option-id="{{item.ID}}"></survey-option>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div ng-switch-when="longlist" class="input-wrapper pos-rel">\r\n\r\n            <input style="width: 90%;float: left;" type="text" ng-model="filter.input" placeholder="{{Placeholders[\'Dropdown\'][Language] || Placeholders[\'Dropdown\'][DefaultLanguage]}}" />\r\n            <span ng-click="filterOptions(filter.input)">\r\n                    \x3c!-- <i class="fas fa-search"></i> --\x3e\r\n                    <img style="width: 30px; height: 30px;" src="assets/images/search.png">\r\n                </span>\r\n            <ul class="dropOption">\r\n                <li ng-repeat="item in OptionsList">\r\n                    \x3c!--option group--\x3e\r\n                    <div ng-if="!item.IsOption" class="group-container">\r\n                        <div class="sg-name" ng-if="variable.OptionGroups[item.ID].ShowHeader">{{variable.OptionGroups[item.ID].Text[Language]}}</div>\r\n\r\n                        <div ng-repeat="optionCode in variable.OptionGroups[item.ID].OptionSequence" class="option-indent">\r\n                            <survey-option option-id="{{optionCode}}"></survey-option>\r\n                        </div>\r\n                    </div>\r\n                    <div ng-if="item.IsOption">\r\n                        <survey-option option-id="{{item.ID}}"></survey-option>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            <div class="option-paging-container">\r\n                <ul ng-if="OptionInfo.showPagination">\r\n                    <li>\r\n                        <a href="" class="opt-page-prev" ng-click="onPrevClick()">Previous</a>\r\n                    </li>\r\n                    <li ng-repeat="page in OptionInfo.pageSequence track by $index">\r\n                        <a href="" ng-class="{\'active\': OptionInfo.currentPage == page}" ng-click="onPageClick(page, $index)">{{page}}</a>\r\n                    </li>\r\n                    <li>\r\n                        <a href="" class="opt-page-next" ng-click="onNextClick()">Next</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <rc-select ng-switch-when="selectbox"></rc-select>\r\n\r\n        <rc-select ng-switch-when="multiselectbox"></rc-select>\r\n\r\n        <ul ng-switch-default ng-class="{\'imgOption marginZero\':(variable.Properties.ShowAs == 14 || variable.Properties.ShowAs == 15)}">\r\n            <li class="{{\'opt-\' + variable.Name + \'-\' + item.ID}}" style="margin-right:2px;" ng-repeat="item in variable.VariableLevelSequence"\r\n                ng-class="{\'wrapped-group\':!item.IsOption,\'survey-option-text\' : variable.Properties.Orientation == \'Horizontal\', \'wrapped\': (variable.Properties.Orientation == \'InRows\' || variable.Properties.Orientation == \'InColumns\')}">\r\n\r\n                \x3c!--option group--\x3e\r\n                <div ng-if="!item.IsOption" class="group-container">\r\n                    <div class="sg-name" ng-if="variable.OptionGroups[item.ID].ShowHeader">{{variable.OptionGroups[item.ID].Text[Language]}}</div>\r\n\r\n                    <div ng-repeat="optionCode in variable.OptionGroups[item.ID].OptionSequence" class="option-indent">\r\n                        <survey-option option-id="{{optionCode}}"></survey-option>\r\n                    </div>\r\n                </div>\r\n\r\n                \x3c!--option--\x3e\r\n                <div ng-if="item.IsOption">\r\n                    <survey-option option-id="{{item.ID}}"></survey-option>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n        <div style="clear:both"></div>\r\n    </div>\r\n</div>'),
e.put("surveyRatingTemplate.html",'\x3c!-- Star Shape --\x3e\r\n<svg ng-model="SelectedValues.single"\r\n     ng-if="(RatingQuestionConfig.ShapeType == \'1\' || !RatingQuestionConfig.ShapeType )&&(!RatingQuestionConfig.StarBeforeSelection || RatingQuestionConfig.StarBeforeSelection ==\'none\' || RatingQuestionConfig.StarAfterSelection == \'none\')"\r\n     role="img" class="stkv-c-hoverable-icon stkv-us-secondary--fill rating-option-theme" viewBox="0 0 32 32"\r\n     ng-class="{\'svg-focus\':OptionId <= hover.hoverID && hover.hoverID != ExclusiveId,\'svg-filled blink\': OptionId <= SelectedValues.single && SelectedValues.single != null && SelectedValues.single != ExclusiveId}">\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--outline">\r\n        <path d="M0 11.625h12.219q.469-1.469 1.422-4.375T16 0q.469 1.438 1.422 4.344t2.359 7.281H32q-1.219.875-3.688 2.672t-6.188 4.516q.469 1.438 1.406 4.359t2.344 7.266q-1.219-.906-3.688-2.703t-6.188-4.484q-1.219.906-3.688 2.703t-6.188 4.484Q6.591 29 7.528 26.079t2.344-7.266q-1.219-.906-3.688-2.703t-6.188-4.484zm3.938 1.25q.938.688 2.813 2.047t4.656 3.422q-.344 1.063-1.063 3.25t-1.813 5.469q.938-.656 2.813-2.016T16 21.656q.938.656 2.813 2.016t4.656 3.391q-.344-1.094-1.063-3.281t-1.813-5.438l2.813-2.063 4.656-3.406h-9.219q-.344-1.094-1.063-3.281t-1.781-5.469q-.344 1.094-1.063 3.281t-1.781 5.469H3.936z"></path>\r\n    </svg>\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--hover stkv-us-secondary-color--fill20-hover stkv-us-secondary-color--fill-checked">\r\n        <path d="M0 11.625h12.219q.469-1.469 1.422-4.375T16 0q.469 1.438 1.422 4.344t2.359 7.281H32q-1.219.875-3.688 2.672t-6.188 4.516q.469 1.438 1.406 4.359t2.344 7.266q-1.219-.906-3.688-2.703t-6.188-4.484q-1.219.906-3.688 2.703t-6.188 4.484Q6.591 29 7.528 26.079t2.344-7.266q-1.219-.906-3.688-2.703t-6.188-4.484z"></path>\r\n    </svg>\r\n</svg>\r\n\x3c!-- Heart Shape --\x3e\r\n<svg role="img" class="stkv-c-hoverable-icon stkv-us-secondary--fill rating-option-theme" viewBox="0 0 32 32"\r\n     ng-model="SelectedValues.single" ng-if="RatingQuestionConfig.ShapeType == \'2\'"\r\n     ng-class="{\'svg-focus\':OptionId <= hover.hoverID && hover.hoverID != ExclusiveId,\'svg-filled blink\': OptionId <= SelectedValues.single && SelectedValues.single != null &&  SelectedValues.single != ExclusiveId}">\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--outline">\r\n        <path d="M0 8.313q0-.125.016-.234t.016-.203V7.47q.156-1.594.844-2.922t1.875-2.391Q3.939 1.063 5.329.532T8.313.001q1.281 0 2.453.344t2.203 1.063q1.031.688 1.797 1.609T16 5.095q.5-1.156 1.25-2.078t1.781-1.609Q20.094.689 21.25.345t2.438-.344q1.594 0 2.984.531t2.578 1.625q1.219 1.063 1.891 2.391t.828 2.922q.031.094.031.203v.641q0 1.031-.172 2.047t-.516 1.984-.797 1.844-1.047 1.688q-.594.781-1.25 1.547t-1.375 1.516q-.719.719-1.469 1.438t-1.563 1.406-1.578 1.359-1.484 1.328q-.719.625-1.406 1.297t-1.313 1.391q-.344.375-.641.734t-.547.703-.453.688-.391.656q-.344-.656-.844-1.359t-1.156-1.422q-.625-.719-1.313-1.406t-1.438-1.313q-.719-.625-1.469-1.281t-1.563-1.344q-.813-.719-1.578-1.438t-1.484-1.438q-.719-.75-1.375-1.516t-1.25-1.547q-.563-.813-1.016-1.703t-.797-1.859q-.188-.5-.313-.984t-.219-.984T.042 9.33t-.047-1.016zm1.281 0q0 1.031.203 2.031t.578 1.969q.406.969.906 1.844t1.094 1.625q.625.75 1.344 1.516t1.531 1.578 1.625 1.531 1.594 1.375q.781.625 1.563 1.344t1.594 1.531q.844.781 1.516 1.531t1.172 1.438q.531-.688 1.203-1.438t1.484-1.531q.813-.813 1.609-1.531t1.578-1.344q.781-.656 1.578-1.375t1.609-1.531q.844-.813 1.563-1.578t1.313-1.516q.625-.75 1.125-1.625t.875-1.844q.406-.969.594-1.969t.188-2.031v-.547l-.031-.141q-.125-1.375-.703-2.5t-1.578-2.031-2.172-1.359-2.547-.453q-1.094 0-2.078.297t-1.859.891-1.516 1.375-1.047 1.75q-.188.469-.484 1.172t-.703 1.641q-.125-.344-.422-1.047t-.766-1.766q-.375-.969-1.016-1.75T12.251 2.47q-.875-.594-1.859-.891t-2.078-.297q-1.344 0-2.531.453T3.595 3.094 2.032 5.125t-.719 2.5v.141l-.031.172v.375z"></path>\r\n    </svg>\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--hover stkv-us-secondary-color--fill20-hover stkv-us-secondary-color--fill-checked">\r\n        <path d="M0 8.313q0-.125.016-.234t.016-.203V7.47q.156-1.594.844-2.922t1.875-2.391Q3.939 1.063 5.329.532T8.313.001q1.281 0 2.453.344t2.203 1.063q1.031.688 1.797 1.609T16 5.095q.5-1.156 1.25-2.078t1.781-1.609Q20.094.689 21.25.345t2.438-.344q1.594 0 2.984.531t2.578 1.625q1.219 1.063 1.891 2.391t.828 2.922q.031.094.031.203v.641q0 1.031-.172 2.047t-.516 1.984-.797 1.844-1.047 1.688q-.594.781-1.25 1.547t-1.375 1.516q-.719.719-1.469 1.438t-1.563 1.406-1.578 1.359-1.484 1.328q-.719.625-1.406 1.297t-1.313 1.391q-.344.375-.641.734t-.547.703-.453.688-.391.656q-.344-.656-.844-1.359t-1.156-1.422q-.625-.719-1.313-1.406t-1.438-1.313q-.719-.625-1.469-1.281t-1.563-1.344q-.813-.719-1.578-1.438t-1.484-1.438q-.719-.75-1.375-1.516t-1.25-1.547q-.563-.813-1.016-1.703t-.797-1.859q-.188-.5-.313-.984t-.219-.984T.042 9.33t-.047-1.016z"></path>\r\n    </svg>\r\n</svg>\r\n\x3c!-- Droplets Shape --\x3e\r\n<svg role="img" class="stkv-c-hoverable-icon stkv-us-secondary--fill rating-option-theme" viewBox="0 0 32 32"\r\n     ng-model="SelectedValues.single" ng-if="RatingQuestionConfig.ShapeType == \'3\'"\r\n     ng-class="{\'svg-focus\':OptionId <= hover.hoverID && hover.hoverID != ExclusiveId,\'svg-filled blink\': OptionId <= SelectedValues.single && SelectedValues.single != null &&  SelectedValues.single != ExclusiveId}">\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--outline">\r\n        <path d="M.625 21.625q0-1.25.313-2.453t.875-2.266l8.594-12.719 8.594 12.719q.563 1.063.875 2.266t.313 2.453q0 4.094-2.875 7t-6.906 2.906-6.906-2.906-2.875-7zm1.094 0q0 .906.172 1.766t.516 1.672q.313.781.781 1.484t1.094 1.328q.594.594 1.281 1.063t1.469.813 1.641.516 1.734.172 1.719-.172 1.656-.516q.75-.344 1.453-.813t1.297-1.063q.594-.625 1.063-1.328t.813-1.484q.344-.813.516-1.672t.172-1.766q0-.563-.078-1.109t-.203-1.078q-.125-.5-.313-1t-.438-.969L10.408 6.156 2.752 17.5q-.25.438-.438.938t-.313 1q-.156.531-.219 1.078t-.063 1.109zm14.844-11q.063-.156.156-.328t.156-.328l6.063-8.875 6.031 8.875q.375.719.594 1.547t.219 1.703q0 2.844-2.016 4.875t-4.828 2.031q-.344 0-.688-.031T21.594 20q-.156-1-.484-1.953t-.797-1.828zm1.25-.094l3.406 5.094.031.031.031.063q.438.781.734 1.609T22.499 19q.125.031.219.031h.219q1.125 0 2.188-.438T27 17.343q.813-.844 1.25-1.906t.438-2.219q0-.688-.172-1.391t-.484-1.297l-5.094-7.5z"></path>\r\n    </svg>\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--hover stkv-us-secondary-color--fill20-hover stkv-us-secondary-color--fill-checked is-hovered">\r\n        <path d="M.625 21.625q0-1.25.313-2.453t.875-2.266l8.594-12.719 8.594 12.719q.563 1.063.875 2.266t.313 2.453q0 4.094-2.875 7t-6.906 2.906-6.906-2.906-2.875-7zm15.938-11q.063-.156.156-.328t.156-.328l6.063-8.875 6.031 8.875q.375.719.594 1.547t.219 1.703q0 2.844-2.016 4.875t-4.828 2.031q-.344 0-.688-.031T21.594 20q-.156-1-.484-1.953t-.797-1.828z"></path>\r\n    </svg>\r\n</svg>\r\n\x3c!-- Crowns Shape --\x3e\r\n<svg role="img" class="stkv-c-hoverable-icon stkv-us-secondary--fill rating-option-theme" viewBox="0 0 32 32"\r\n     ng-model="SelectedValues.single" ng-if="RatingQuestionConfig.ShapeType == \'5\'"\r\n     ng-class="{\'svg-focus\':OptionId <= hover.hoverID && hover.hoverID != ExclusiveId,\'svg-filled blink\': OptionId <= SelectedValues.single && SelectedValues.single != null &&  SelectedValues.single != ExclusiveId}">\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--outline">\r\n        <path d="M0 7.688q0-.656.234-1.234t.703-1.047 1.031-.703 1.219-.234 1.234.234 1.047.703.703 1.047.234 1.234q0 .281-.047.547t-.141.516-.234.5-.359.469q.563.625 1.406 1.547t1.938 2.172q.219-.906.625-2.688t1-4.469q-.5-.188-.906-.484t-.719-.703q-.313-.438-.484-.906t-.172-1q0-.656.234-1.219T9.249.939q.5-.469 1.063-.703t1.219-.234 1.219.234 1.031.703.703 1.031.234 1.219q0 .406-.094.797t-.313.766q-.219.344-.484.641t-.609.516q.469 1.188 1.172 3t1.609 4.219q.344-.906 1.047-2.719t1.734-4.5q-.313-.219-.594-.516t-.5-.641q-.188-.375-.297-.766t-.109-.797q0-.656.234-1.219t.703-1.031 1.031-.703 1.219-.234 1.234.234 1.047.703.703 1.031.234 1.219q0 .531-.156 1t-.5.906q-.313.406-.719.703t-.906.484q.281 1.188.688 2.969t.938 4.188q.438-.469 1.266-1.406t2.078-2.313q-.188-.219-.344-.469t-.25-.5-.141-.516-.047-.547q0-.656.234-1.234t.703-1.047q.5-.469 1.063-.703t1.219-.234 1.219.234 1.031.703.703 1.047.234 1.234q0 .625-.219 1.172t-.688 1.016q-.438.469-.969.719t-1.188.281q-.594 1.688-1.516 4.25t-2.141 6H6.714q-.438-1.281-1.359-3.844t-2.297-6.406q-.625-.031-1.172-.281t-.984-.719T.23 8.86t-.234-1.172zm1.281 0q0 .375.141.703T1.813 9q.281.281.594.422t.688.172h.375l.5.031.016.016q.016.016.016.047.094-.094.266-.297t.422-.484q.125-.156.203-.297t.109-.266q.063-.156.094-.328t.031-.328q0-.406-.141-.75t-.422-.625-.625-.422-.75-.141q-.375 0-.719.141t-.625.422-.422.625-.141.75zM3.969 9.75q.031 0 .047.031l.047.094q0-.031-.016-.078T4 9.688v.016q0 .016-.031.047zm.094.125q.438 1.25 1.328 3.734t2.234 6.234h16.75q.469-1.25 1.359-3.75t2.203-6.219q-.688.781-2.094 2.344t-3.5 3.906l-.844-3.75-1.438-6.25q-.5 1.313-1.516 3.953t-2.547 6.578q-.5-1.313-1.516-3.953t-2.547-6.578l-.844 3.75-1.438 6.25q-.688-.781-2.094-2.344t-3.5-3.906zM6.719 27.5v-4.469h18.563V27.5H6.719zM8 26.219h16v-1.906H8v1.906zM9.594 3.188q0 .313.094.609t.281.547q.219.25.453.422t.516.266q.125.031.328.094t.516.156l.281-.188.469-.281q.25-.156.422-.328t.266-.359q.125-.219.172-.453t.047-.484q0-.406-.141-.734t-.422-.609-.609-.422-.734-.141-.75.141-.625.422-.422.609-.141.734zm2.062 2.187q.031.094.109.281t.172.469q.031-.094.063-.281t.094-.469q-.031-.031-.109-.047t-.203-.047l-.031.031-.094.063zm6.907-2.187q0 .25.063.484t.156.453q.125.188.297.359t.391.328q.094.063.281.172t.469.297q.125-.031.328-.094t.516-.156q.281-.094.531-.266t.438-.422.281-.547.094-.609q0-.406-.141-.734t-.422-.609-.625-.422-.75-.141q-.375 0-.719.141t-.625.422-.422.609-.141.734zm1.343 2.187q.031.094.063.281t.094.469q.031-.094.109-.281t.172-.469q0-.031-.031-.047l-.094-.047q-.031 0-.109.031t-.203.063zm6.969 2.313q0 .156.031.328t.094.328q.063.125.141.266t.172.297q.125.125.297.328t.391.453l.016-.016q.016-.016.016-.047.125 0 .344-.016t.531-.016q.375-.031.703-.172t.578-.422q.281-.281.406-.609t.125-.703q0-.406-.141-.75t-.422-.625-.609-.422-.734-.141-.75.141-.625.422-.422.625-.141.75zm1.063 2.187q.031-.031.047-.063t.047-.063v-.016q0-.016-.031-.047 0 .031-.016.078t-.047.109z"></path>\r\n    </svg>\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--hover stkv-us-secondary-color--fill20-hover stkv-us-secondary-color--fill-checked">\r\n        <path d="M0 7.688q0-.656.234-1.234t.703-1.047 1.031-.703 1.219-.234 1.234.234 1.047.703.703 1.047.234 1.234q0 .281-.047.547t-.141.516-.234.5-.359.469q.563.625 1.406 1.547t1.938 2.172q.219-.906.625-2.688t1-4.469q-.5-.188-.906-.484t-.719-.703q-.313-.438-.484-.906t-.172-1q0-.656.234-1.219T9.249.939q.5-.469 1.063-.703t1.219-.234 1.219.234 1.031.703.703 1.031.234 1.219q0 .406-.094.797t-.313.766q-.219.344-.484.641t-.609.516q.469 1.188 1.172 3t1.609 4.219q.344-.906 1.047-2.719t1.734-4.5q-.313-.219-.594-.516t-.5-.641q-.188-.375-.297-.766t-.109-.797q0-.656.234-1.219t.703-1.031 1.031-.703 1.219-.234 1.234.234 1.047.703.703 1.031.234 1.219q0 .531-.156 1t-.5.906q-.313.406-.719.703t-.906.484q.281 1.188.688 2.969t.938 4.188q.438-.469 1.266-1.406t2.078-2.313q-.188-.219-.344-.469t-.25-.5-.141-.516-.047-.547q0-.656.234-1.234t.703-1.047q.5-.469 1.063-.703t1.219-.234 1.219.234 1.031.703.703 1.047.234 1.234q0 .625-.219 1.172t-.688 1.016q-.438.469-.969.719t-1.188.281q-.594 1.688-1.516 4.25t-2.141 6H6.714q-.438-1.281-1.359-3.844t-2.297-6.406q-.625-.031-1.172-.281t-.984-.719T.23 8.86t-.234-1.172zM6.719 27.5v-4.469h18.563V27.5H6.719z"></path>\r\n    </svg>\r\n</svg>\r\n\x3c!-- Clouds Shape --\x3e\r\n<svg role="img" class="stkv-c-hoverable-icon stkv-us-secondary--fill rating-option-theme" viewBox="0 0 32 32"\r\n     ng-model="SelectedValues.single" ng-if="RatingQuestionConfig.ShapeType == \'6\'"\r\n     ng-class="{\'svg-focus\':OptionId <= hover.hoverID && hover.hoverID != ExclusiveId,\'svg-filled blink\': OptionId <= SelectedValues.single && SelectedValues.single != null &&  SelectedValues.single != ExclusiveId}">\r\n    <svg width="32" height="32" viewBox="0 0 64 64"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--outline">\r\n        <path d="M32 61.5c16.292 0 29.5-13.208 29.5-29.5S48.292 2.5 32 2.5 2.5 15.708 2.5 32 15.708 61.5 32 61.5zm0 2.5C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32z"></path>\r\n    </svg>\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--hover stkv-us-secondary-color--fill20-hover stkv-us-secondary-color--fill-checked">\r\n        <path d="M0 16q0-6.594 4.703-11.297t11.297-4.703 11.297 4.703 4.703 11.297-4.703 11.297-11.297 4.703-11.297-4.703-4.703-11.297z"></path>\r\n    </svg>\r\n\r\n</svg>\r\n\x3c!-- Thumbs Shape --\x3e\r\n<svg role="img" class="stkv-c-hoverable-icon stkv-us-secondary--fill rating-option-theme" viewBox="0 0 32 32"\r\n     ng-model="SelectedValues.single" ng-if="RatingQuestionConfig.ShapeType == \'4\'"\r\n     ng-class="{\'svg-focus\':OptionId <= hover.hoverID && hover.hoverID != ExclusiveId,\'svg-filled blink\': OptionId <= SelectedValues.single && SelectedValues.single != null &&  SelectedValues.single != ExclusiveId}">\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--outline">\r\n        <path d="M0 30.063V17.907q0-.281.094-.5t.281-.406.422-.281.484-.094h3.844q.281 0 .5.094t.406.281.281.406.094.5v12.156q0 .281-.094.516t-.281.422-.406.266-.5.078H1.281q-.25 0-.484-.078t-.422-.266-.281-.422T0 30.063zm1.281 0h3.844V17.907H1.281v12.156zm6.407.343V17.281h.625q.219 0 .438-.078t.438-.234q.25-.188.516-.453t.578-.609q.313-.375.656-.938t.719-1.281q.375-.75.766-1.625t.797-1.906q.094-.219.219-.438t.281-.406q.188-.219.328-.375t.266-.25l.141-.141.172-.141q.125-.094.234-.172t.234-.172q.375-.313.688-.625t.531-.656q.25-.375.484-.953t.422-1.359q.094-.375.188-.828t.156-.953q.063-.531.109-1.094t.078-1.188q0-.188.156-.281T18.377 0q.063-.031.109-.031h.078q.281 0 .594.078t.688.234q.219.094.406.203t.344.266q.188.125.359.297t.297.359q.375.5.578 1.156t.266 1.5q.016.281.016.563 0 .547-.078 1.063-.125.781-.438 1.5-.031.063-.219.469t-.563 1.125q-.375.688-.625 1.297t-.406 1.109q-.063.25-.094.484t-.031.422.047.344.109.313q1.813-.094 3.25-.109h.563q1.094 0 1.938.047 1.094.031 1.797.125t1.047.25q.344.125.703.469t.734.906q.375.531.547.984t.141.828q0 .125-.125.359t-.375.578q-.25.313-.391.531t-.172.344q0 .188.125.5t.375.75q.281.438.438.75t.156.469-.172.422-.516.672q-.344.375-.516.625t-.172.406.078.453.234.734q.188.438.266.734t.078.453q0 .25-.203.594t-.609.75-.641.656-.297.344q-.031.125-.047.375t-.016.625-.016.625-.047.375q-.125.281-.406.609t-.719.703-.797.625-.672.344q-.594.188-1.563.266T21.468 32t-2.609-.031-2.328-.125l-.875-.078-1.25-.109q-.844-.156-2.516-.469t-4.203-.781zm1.281-1.062q.688.125 2.078.391t3.484.641h10.594q.219-.094.453-.281t.516-.438.453-.453.234-.359l-.016-.047-.016-.141-.016-.25-.016-.375q0-.188.016-.359t.047-.328.078-.297.109-.266q.094-.188.313-.438t.531-.594q.344-.313.531-.516t.219-.266q0-.031-.063-.188t-.188-.406q-.125-.281-.219-.703t-.188-.953v-.156q.031-.125.047-.234t.047-.234.078-.219.109-.188q.063-.125.141-.234t.172-.234.203-.25.234-.25l.156-.156q.063-.063.078-.094l.016-.031q0-.031-.047-.109t-.141-.172q-.063-.094-.109-.188t-.109-.188-.141-.234-.172-.359l-.141-.484q-.078-.265-.141-.547v-.25q.031-.063.047-.125t.016-.094q.031-.063.047-.125t.016-.125q.125-.313.25-.547t.25-.359q.125-.156.234-.25t.203-.094v-.109l-.031-.047q-.063-.25-.156-.453t-.219-.391-.297-.375-.359-.344q0-.031-.016-.047l-.016-.016q0-.031-.016-.031h-.047q-.031-.031-.047-.063t-.047-.031q0-.031-.016-.047t-.047-.016q-.125-.063-.484-.109t-.953-.078q-.563-.031-1.328-.047t-1.766-.016h-.938l-.906.031h-.859l-.859.031q-.188-.094-.469-.25t-.688-.375q-.031-.094-.063-.172t-.063-.172l-.063-.188-.063-.156q0-.094-.016-.172t-.047-.141v-.313q0-.438.094-.906t.281-.969q.188-.531.438-1.078t.563-1.109q.156-.281.266-.516t.203-.391q.094-.188.141-.297t.047-.141q.125-.281.203-.547t.141-.516q.063-.281.078-.563t.016-.594q0-.375-.031-.719t-.125-.625q-.063-.281-.188-.531t-.281-.438q-.094-.156-.234-.281t-.297-.219q-.156-.125-.328-.203t-.391-.109q-.125 1.688-.391 2.953t-.641 2.109q-.375.813-.891 1.484t-1.172 1.203q-.313.219-.547.422t-.422.391q-.156.188-.281.375t-.188.344q-.688 1.75-1.391 3.125t-1.391 2.375q-.656.969-1.328 1.563t-1.359.781v10.875zm19.594-4.313q.031-.031.031-.047v-.078l-.016.016-.016.047v.063zm.625-4.593l.063.125h.031v-.094q.031-.063.031-.109v-.047l-.031.031zm.125-.157z"></path>\r\n    </svg>\r\n    <svg width="32" height="32" viewBox="0 0 32 32"\r\n         class="stkv-c-hoverable-icon__svg stkv-c-hoverable-icon__svg--hover stkv-us-secondary-color--fill20-hover stkv-us-secondary-color--fill-checked">\r\n        <path d="M0 30.063V17.907q0-.281.094-.5t.281-.406.422-.281.484-.094h3.844q.281 0 .5.094t.406.281.281.406.094.5v12.156q0 .281-.094.516t-.281.422-.406.266-.5.078H1.281q-.25 0-.484-.078t-.422-.266-.281-.422T0 30.063zm7.688.343V17.281h.625q.219 0 .438-.078t.438-.234q.25-.188.516-.453t.578-.609q.313-.375.656-.938t.719-1.281q.375-.75.766-1.625t.797-1.906q.094-.219.219-.438t.281-.406q.188-.219.328-.375t.266-.25l.141-.141.172-.141q.125-.094.234-.172t.234-.172q.375-.313.688-.625t.531-.656q.25-.375.484-.953t.422-1.359q.094-.375.188-.828t.156-.953q.063-.531.109-1.094t.078-1.188q0-.188.156-.281T18.377 0q.063-.031.109-.031h.078q.281 0 .594.078t.688.234q.219.094.406.203t.344.266q.188.125.359.297t.297.359q.375.5.578 1.156t.266 1.5q.016.281.016.563 0 .547-.078 1.063-.125.781-.438 1.5-.031.063-.219.469t-.563 1.125q-.375.688-.625 1.297t-.406 1.109q-.063.25-.094.484t-.031.422.047.344.109.313q1.813-.094 3.25-.109h.563q1.094 0 1.938.047 1.094.031 1.797.125t1.047.25q.344.125.703.469t.734.906q.375.531.547.984t.141.828q0 .125-.125.359t-.375.578q-.25.313-.391.531t-.172.344q0 .188.125.5t.375.75q.281.438.438.75t.156.469-.172.422-.516.672q-.344.375-.516.625t-.172.406.078.453.234.734q.188.438.266.734t.078.453q0 .25-.203.594t-.609.75-.641.656-.297.344q-.031.125-.047.375t-.016.625-.016.625-.047.375q-.125.281-.406.609t-.719.703-.797.625-.672.344q-.594.188-1.563.266T21.468 32t-2.609-.031-2.328-.125l-.875-.078-1.25-.109q-.844-.156-2.516-.469t-4.203-.781z"></path>\r\n    </svg>\r\n</svg>\r\n\r\n\r\n\x3c!-- none --\x3e\r\n<div ng-if="RatingQuestionConfig.ShapeType == \'8\'" ng-model="SelectedValues.single"\r\n     ng-class="{\'none-div-background\' : OptionId == SelectedValues.single,\'none-seven\':variable.VariableLevelSequence.length >= \'1\'}"\r\n     class="none-div text-center display-inline-block">\r\n    <span class="none-label">{{OptionId}}</span>\r\n</div>\r\n\r\n\r\n\x3c!--smileys --\x3e\r\n<span ng-if="RatingQuestionConfig.ShapeType == \'7\'" class="smiley overflow-auto">\r\n                        <svg ng-click=\'SaveAnswer(OptionId);\'\r\n                             ng-class="{\'smiley-img-hover\' : IsSelected[OptionId] && SelectedValues.single != ExclusiveId, \'hover\':OptionId == hover.hoverID}"\r\n                             version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"\r\n                             xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n                             width="73.25px" height="74.5px" viewBox="0 0 73.25 74.5"\r\n                             enable-background="new 0 0 73.25 74.5" xml:space="preserve">\r\n               <circle fill="none" stroke="#969BA0" stroke-width="4" cx="36.25" cy="38.5" r="31"/>\r\n               <circle fill="#969BA0" cx="24.119" cy="29.065" r="4.043"/>\r\n               <circle fill="#969BA0" cx="48.381" cy="29.065" r="4.043"/>\r\n               <path id="{{variable.Name}}-{{OptionId}}" fill="none" stroke="#969BA0" stroke-width="4" d=""/>\r\n               </svg>\r\n               \r\n        </span>\r\n\r\n\x3c!-- for golden and red stars --\x3e\r\n<span ng-if="RatingQuestionConfig.StarBeforeSelection && RatingQuestionConfig.StarBeforeSelection && RatingQuestionConfig.StarBeforeSelection != \'none\' && RatingQuestionConfig.StarAfterSelection != \'none\' && (RatingQuestionConfig.ShapeType == \'1\' || !variable.Properties.ShapeType)"\r\n      class="rating-option pos-rel display-inline-block dim45 text-left"\r\n      ng-class="{\'svg-filled blink\': OptionId <= SelectedValues.single && SelectedValues.single != null && SelectedValues.single != ExclusiveId}">\r\n            <span ng-class="{\'star-blank\': (OptionId > SelectedValues.single ||OptionId > hover.HoverID || !SelectedValues.single || SelectedValues.single == ExclusiveId || hover.hoverID == ExclusiveId)&& RatingQuestionConfig.StarBeforeSelection == \'blank\',\r\n            \'star-red\':((OptionId <= SelectedValues.single && SelectedValues.single != null)|| OptionId <= hover.hoverID) && !(SelectedValues.single == ExclusiveId || hover.hoverID == ExclusiveId) && RatingQuestionConfig.StarAfterSelection == \'red\',\r\n            \'star-grey\': (OptionId > SelectedValues.single || !SelectedValues.single || SelectedValues.single == ExclusiveId || hover.hoverID == ExclusiveId) && RatingQuestionConfig.StarBeforeSelection == \'grey\',\r\n            \'star-golden\':((OptionId <= SelectedValues.single && SelectedValues.single != null) || OptionId <= hover.hoverID) && !(SelectedValues.single == ExclusiveId || hover.hoverID == ExclusiveId) && RatingQuestionConfig.StarAfterSelection == \'golden\' }"\r\n                  ng-model="SelectedValues.single"></span>\r\n</span>\r\n\r\n\r\n\r\n'),e.put("text.html",'<div class="card center-div">\r\n    \x3c!--Question Container--\x3e\r\n    <div class="sq-container" error-tool-tip error-config="ErrorConfig">\r\n        <div ng-if="ShowQuestionNumber" class="sq-name table-cell">{{qObject.Name}}</div>\r\n        <div class="sq-text table-cell display-block">\r\n                <div><img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}"/>\r\n                    <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) " src="{{qObject.Properties.MediaPath}}">\r\n                            <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n                    </audio>\r\n                    <video controls video-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && (qObject.Properties.MediaPosition == \'up\' ||  !qObject.Properties.MediaPosition) ">\r\n                            <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n                    </video>\r\n                </div>\r\n        <div ng-if="qObject.Text[language] != undefined"  bind-html-compile="qObject.Text[language]"></div>\r\n        <div ng-if="qObject.Text[language] == undefined"  bind-html-compile="qObject.Text[DefaultLanguage]"></div>\r\n        <img image-on-load class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'1\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}"/>\r\n        <audio controls class="maxSize" ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'2\' && qObject.Properties.MediaPosition == \'down\'" src="{{qObject.Properties.MediaPath}}">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="audio/mpeg">\r\n        </audio>\r\n        <video controls video-on-load  ng-if="qObject.Properties.MediaPath && qObject.Properties.MediaType == \'3\' && qObject.Properties.MediaPosition == \'down\'">\r\n                <source src="{{qObject.Properties.MediaPath | trusted}}" type="video/mp4">\r\n        </video> \r\n    </div>\r\n    </div>\r\n    \x3c!--Variable Container--\x3e\r\n    <div class="sv-container">\r\n        <div><span style="color: red" ng-if="ShowMandatoryStar && AnswerInvalid">*Invalid Input</span></div>\r\n        <survey-variable ng-repeat="item in qObject.QuestionLevelSequence" variable="qObject.Variables[item.ID]">\r\n            \x3c!-- <span ng-if="variable.Properties.Max" class="max-min font-90">(Max Length: {{variable.Properties.Max}},</span>\r\n            <span ng-if="variable.Properties.Min" class="max-min font-90">Min Length: {{variable.Properties.Min}})</span> --\x3e\r\n            <div ng-if="variable.Properties.ShowAs == 12" class="sg-container">\r\n                \x3c!-- <input ng-if="variable.Properties.RegexType == \'Telephone\' || variable.Properties.RegexType == \'Postal\'" placeholder="{{RegexExample}}" class="input-txt darkBdr"  type="number" ng-model="answerInput" ng-blur="SaveAnswer(answerInput)" /> --\x3e\r\n                <input id="{{variable.Name}}" ng-class="{\'border-all\':variable.Properties.ShowFullBorder == \'true\', \'border-red\':SelectedValues.single.length < variable.Properties.Min && SelectedValues.single }" maxlength="{{variable.Properties.Max}}" variableName="{{variable.Name}}" placeholder="{{Placeholder}}" class="focusableInput darkBdr input-txt full-width" type="text" ng-model="SelectedValues.single" ng-blur="OnBlurSave(SelectedValues.single)"/>\r\n            </div>\r\n            <div ng-if="variable.Properties.ShowAs == 13" class="sg-container">\r\n                <textarea id="{{variable.Name}}" ng-class="{\'border-all\':variable.Properties.ShowFullBorder  == \'true\'}" variableName="{{variable.Name}}" placeholder="{{Placeholder}}" class="focusableInput darkBdr input-text-area" ng-model="SelectedValues.single" ng-blur="OnBlurSave(SelectedValues.single)"></textarea>\r\n            </div>\r\n            <div  ng-if="variable.VariableType == 3 && SelectedValues.single && HideOkButton != \'true\'">\r\n                <div class="button nav enabled  display-inline-block" ng-click="SaveAnswer(SelectedValues.single)">\r\n                    <span>{{(Buttons[\'Ok\'][Language] || Buttons[\'Ok\'][DefaultLanguage])}} <i class="fa fa-check"></i></span>\r\n                </div>\r\n                \x3c!-- <div class="text display-inline-block" ng-if="!isMobileDevice">press <strong>ENTER</strong></div> --\x3e\r\n            </div>\r\n            <survey-options ng-if="variable.VariableType == 1"></survey-options>\r\n\r\n            \x3c!-- <span class="error" ng-if="!valid">*Invalid Input</span> --\x3e\r\n        </survey-variable>\r\n    </div>\r\n</div>')}])}(angular),angular.module("SurveyEngineCore",["SurveyEngine","rzModule","camera","vs-repeat","angularjs-datetime-picker","angular-appinsights"]),function(e){"use strict";function t(e,t,n){t.start(e.AppInsightsKey,"SurveyEngine"),n.hashPrefix("")}e.module("SurveyEngineCore").config(["SurveyEngine.APIPathConstants","insightsProvider","$locationProvider",t])}(angular),function(e){"use strict";function t(e,t,n){function i(e,n){"object"==typeof e&&(j=n,k=j==t.SurveyMode.Review?[]:e)}function r(){return k}function a(){var e=null;if(j==t.SurveyMode.Resume||j==t.SurveyMode.New||j==t.SurveyMode.Preview?e=d():j==t.SurveyMode.Review&&(e=c()),null==e)return null;var i=new NodePointer;for(var r in e){i.NodeID=r;var a=n.getParentNodeID(r);i.ParentNodeID=a,Array.isArray(e[r])&&e[r].length>0&&(i.ChildNodeID=Object.keys(e[r][0])[0])}return i}function o(){var e=d()||null;if(null==e)return null;var t=new NodePointer;for(var i in e){t.NodeID=i;var r=n.getParentNodeID(i);t.ParentNodeID=r,Array.isArray(e[i])&&e[i].length>0&&(t.ChildNodeID=Object.keys(e[i][0])[0])}return t}function s(e,t){var n=-1;e:for(var i=0;i<k.length;i++)if(k[i].hasOwnProperty(t))for(var r=0;r<e[t].length;r++)for(var a in e[t][r])if(k[i][t][r]&&k[i][t][r].hasOwnProperty(a)){n=i;break e}-1===n&&null!=e&&(V.pop(),k.push(e),D[t]=k.length-1)}function l(){V.push(k.pop())}function c(){return 0==k.length?null:k[0]}function d(){return 0==k.length?null:k[k.length-1]}function u(e,t,n){for(var i=[],r=0;r<V.length;r++){if(V[r].hasOwnProperty(e))for(var a=0;a<V[r][e].length;a++)V[r][e][a].hasOwnProperty(n)&&(r,a);if(V[r].hasOwnProperty(t)){r;break}}for(var r=0;r<V.length;r++)for(var o in V[r]){var s=V[r][o][0];for(var l in s)i=i.concat(s[l])}return V=[],i}function p(){for(var e=0,t=0;t<k.length;t++)for(var n in k[t])e+=Object.keys(k[t][n]).length;return e}function g(e){for(var t=[],n=0;n<k.length;n++){var i=k[n];for(var r in i)if(r==e)for(var a=0;a<i[r].length;a++)for(var o in i[r][a])for(var s=i[r][a][o],l=0;l<s.length;l++){var c=s[l].split(".");c.length>1&&!t.hasItem(c[1])&&t.push(c[1])}}return t}function v(e){M=e}function b(){return M}function f(){return w}function y(e){w=e}function h(){for(var e=[],t=0;t<k.length;t++){var n=k[t];for(var i in n)for(var r=0;r<n[i].length;r++)for(var a in n[i][r])-1==e.indexOf(a)&&e.push(a)}return e}function m(){var e=null;e:for(var t=k.length-1;t>=0;t--){var n=k[t];for(var i in n)for(var r=0;r<n[i].length;r++)for(var a in n[i][r]){e=a;break e}}return e}function S(e){T=e}function O(){return T}function P(){return C}function I(e){C=e}function x(e){L=e}function q(){return L}var w,T,M=1,j=null,D={},k=[],V=[],C=0,L=-1;return{MOVE_FORWARD:1,MOVE_BACKWARD:-1,addToList:s,deleteFromList:l,initTraversalList:i,getTraversalList:r,getTraversalListPointer:o,getOrphanVariables:u,getProgress:p,getLoopIterations:g,getLastTNode:a,setMovement:v,getAttrPointer:f,setAttrPointer:y,getMovement:b,getQids:h,getLastAnsweredQuestionID:m,setLastRenderedQuestion:S,getLastRenderedQuestion:O,getMaxAttributes:P,setMaxAttributes:I,getAttributePosition:q,setAttributePosition:x}}e.module("SurveyEngineCore").factory("EngineCore.TraversalListService",["$q","SurveyEngine.Enums","EngineCore.SurveyTreeService",t])}(angular),function(e){"use strict";function t(e,t,n,i,r,a,o,s,l){function c(){b();var r=e.defer();return t.IsTest==i.SurveyType.Live&&n.IsPropertiesStoredLocally()&&t.IsRespondentStoredLocally(n.QueryParameter.ProjectGUID)?t.GetSurveyStatus()==i.SurveyStatus.Completed||t.GetSurveyStatus()==i.SurveyStatus.Terminated?t.IsTest==i.SurveyType.Live&&n.IsMultipleSurveyPreventionEnabled()?setTimeout(function(){a.$broadcast("OnEndSurvey"),r.reject()},0):d().then(function(){r.resolve()}):n.GetSurveyProperties().then(function(e){t.GetSurveyMode()!==i.SurveyMode.Preview?(n.IsPasswordProtectEnabled()&&a.$broadcast("OnAuthorizationRequest"),t.SetSurveyMode(i.SurveyMode.Resume),n.SetSurveyProperties(e,!1),n.QueryParameter.Clang&&n.SetSurveyLanguage(n.QueryParameter.Clang),l.DrawStartUpPage(),s.load(),g().then(function(){r.resolve()},function(){r.reject()})):(n.SetSurveyProperties(e,!0),s.load(),r.resolve())}):d().then(function(){r.resolve()}),r.promise}function d(){var r=e.defer();return n.GetSurveyProperties(!0).then(function(e){t.GetSurveyMode()===i.SurveyMode.Preview||o.isTestEnabled?n.SetSurveyProperties(e,!0):n.SetSurveyProperties(e,!1),n.QueryParameter.Clang&&n.SetSurveyLanguage(n.QueryParameter.Clang),l.DrawStartUpPage(),t.GetSurveyMode()!=i.SurveyMode.Review&&t.GetSurveyMode()!=i.SurveyMode.Resume&&t.GetSurveyMode()!=i.SurveyMode.View&&s.load(),
n.IsPasswordProtectEnabled()&&!o.isTestEnabled&&a.$broadcast("OnAuthorizationRequest"),n.IsCaptureGPSEnabled()&&!o.isTestEnabled?navigator.geolocation.getCurrentPosition(function(e){console.log(e.coords.latitude),console.log(e.coords.longitude),console.log(e.coords.accuracy),t.SetLatLong(e.coords.latitude,e.coords.longitude),t.SetCityCountry(e.coords.latitude,e.coords.longitude),u(r)},function(){n.IsAllowIfGPSUnavailable()?u(r):(a.$broadcast("OnEndSurvey"),r.reject())}):setTimeout(function(){u(r)},0),t.SetPanelMapping(n.GetPanelVariables()),t.InitRespondent(n.QueryParameter,n.GetSurveyLanguage(),n.GetQuesVersion())},function(e){a.$broadcast("ServerError",e.status)}),r.promise}function u(e){function r(e){t.CreateRespondent().then(function(r){t.GetRespondent(r).then(function(r){if(r.FlowList.length>0){var a=parseInt(r.Answers.QuestionnaireVersion.Values[0]);a!==n.GetQuesVersion()&&(n.UpdateQVersion(a),s.flushQuestionnaire(),s.load()),t.SetSurveyMode(i.SurveyMode.Resume)}else t.SetSeed(),t.SetFingerPrintID(),p();e.resolve()})},function(t){500===t.status?a.$broadcast("ServerError",500):412===t.status?a.$broadcast("OnInactiveSurvey"):a.$broadcast("OnEndSurvey"),e.reject()})}if(t.GetSurveyMode()===i.SurveyMode.Preview)p(),e.resolve();else if(t.GetSurveyMode()===i.SurveyMode.Review||t.GetSurveyMode()===i.SurveyMode.View){t.GetRespondent(null,n.QueryParameter.RespID,"Processed").then(function(r){var a=parseInt(r.Answers.QuestionnaireVersion.Values[0]);n.UpdateQVersion(a),s.load(),p(),t.SetSurveyMode(i.SurveyMode.Review),t.AddQueryParamToRespondent(),e.resolve()},function(e){a.$broadcast("ServerError",e.status)})}else v(),o.isTestEnabled?(n.QuestionPerPage=99,o.AllowSync?r(e):(t.SetRespondentID(1),e.resolve())):g().then(function(){r(e)},function(){e.reject()})}function p(){if(n.IsLanguageSelectorEnabled()&&!o.isTestEnabled)a.$broadcast("OnLanguageSelectRequest");else if(n.QueryParameter.Clang)n.SetSurveyLanguage(n.QueryParameter.Clang),t.SetSurveyLanguage(n.GetSurveyLanguage());else if("string"==typeof navigator.language){var e=n.GetAllVisibleLanguages();0===Object.keys(e).length&&(e=n.GetAllLanguages()),navigator.language.toLowerCase()in e||navigator.language in e?n.SetSurveyLanguage(navigator.language.toLowerCase()):n.SetSurveyLanguage(n.GetDefaultLanguage()),t.SetSurveyLanguage(n.GetSurveyLanguage())}}function g(){var t=e.defer();return n.IsSurveyActive(n.QueryParameter.CampaignID).then(function(){t.resolve()},function(e){500===e.status?a.$broadcast("ServerError",500):a.$broadcast("OnInactiveSurvey"),t.reject()}),t.promise}function v(){switch(t.Channel){case i.Channel.AnonymousLink:case i.Channel.OfflineAnonymous:case i.Channel.AutoPersonalizedEmails:break;case i.Channel.AnonymousEmailCampaignLink:case i.Channel.AnonymousSMSCampaignLink:t.CreateSystemVariable("CampaignID",[n.QueryParameter.CampaignID],i.VariableType.Text);break;case i.Channel.PersonalizedLink:case i.Channel.PersonalizedEmailCampaignLink:case i.Channel.OfflinePersonalized:case i.Channel.PersonalizedSMSCampaignLink:t.CreateSystemVariable("CampaignID",[n.QueryParameter.CampaignID],i.VariableType.Text),n.QueryParameter.DistributionListID&&t.CreateSystemVariable("DistributionListID",[n.QueryParameter.DistributionListID],i.VariableType.Text),t.CreateSystemVariable("SampleID",[n.QueryParameter.SampleID],i.VariableType.Text)}}function b(){var e=r.search();0==Object.keys(e).length&&location.search.replace("?","").split("&").map(function(t){var n=t.split("=");e[n[0]]=n[1]});var a,s={},l={};for(var c in e)if(s.hasOwnProperty(c)||(s[c]=e[c]),"rcparams"==c){a=atob(e[c]);for(var d=a.split("&"),u=0;u<d.length;u++){var p=d[u].split("=");s[p[0]]=p[1]}}else l[c]=e[c];if(t.SetPanelAnswers(l),s.pid&&(n.QueryParameter.ProjectGUID=s.pid),s.platform&&n.SetPlatform(parseInt(s.platform)),s.sid&&(n.QueryParameter.SubscriptionID=s.sid,n.SetAPIPath()),s.cid&&(n.QueryParameter.CampaignID=s.cid),s.dlid&&(n.QueryParameter.DistributionListID=s.dlid),s.smpid&&(n.QueryParameter.SampleID=s.smpid),s.rid&&(n.QueryParameter.RespID=s.rid),s.mode?(n.QueryParameter.Mode=parseInt(s.mode),t.SetSurveyMode(parseInt(s.mode))):n.QueryParameter.Mode=t.GetSurveyMode(),s.lang&&(n.QueryParameter.Clang=s.lang),s.ch?(n.QueryParameter.Channel=parseInt(s.ch),t.Channel=n.QueryParameter.Channel):n.QueryParameter.Channel=t.Channel,s.test&&(n.QueryParameter.IsTest=parseInt(s.test),t.IsTest=n.QueryParameter.IsTest),"true"==s.auto&&s.count&&(o.isTestEnabled=!0,o.MaxTestCount=parseInt(s.count),"false"==s.sync&&(o.AllowSync=!1)),s.sessionid&&t.SetSessionID(s.sessionid),s.data){for(var g=[],v=s.data.split(";"),u=0;u<v.length;u++){var b=v[u].split(","),f=t.GetAnswerObject();f.VariableName=b[0].trim(),f.QuestionID=b[1].trim(),f.Values=[b[2].trim()],f.VariableType=parseInt(b[3].trim()),f.VariableType!=i.VariableType.SingleChoice&&f.VariableType!=i.VariableType.MultipleChoice||(f.DisplayedValues=[b[2].trim()]),g.push(f)}g.length>0&&t.SetQueryAnswers(g)}}this.InitSurvey=c}e.module("SurveyEngineCore").service("SurveyInitializationService",t),t.$inject=["$q","SurveyEngine.RespondentService","SurveyEngine.SurveySettings","SurveyEngine.Enums","$location","$rootScope","EngineCore.TestGenerator","EngineCore.SurveyTreeService","SurveyEngine.PageRouteService"]}(angular),function(e){"use strict";function t(t,n,i,r){function a(t){ge=null,be=0,t||(ue=e.copy(ie),re={})}function o(){Se=[]}function s(){function a(n){t.all(Se).then(function(t){se=0,ie=t[0],ue=e.copy(ie),I(ue),Oe=Z(ue),n.resolve(ue)})}var o=t.defer();return Se.length>0?a(o):(Se.push(n.GetSurveyTree(i.QuestionCategory.Survey)),r.QueryParameter.Mode!=i.SurveyMode.Preview&&Se.push(n.GetFullQuestionnaire()),a(o)),o.promise}function l(e){var a=t.defer();return setTimeout(function(){var o,s=oe[e],l=oe[G(e)];o=l>-1?ue[l].Children[s]:ue[s];var c=0;ge&&oe[ge.ChildNodeID]>0&&(c=oe[ge.ChildNodeID]);var d=null,p=[];o.hasOwnProperty("SurveyObjectID")&&o.IconFlag!==i.DisplayFlag.Deleted&&(o.IconFlag&i.DisplayFlag.Deleted)!==i.DisplayFlag.Deleted?p.push(n.GetSection(e)):p.push(o);var v=o.Children,b=r.QuestionPerPage+c;o.IconFlag!==i.DisplayFlag.IsLoop&&(o.IconFlag&i.DisplayFlag.IsLoop)!==i.DisplayFlag.IsLoop||(b=o.Children.length);for(var f=0;f<v.length;f++)v[f].hasOwnProperty("ID")?(b++,p.push(v[f])):v[f].hasOwnProperty("Quota")?(b++,p.push(v[f])):_(v[f].IconFlag)||(W(v[f].IconFlag)?(b++,p.push(n.GetQuestion(v[f].SurveyObjectID))):v[f].SurveyObjectType===i.SurveyObjectType.Question?(k(v[f].SurveyObjectID,p.length-1),p.length-1>b?(b++,p.push(v[f])):p.push(n.GetQuestion(v[f].SurveyObjectID))):v[f].SurveyObjectType===i.SurveyObjectType.PageBreak?(k(v[f].SurveyObjectID,p.length-1),p.push(v[f]),b++):v[f].SurveyObjectType===i.SurveyObjectType.Jump||v[f].SurveyObjectType===i.SurveyObjectType.SetValue?(k(v[f].SurveyObjectID,p.length-1),p.push(u(v[f].SurveyObjectID)),b++):v[f].SurveyObjectType===i.SurveyObjectType.Quota&&(k(v[f].SurveyObjectID,p.length-1),p.push(g(v[f].SurveyObjectID)),b++));t.all(p).then(function(e){d=e.splice(0,1)[0];var r=d.LoopQuestionGUID;e=e.filter(function(e){return"object"==typeof e}),I(e,d.ID||d.SurveyObjectID),d.Children=e;for(var o=[],c=[],p=0;p<e.length;p++)if(k(e[p].ID,p),x(e[p]),e[p].SurveyObjectType!==i.SurveyObjectType.PageBreak&&e[p].ObjectType!==i.ObjectType.Script){if("object"==typeof e[p].CarryForward)for(var g in e[p].CarryForward)e[p].CarryForward[g].IsEnabled&&e[p].CarryForward[g].SourceQuestionGUID&&!ye.hasOwnProperty(e[p].CarryForward[g].SourceQuestionGUID)&&c.push(n.GetQuestion(e[p].CarryForward[g].SourceQuestionGUID));e[p].AttributeCarryForwardScriptID&&o.push(u(e[p].AttributeCarryForwardScriptID)),e[p].ValidationScriptID&&o.push(u(e[p].ValidationScriptID)),e[p].QuestionMaskingScriptID&&o.push(u(e[p].QuestionMaskingScriptID));var v=[];for(var b in e[p].Variables){var f=e[p].Variables[b];f.VariableType!==i.VariableType.SingleChoice&&f.VariableType!==i.VariableType.MultipleChoice||!f.OptionMaskingScriptID||-1!==v.indexOf(f.OptionMaskingScriptID)||(o.push(u(f.OptionMaskingScriptID)),v.push(f.OptionMaskingScriptID)),f.OptionCarryForwardScriptID&&-1===v.indexOf(f.OptionCarryForwardScriptID)&&(o.push(u(f.OptionCarryForwardScriptID)),v.push(f.OptionCarryForwardScriptID)),f.VariableMaskingScriptID&&-1===v.indexOf(f.VariableMaskingScriptID)&&(o.push(u(f.VariableMaskingScriptID)),v.push(f.VariableMaskingScriptID))}for(var y in e[p].Attributes){var h=e[p].Attributes[y];h.AttributeMaskingScriptID&&o.push(u(h.AttributeMaskingScriptID))}for(var m in e[p].Groups){var S=e[p].Groups[m];S.GroupMaskingScriptID&&o.push(u(S.GroupMaskingScriptID))}}r&&c.push(n.GetQuestion(r));for(var O=0;O<c.length;O++)o.push(c[O]);t.all(o).then(function(e){for(var t=0;t<e.length-c.length;t++)re[e[t].ID]=e[t];for(var t=e.length-c.length;t<e.length;t++)x(e[t]),Q(e[t]);l>-1?ue[l].Children[s]=d:ue[s]=d,a.resolve(d)})})},0),a.promise}function c(e){return re.hasOwnProperty(e)?re[e]:null}function d(e){var a=t.defer();return setTimeout(function(){if(e)ae.hasOwnProperty(e)?a.resolve(ae[e]):n.GetSurveyEndNode(e).then(function(t){ae[e]=t,a.resolve(t)});else{var t=new EndNode(i.SurveyStatus.Completed);t.Message.Messages[r.GetSurveyLanguage()]=r.GetSurveyEndText(),a.resolve(t)}},0),a.promise}function u(e){function i(e,n){if(p(e.Body))try{var i=(0,eval)(e.Body);i instanceof t&&i.then(function(t){"function"==typeof t&&(e.ScriptResult=t(),n.resolve(e))})}catch(t){n.resolve(e)}else n.resolve(e)}var r=t.defer();return setTimeout(function(){re.hasOwnProperty(e)?i(re[e],r):n.GetScript(e).then(function(t){re[e]=t,i(re[e],r)},function(){r.resolve(e)})},0),r.promise}function p(e){return"string"==typeof e&&e.indexOf("GetAndCheckQuotas")>-1}function g(e){var i=t.defer();return setTimeout(function(){me.hasOwnProperty(e)?i.resolve(me[e]):n.GetQuotaNode(e).then(function(t){var n=t;n.ID=t.Quota.ID,me[e]=n,i.resolve(n)},function(){i.resolve(e)})},0),i.promise}function v(e,t){me[e]=t}function b(){return ge}function f(){return ve}function y(e){ve=e?new NodePointer(e.ParentNodeID,e.NodeID,e.ChildNodeID):null}function h(e){ge=e}function m(){var e=t.defer();return setTimeout(function(){if(null==ge)e.resolve(ue[0]);else{var t,n=oe[ge.NodeID];ge.ParentNodeID?(t=oe[ge.ParentNodeID],e.resolve(ue[t].Children[n])):e.resolve(ue[n])}},0),e.promise}function S(t,n){if(null==ge)return ue.length>1?ue[1]:{};var i,r=null;if(ge.ParentNodeID){r=oe[ge.ParentNodeID];var a=ue[r];return i=oe[ge.NodeID]+1,i<a.Children.length?ue[r].Children[i]:r+1<ue.length?ue[r+1]:new EndNode}i=oe[ge.NodeID];var o=[];if(n&&Array.isArray(n)&&n.length>0?n.map(function(t){ue[i].Children.map(function(n){var i=e.copy(n);return i.ID+="|"+t,i.Name+="."+t,o.push(i),n});var n=new PageBreak;k(n.SurveyObjectID,o.length),o.push(n)}):o=ue[i].Children,ge.ChildNodeID&&be>=0){var s=t||1;if(s<o.length)return o[s]}return t<o.length?o[t]:(i+=1,i<ue.length?ue[i]:new EndNode)}function O(t){1==t?(ge=e.copy(ve),be=de[ge.ChildNodeID]||0):-1==t&&(be=null==ge?0:de[ge.ChildNodeID])}function P(){return be=null==ge?0:de[ge.ChildNodeID]||0}function I(e,t,n){for(var r=0;r<e.length;r++){var a=e[r].SurveyObjectType||e[r].ObjectType,o=e[r].SurveyObjectID||e[r].ID,s=e[r].IconFlag;oe[o]=r,ce[o]=t,(a!=i.SurveyObjectType.Section&&a!=i.SurveyObjectType.Sequencer||!_(s)&&!W(s))&&(a!==i.SurveyObjectType.Question||_(s)||W(s)||D(o,n),e[r].hasOwnProperty("Children")&&Array.isArray(e[r].Children)&&I(e[r].Children,o))}}function x(e){ye[e.ID]=e}function q(){function e(e){return null!==e&&void 0!==e&&""!==e}function t(t,n){if(n&&(!a||!e(o)))return t[n].Text[r.GetSurveyLanguage()]||t[n].Text[r.GetDefaultLanguage()];if(n&&a&&!e(o)){var i=t[n].Variables;for(var s in i)if(i[s].Name===a)return t[n].Variables[s].Text[r.GetSurveyLanguage()]||t[n].Variables[s].Text[r.GetDefaultLanguage()]}if(n&&a&&e(o)){var i=t[n].Variables;for(var s in i)if(i[s].Name===a||i[s].Name.split(".")[0]===a.split(".")[0]||i[s].Name.split(".")[0]===a||i[s].Name===a.split(".")[0])return t[n].Variables[s].Options[o].Text[r.GetSurveyLanguage()]||t[n].Variables[s].Options[o].Text[r.GetDefaultLanguage()]}}var i=arguments[0],a=arguments[1],o=arguments[2];for(var s in Pe)if(s.split("|")[0]==i){i=s;break}var l;return i in Pe?l=t(Pe,i):i in ye&&(l=t(ye,i)),l||(null===he&&(he=n.GetQuestion(i),he.then(function(e){x(e),Q(e),he=null})),null)}function w(){var e=arguments[0],t=arguments[1];if(e&&t){for(var n in Pe)if(n.split("|")[0]==e)for(var i in Pe[n].Variables)if(Pe[n].Variables[i].Name.split(".")[0]==t)return Object.keys(Pe[n].Variables[i].Options);for(var n in ye)if(n.split("|")[0]==e)for(var i in ye[n].Variables)if(ye[n].Variables[i].Name.split(".")[0]==t)return Object.keys(ye[n].Variables[i].Options)}return[]}function T(){var e=arguments[0],t=arguments[1],n=[];if(e&&t&&ye.hasOwnProperty(e))for(var i in ye[e].Variables){var r=ye[e].Variables[i];r.Name==t&&r.VariableLevelSequence.map(function(e){e.IsOption?n.push(e.ID):r.OptionGroups[e.ID]&&(n=n.concat(r.OptionGroups[e.ID].OptionSequence))})}return n}function M(e){return!(!ye.hasOwnProperty(e)||ye[e].QuestionCategory!=i.QuestionCategory.Survey)}function j(){var e=arguments[0],t=arguments[1],n=arguments[2];if(e&&t&&n&&ye[e]){var i,r=ye[e].Variables;for(var a in r)if(r[a].Name===t){i=ye[e].Variables[a].Options[n].OtherVariableID;break}if(i)return ye[e].Variables[i].Name}return null}function D(e,t){if(e){if(t){var n=e.split("|")[0],i=fe.indexOf(n);i>-1&&fe.splice(i,1)}-1===fe.indexOf(e)&&fe.push(e),le=fe.length}}function k(e,t){e&&(de[e]=t,null==be&&ge&&ge.ChildNodeID==e&&(be=de[ge.ChildNodeID]||0))}function V(){return pe}function C(e){pe=e}function L(){return parseInt(se+1)}function A(e){null==e?se=le:se+=e}function N(){return Oe.length}function E(e){for(var t=0;t<e.length;t++)e[t].ObjectType===i.ObjectType.Question&&(de[e[t].ID]=t)}function G(e){return ce[e]||null}function B(e,t){return ue[oe[e]].Children[oe[t]].SurveyObjectName}function R(e){return Pe[e]}function Q(e){Pe[e.ID]=e}function z(e){for(var t in ye){var n=ye[t].Variables;for(var i in n)if(n[i].Name==e)return t}}function F(e){var i=t.defer();return e in ye?i.resolve(ye[e]):n.GetQuestion(e).then(function(e){x(e),i.resolve(e)}),i.promise}function H(e){return ye[e]||{}}function U(){return $(ie)}function $(e){for(var t=[],n=0;n<e.length;n++)i.ObjectType.Question!=e[n].SurveyObjectType||_(e[n].IconFlag)||e[n].SurveyObjectSubType==i.QuestionType.Display?e[n].Children.length>0&&(t=t.concat($(e[n].Children))):t.push(e[n].SurveyObjectID);return t}function _(e){return e===i.DisplayFlag.Deleted||(e&i.DisplayFlag.Deleted)===i.DisplayFlag.Deleted}function W(e){return e===i.DisplayFlag.Hidden||(e&i.DisplayFlag.Hidden)===i.DisplayFlag.Hidden}function J(){var e=Array.prototype.slice.call(arguments);this.ID=e[0],this.IsMet=window.qresults[this.ID]||!1}function K(e){var t=[];try{if(Array.isArray(e))for(var n=0;n<e.length;n++)t.push(e[n].SelectedVariable),Array.isArray(e[n].Children)&&e[n].Children.length>0&&(t=t.concat(K(e[n].Children)))}catch(e){}return t}function Z(e){if(0==e.length)return[];var t=[];return e.map(function(e){var n=(e.SurveyObjectType||e.ObjectType)==i.ObjectType.Question;!W(e.IconFlag)&&!_(e.IconFlag)&&(n&&t.push(e.SurveyObjectID||e.ID),e.Children.length>0&&(t=t.concat(Z(e.Children))))}),t}function X(e,t){var n,i=[],r=[];i=i.concat(ue[oe[e]].Children.map(function(e){return e.ID||e.SurveyObjectID})),r=r.concat(t.map(function(e){return e.ID||e.SurveyObjectID})),i.map(function(e,t){0==t&&(n=Oe.indexOf(e)),Oe[n+t]=r[t]})}function Y(e,t){e&&(e=e.split("|")[0]),t&&(t=t.split("|")[0]);var n=Oe.indexOf(e),i=Oe.indexOf(t);return-1===n&&(n=0),-1===i?0:Math.abs(n-i)||0}function ee(e,t){var n=ue[oe[e]].Children,i=[],r=[];n.map(function(e){i=i.concat(e.Children.map(function(e){return e.ID||e.SurveyObjectID}))}),t.map(function(e){r=r.concat(e.Children.map(function(e){return e.ID||e.SurveyObjectID}))});var a;i.map(function(e,t){0==t&&(a=Oe.indexOf(e)),Oe[a+t]=r[t]})}function te(e){return Oe.length>0&&A(Y(Oe[0],e)),A(0)}function ne(e){return ue[oe[e]]}var ie,re={},ae={},oe={},se=0,le=0,ce={},de={},ue={},pe={},ge={},ve={},be=null,fe=[],ye={},he=null,me={},Se=[],Oe=[],Pe={},Ie={load:s,getSurveyTreePointer:b,setSurveyTreePointer:h,getCurrentSurveyTreeNode:m,getNextSurveyTreeNode:S,getSequencerNode:ne,moveSurveyTreePointer:O,getSection:l,getChildIndex:P,getNextSurveyTreePointer:f,setNextSurveyTreePointer:y,addQuestionIndex:k,getScript:c,getSurveyTreeScript:u,createIndexes:I,getParentNodeID:G,updateQIndexes:E,getQuesNameFromId:B,resetSurveyTree:a,getCurrentSectionName:V,setCurrentSectionName:C,getProgress:L,setProgress:A,getMaxQuestions:N,getText:q,getOtherVariable:j,getAllOptions:w,getSurveyEndNode:d,setCfQuestion:Q,getCfQuestion:R,isSurveyQuestion:M,getQuestionID:z,getQuestion:F,getSurveyTreeQuestionIds:U,getQuesObject:H,getQuotaNode:g,setQuotaNode:v,adjustPositionsAfterSequencing:X,getDistanceBetweenNodes:Y,shuffleNodes:ee,initProgress:te,getOrderedOptions:T,flushQuestionnaire:o};return window.q=function(e){return new J(e)},window.qresults={},J.prototype.GetAndCheckQuotas=function(e){var i=t.defer();if(Array.isArray(this.ID)){var r=[];this.ID.map(function(e){r.push(g(e))}),t.all(r).then(function(t){var r={};t.map(function(e){if(!window.qresults.hasOwnProperty(e.ID)){var t=[];t=t.concat(K(quotaNode.QuotaDefinition.SideBreak)),t=t.concat(K(quotaNode.QuotaDefinition.TopBreak));var n={};t.map(function(e){var t=window.r(e).GetValue();null==t?t=[]:Array.isArray(t)||(t=[t]),n[e]=t}),r[e.ID]=n}}),Object.keys(r).length>0?n.CheckBulkQuota(r).then(function(t){for(var n in t)window.qresults[n]=t[n];i.resolve(e)}):i.resolve(e)})}return i.promise},J.prototype.NotMet=function(){return!this.IsMet},J.prototype.Met=function(){return this.IsMet},Ie}e.module("SurveyEngineCore").factory("EngineCore.SurveyTreeService",["$q","EngineCore.CommunicationService","SurveyEngine.Enums","SurveyEngine.SurveySettings",t])}(angular),function(e){"use strict";function t(t,n,i,r){var a,o=this;o.ANDROID=1,o.WEB=2,o.PLATFORM=2;var s=n;o.InitPlatform=function(){o.PLATFORM===o.WEB?s=n:o.PLATFORM===o.ANDROID&&(s=i)},o.UpdateAPIPath=function(e,t){o.PLATFORM==o.WEB?(s.SetAPIPath(e,t),o.MediaURL=s.MediaUrl+t+"/"+e+"/multimediaassets/"):s.SetAPIPath(e,t)},o.UpdateSurveyAPI=function(e){s.SetSurveyAPI(e)},o.Authenticate=function(e){var n=t.defer(),i=s.API+"/Survey/SurveyProperties/CheckSurveyPassword";return s.Post(i,JSON.stringify(e)).then(function(e){n.resolve(e)},function(e){n.reject()}),n.promise},o.GetSurveyProperties=function(){var e=t.defer(),n=s.API+"/Survey/SurveyProperties/";return s.Get(n).then(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise},o.UpdateSurveyProperties=function(e){var n=t.defer(),i=s.API+"/Survey/SurveyProperties/";return s.Put(i,e).then(function(e){n.resolve()},function(e){n.reject(e)}),n.promise},o.IsSurveyActive=function(e){var n=t.defer(),i=s.API+"/Data/Expiry";return e&&(i+="?campaignID="+e),s.Get(i).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},o.CreateRespondent=function(e,n,i){var r=t.defer(),a=s.API+"/Data";return n&&i&&(a+="?sessionid="+n+"&rId="+i),s.PostAndGetHeaders(a,e).then(function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},o.GetRespondent=function(e,n,i,r){var a=t.defer();return e||(e=s.API+"/Data/"+n+"?source="+i+"&sessionid="+r),r&&(e+="&sessionid="+r),s.Get(e).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},o.UpdateRespondent=function(e,n,i,r){var a=t.defer(),o=s.API+"/Data/"+n;return i&&(o+="?action="+i),r&&(o+="&sessionid="+r),s.Put(o,e,n).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},o.GetSurveyTree=function(e){var n=t.defer(),i=s.SurveyAPI+"SurveyTree/"+e;return s.Get(i).then(function(e){n.resolve(e.RootNodes)},function(e){n.reject(e)}),n.promise},o.GetSection=function(e){var n=t.defer(),i=s.SurveyAPI+"Sections/"+e;return"object"==typeof a&&e in a?n.resolve(a[e]):s.Get(i,e).then(function(e){n.resolve(e)}),n.promise},o.GetQuestion=function(e){var n=t.defer(),i=s.SurveyAPI+"Questions/"+e;return"object"==typeof a&&e in a?n.resolve(a[e]):s.Get(i,e).then(function(e){n.resolve(e)}),n.promise},o.GetScript=function(e){var n=t.defer(),i=s.SurveyAPI+"Scripts/"+e;return"object"==typeof a&&e in a?n.resolve(a[e]):s.Get(i,e).then(function(e){n.resolve(e)},function(){n.reject()}),n.promise},o.GetSurveyEndNode=function(e){var n=t.defer(),i=s.SurveyAPI+"SurveyEnd/"+e;return"object"==typeof a&&e in a?n.resolve(a[e]):s.Get(i).then(function(e){n.resolve(e)}),n.promise},o.GetMediaFiles=function(e,n){var i,r;return i=s.mediaAPIPath+"?type="+e+"&place="+n,r=t.defer(),s.Get(i).then(function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},o.UploadMedia=function(n,i,r){var a,o;o=t.defer(),a=s.mediaAPIPath+"?type="+i+"&place="+r;var l=new FormData;l.append("file",n);var c={transformRequest:e.identity,headers:{"Content-Type":void 0}};return s.UploadFile(a,l,c).then(function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},o.GetOS=function(){return o.PLATFORM==o.ANDROID?s.GetOS():o.PLATFORM==o.WEB?window.jsrcb.os:void 0},o.SaveMedia=function(e,n,i,r){var a=t.defer();return s.SaveMedia(e,n,i,r).then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},o.GetMedia=function(e,n){var i=t.defer();return s.GetMedia(e,n).then(function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},o.GetQuotaNode=function(e){var n=t.defer(),i=s.SurveyAPI+"Quota/"+e;if("object"==typeof a&&e in a){var r={};a[e].hasOwnProperty("Quota")?r=a[e]:r.Quota=a[e],n.resolve(r)}else s.Get(i).then(function(e){var t={};e.hasOwnProperty("Quota")?t=e:t.Quota=e,n.resolve(t)});return n.promise},o.CheckQuota=function(e,n){var i=t.defer(),r=s.SurveyAPI+"Quota/"+e;return s.Post(r,JSON.stringify(n)).then(function(e){i.resolve(e)},function(e){i.reject()}),i.promise},o.GetBulkQuota=function(e){var n=t.defer(),i=s.SurveyAPI+"Quota?quotaIds="+e.join(",");return s.Get(i).then(function(e){n.resolve(e)}),n.promise},o.CheckBulkQuota=function(e){var n=t.defer(),i=s.SurveyAPI+"Quota/CheckQuotas";return s.Post(i,JSON.stringify(e)).then(function(e){n.resolve(e)},function(e){n.reject()}),n.promise},o.StartRecording=function(e,t){o.PLATFORM==o.ANDROID&&s.StartRecording(e,t)},o.StopRecording=function(){o.PLATFORM==o.ANDROID&&s.StopRecording()},o.CloseWebview=function(e,t){o.PLATFORM==o.ANDROID&&s.CloseWebview(e,t)},o.GetFullQuestionnaire=function(){function e(e,t){require(["pako"],function(){var n=atob(e),i=n.split("").map(function(e){return e.charCodeAt(0)}),r=new Uint8Array(i),o=pako.inflate(r);if("function"==typeof TextDecoder){var n=new TextDecoder("utf-8").decode(o);a=JSON.parse(n),t.resolve()}else require(["encoder"],function(){var e=new TextDecoderLite("utf-8").decode(o);a=JSON.parse(e),t.resolve()})})}var n=t.defer(),i=s.SurveyAPI+"Questions/GetAllQuestions";return s.Get(i).then(function(t){try{if(o.PLATFORM==o.ANDROID)try{a=JSON.parse(t),n.resolve()}catch(i){e(t,n)}else e(t,n)}catch(e){console.log("error while decoding questionnaire"),n.resolve()}},function(e){n.resolve()}),n.promise},o.GetLatitude=function(){if(o.PLATFORM==o.ANDROID)return s.GetLatitude()},o.GetLongitude=function(){if(o.PLATFORM==o.ANDROID)return s.GetLongitude()},o.HitApi=function(e){var n=t.defer();return s.Get(e).then(function(e){n.resolve()},function(e){n.reject(e)}),n.promise},o.SendOTP=function(e,n,i){var a=t.defer(),l=s.API+"/otp/"+e+"/"+n+"?mode="+i;return o.PLATFORM==o.WEB?s.Get(l).then(function(e){r.SetOTP(e),a.resolve(e)},function(e){a.reject(e)}):o.PLATFORM==o.ANDROID&&s.GetOTP(e,n,i).then(function(e){r.SetOTP(e),a.resolve(e)},function(e){a.reject(e)}),a.promise}}e.module("SurveyEngineCore").service("EngineCore.CommunicationService",["$q","EngineCore.WebAPIService","EngineCore.IOService","SurveyEngine.ValidatorService",t])}(angular),function(e){"use strict";function t(t,n,i){function r(e,t){v.API=v.BaseURL+"v3/Subscriptions/"+t+"/Projects/"+e,v.mediaAPIPath=v.API+"/media",v.capturedMediaAPIPath=v.API+"/mediadata/"}function a(e){v.SurveyAPI=v.API+"/Survey/"+e+"/"}function o(e){var i=n.defer();return t.get(e).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise}function s(e,i){var r=n.defer();return t.put(e,i).then(function(e){r.resolve(e.data)},function(e){r.reject(e)}),r.promise}function l(e,i){var r=n.defer();return t.post(e,i).then(function(e){r.resolve(e.data)},function(e){r.reject(e)}),r.promise}function c(e,i){var r=n.defer();return t.post(e,i).then(function(e){r.resolve(e.headers("location")||e.data)},function(e){r.reject(e)}),r.promise}function d(e,i){var r=n.defer();return t.delete(e,i).then(function(e){r.resolve(e.data)},function(e){r.reject(e)}),r.promise}function u(n,i){var r={transformRequest:e.identity,headers:{"Content-Type":void 0}};return t.post(n,i,r)}function p(e,t){var i=v.capturedMediaAPIPath+t,r=n.defer();return u(i,e).then(function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}function g(e,t){var i=n.defer();return o(v.capturedMediaAPIPath+t+"?filename="+e,{responseType:"arraybuffer"}).then(function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}var v=this;v.BaseURL=i.BaseURL,v.MediaUrl=i.MediaUrl,v.AppInsightsKey=i.AppInsightsKey,v.SetAPIPath=r,v.SetSurveyAPI=a,v.Get=o,v.Put=s,v.Post=l,v.Delete=d,v.PostAndGetHeaders=c,v.UploadFile=u,v.SaveMedia=p,v.GetMedia=g}e.module("SurveyEngineCore").service("EngineCore.WebAPIService",["$http","$q","SurveyEngine.APIPathConstants",t])}(angular),function(e){"use strict";function t(e,t){function n(n,i){var a="<div class='hdrLayout' id='hdr-Layout'><div class='header-design' id='header_top' style='max-width:800px;margin:0 auto;position:relative;'><div id='survey-header' class='padding-5 text-center'>"+r()+'     <span class="font-size-Xlg text-center" style="display: inline-block;" ng-style="{ \'width\' : \''+e.LogoPosition+"'== 'topLeft' || '"+e.LogoPosition+"'== 'topRight' ? '50%' : '60%', 'display' : '"+e.LogoPosition+"'== 'topLeft' || '"+e.LogoPosition+"'== 'topRight' ? 'none' : 'inline-block' }\">               <center class='survey-title-text-color'>"+n+"               </center>       </span>";return a+="<div style=\"float:left\" ng-class=\"{'Lang-right' : '"+e.LogoPosition+"' =='topLeft','Lang-left' : '"+e.LogoPosition+"'=='topRight'}\">",i&&(a+='<div id="languageSelector" class="dropdown" style="padding: 0px;border:0px!important"><a class="btn btn-link dropdown-toggle btn-sm" tabindex="0" ng-click="ShowLanguages()"><i class="fa fa-globe" style="margin-right:3px;"></i>{{UserSelected.Language}}<i class="icon icon-caret"></i></a></div></div>'),O.SurveyMode===t.SurveyMode.Review&&(a+='<div style="position:absolute;right:-250px;width:240px;top:57px;"><button ng-click="Reject()" class="btn btn-primary" style="font-size: 1rem;padding: 0px 5px;height: initial;margin-right:3px;">Reject</button><button ng-click="Accept()" class="btn btn-primary" style="font-size: 1rem;padding: 0px 5px;height: initial;margin-right:10px;">Accept</button></div>'),e.Settings.Header&&(a+="<div class='section-header survey-topHdr'  id='survey-topHdr'>     <div class='padding-5 font-size'><center id='header-txt'>"+e.Settings.Header+"</center></div></div>"),a+="</div><div style='clear:both'></div></div></div></div>"}function i(){var t="";return"bottomLeft"==e.LogoPosition&&""!=e.GetLogoPath()?t+="<img src='"+e.GetLogoPath()+"' style='width:auto;position: absolute; top: 0px; left: 0px;'>":"bottomRight"==e.LogoPosition&&""!=e.GetLogoPath()?t+="<img src='"+e.GetLogoPath()+"' style='width:auto;position: absolute; top: 0px; right: 0px;'>":"bottomMiddle"==e.LogoPosition&&""!=e.GetLogoPath()&&(t+="<img id='bottom-middle' src='"+e.GetLogoPath()+"' style='max-height:40px;'>"),e.RedirectURL&&(t="<a href='"+e.RedirectURL+"' target='_blank'> "+t+" </a>"),t}function r(){var t="";return"topLeft"==e.LogoPosition&&""!=e.GetLogoPath()?t+="<img src='"+e.GetLogoPath()+"' style='float:left'>":"topRight"==e.LogoPosition&&""!=e.GetLogoPath()?t+="<img src='"+e.GetLogoPath()+"' style='float:right;padding-right:10px;'>":"topMiddle"==e.LogoPosition&&""!=e.GetLogoPath()&&(t+="<img id='logo-middle' src='"+e.GetLogoPath()+"' style='width:auto;position: absolute; top: 0px;'>"),e.RedirectURL&&(t="<a href='"+e.RedirectURL+"' target='_blank'> "+t+" </a>"),t}function a(e){return"<div class='section-header padding-5'>"+e+"</div>"}function o(){return'<div class="toast toast-danger" ng-show="showToastMessage"><i class="icon icon-error_outline"></i>{{toastMessage}}</div>'}function s(){return'<div id="recording-toast" class="toast toast-danger" style="position: fixed;bottom: 51px;z-index: 9;left: 0;"><button class="btn btn-clear float-right" onclick="window.closeRecording()"></button><span style="margin-right: 2em;">Recorded Audio</span></div>'}function l(t,n){var i="<survey-question  class='surveyQues' q-object='PageBufferObject["+t+"]' language='"+e.GetSurveyLanguage()+"'></survey-question>";return n&&(i+="<span class='requiredText'>{{ValidationMessage['"+n+"']}}</span>"),i+="<div ng-if='"+e.Settings.ShowSeperator+"'></div>"}function c(t,n,i){var r="<h1 class='endMsg font-size-XXlg card' id='endText' style='font-weight:normal'>"+t+"<br>";return n&&(r+="<div ng-if='!Navigation.hideSubmit' class='text-center'><div class='button navend enabled  display-inline-block' style='margin-top:30px' id='submit' ng-class='{\"disabled\" :Navigation.isSubmitDisabled}'  ng-click='OnSubmitResponse(\""+encodeURIComponent(t)+'", '+JSON.stringify(i)+")'>"+(e.GetButtons().Submit[e.GetSurveyLanguage()]||e.GetButtons().Submit[e.GetDefaultLanguage()])+"</div></div>"),r+="<span class='display-none'>Now <b>create your own</b>  it's easy & beautiful</span><div class='button-wrapper display-none' style='margin-top: 30px;'><a class='button general full enabled' target='_blank' href='https://app.rebuscode.com'>Create a <strong>RebusCloud</strong></a></div></h1>"}function d(){return"<div class='footer-design'><div class='pos-rel' id='engine-container' style='width: 90%;margin:0 auto'>   <div class=\"left-btn\">"+'       <div class="prev-next clickable" title="Previous" ng-click="BroadcastBeforeBack()" ng-class="{\'disabled\' : Navigation.isBackDisabled}">'+e.Settings.NavigationButtons.Back+'       </div>   </div>   <div class="right-btn">       <div class="prev-next clickable" title="Next" ng-click="ValidateBeforeNext()" ng-class="{\'disabled\' : Navigation.isNextDisabled}">'+e.Settings.NavigationButtons.Next+'       </div>   </div>   <div style="clear:both"></div></div></div>'}function u(){return"<div class='footer-design font-75' id='footer-design'><div style='bottom: 0;max-width:800px;height:40px;margin : 0 auto'><div class=\"text-center middle-pane\">"+i()+'       <div class="text-center"><center class="font-size" id="footer-txt">'+e.Settings.Footer+'           </center></div></div><div class="right-btn">       <div ng-class="{\'invisible\' : '+!window.jsrcb.isMobile+'}"  class="prev-next clickable" style="float:right" title="Next" ng-click="SelectLanguage()"><i class="icon icon-arrow-down"></i>       </div>       <div ng-class="{\'invisible\' : '+window.jsrcb.isMobile+'}"  class="prev-next clickable" style="float:right" title="Next" ng-click="SelectLanguage()">'+e.Settings.NavigationButtons.Next+'<i class="icon icon-arrow-down" style="margin-left:5px;"></i>       </div><span class="display-inline-block border-radius invisible" style="float:right"><img src="assets/images/logo.png"/></span>'}function p(t,n,r,a){var o="";return o+='<div class="survey-bottomHdr footer-design" id="survey-bottomHdr"><div class="pos-rel" style="bottom: 0;max-width:800px;height:40px;margin : 0 auto">',r&&(o+='   <div class="left-btn"><div class="end-progress" id="progress"><div>',"text"==e.ProgressBarType?o+="<div class='ques-count' style='text-align: left'>"+t+"</div>":"percentage"==e.ProgressBarType&&(o+="<div class='ques-count' style='text-align: left'> 100% </div>"),o+="<div class='progress ques-bar'>   <div class='progress-bar ques-progress' style='width:100%;'>   </div></div></div></div></div>"),o+=' <div class="text-center middle-pane">'+i(),
e.Settings.Footer&&(o+='<div class="text-center"><center class="font-size" id="footer-txt">'+e.Settings.Footer+"           </center></div>"),o+="</div>",o+=' <div class="right-btn"><div ng-class="{\'disabled\' : Navigation.isBackDisabled}"  class="prev-next clickable mobilebtn" title="Previous" style="float:right" ng-click="GoBack()"><i class="icon icon-arrow-up"    ng-class="{\'rotate-left\' : \''+e.ArrowPosition+'\' ==\'leftRight\'}"></i>       </div><div ng-class="{\'disabled\' : Navigation.isBackDisabled}"  class="prev-next clickable webbtn" title="Previous" style="float:right" ng-click="GoBack()" ><i class="icon icon-arrow-up"   ng-class="{\'rotate-left visible\' : \''+e.ArrowPosition+"' =='leftRight','hidden' : '"+e.ArrowPosition+"' !='leftRight'}\" style=\"margin-left:5px;\"></i>"+(e.GetButtons().Back[e.GetSurveyLanguage()]||e.GetButtons().Back[e.GetDefaultLanguage()])+"<i class=\"icon icon-arrow-up\"   ng-class=\"{'hidden' : '"+e.ArrowPosition+'\' ==\'leftRight\'}" style="margin-left:5px;"></i>       </div><span id="rebusLogo" ng-class="{\'invisible\' : '+!e.ShowRebusCloudLogo+'}"  class="display-inline-block border-radius invisible" style="float:right"><img src="assets/images/logo.png"/></span></div><div style="clear:both"></div>',o+="</div>",e.IsShowFooterLinkAllowed()&&(o+='<div style="max-width:800px;padding: 8px 5px;margin : 0 auto" class="footerRTE">'+a+"</div>"),o+="</div>"}function g(t,n,r){var a="";return a+='<div class="survey-bottomHdr footer-design" id="survey-bottomHdr"><div class="pos-rel" style="bottom: 0;max-width:800px;height:40px;margin : 0 auto">',n&&(a+='   <div class="left-btn"><div class="s-progress" id="progress"><div><e-progress-bar callbacks="progressBar.Callbacks" progress-type="'+e.ProgressBarType+'"></e-progress-bar></div></div></div>'),a+=' <div class="text-center middle-pane">'+i(),e.Settings.Footer&&(a+='<div class="text-center"><center class="font-size" id="footer-txt">'+e.Settings.Footer+"           </center></div>"),a+="</div>",t&&(a+=' <div class="right-btn">       <div ng-class="{\'disabled\' : Navigation.isNextDisabled}" class="prev-next clickable mobilebtn" style="float:right" title="Next" ng-click="ValidateBeforeNext()" ng-class="{\'disabled\' : Navigation.isNextDisabled}"><i class="icon icon-arrow-down" ng-class="{\'rotate-right\' : \''+e.ArrowPosition+'\' ==\'leftRight\'}"></i>       </div><div ng-class="{\'disabled\' : Navigation.isBackDisabled}"  class="prev-next clickable mobilebtn" title="Previous" style="float:right" ng-click="BroadcastBeforeBack()" ng-class="{\'disabled\' : Navigation.isBackDisabled}"><i class="icon icon-arrow-up" ng-class="{\'rotate-left\' : \''+e.ArrowPosition+'\' ==\'leftRight\'}"></i>       </div>       <div ng-class="{\'disabled\' : Navigation.isNextDisabled}"  class="prev-next clickable webbtn" style="float:right" title="Next" ng-click="ValidateBeforeNext()" id="nxt-btn">'+(e.GetButtons().Next[e.GetSurveyLanguage()]||e.GetButtons().Next[e.GetDefaultLanguage()])+"<i class=\"icon icon-arrow-down\"   ng-class=\"{'rotate-left' : '"+e.ArrowPosition+'\' ==\'leftRight\'}" style="margin-left:5px;"></i>       </div><div ng-class="{\'disabled\' : Navigation.isBackDisabled}"  class="prev-next clickable webbtn" title="Previous" style="float:right" ng-click="BroadcastBeforeBack()" id="bck-btn"><i class="icon icon-arrow-up"   ng-class="{\'rotate-left visible\' : \''+e.ArrowPosition+"' =='leftRight','hidden' : '"+e.ArrowPosition+"' !='leftRight'}\" style=\"margin-left:5px;\"></i>"+(e.GetButtons().Back[e.GetSurveyLanguage()]||e.GetButtons().Back[e.GetDefaultLanguage()])+"<i class=\"icon icon-arrow-up\"   ng-class=\"{'hidden' : '"+e.ArrowPosition+'\' ==\'leftRight\'}" style="margin-left:5px;"></i>       </div><span id="rebusLogo" ng-class="{\'invisible\' : '+!e.ShowRebusCloudLogo+'}"  class="display-inline-block border-radius invisible" style="float:right"><img src="assets/images/logo.png"/></span></div><div style="clear:both"></div>'),a+="</div>",e.IsShowFooterLinkAllowed()&&(a+='<div style="max-width:800px;padding: 8px 5px;margin : 0 auto" class="footerRTE">'+r+"</div>"),a+="</div>"}function v(){return"<div class='engine-container footer-design'>   <div class='padding-5 card center-div'>       <span class='font-size'>Password</span>       <input ng-keyup='OnPassKeyUp($event)' type='password' ng-model='UserSelected.Password' class='input-txt'>   </div>   <div ng-show='UserSelected.isFailed' class='font-size padding-5'>       <span>Authentication failed</span>   </div>   <div>       <div ng-click='Authenticate()' class='md-primary display-inline-block font-size clickable'>          Sign in        </div>   </div></div></div>"}function b(t){var n="";if(1==e.Settings.InputButtonType)for(var i in t)n+='<label class="form-radio"><input type="radio" name="'+i+'" ng-model="UserSelected.Language" value="'+i+'"/><i class="form-icon"></i><span class="survey-option-text">'+t[i]+"</span></label></br>";else for(var i in t)n+='<div class="option-as-label language pos-rel" ng-click="SetLanguage(\''+i+"')\" ng-class=\"{'option-checked' : UserSelected.Language == '"+i+'\'}" ><i class="icon icon-check pos-abs" ng-if="UserSelected.Language == \''+i+'\'" style="top:10px;right:5px;"></i><div class="bd"></div><div class="bg"></div><span class="survey-option-text">'+t[i]+"</span></div>";return n}function f(t,n){var i=0;if(null!=document.getElementById("engine-container")){i+=document.getElementById("engine-container").offsetHeight}i+=SurveyTopHdr+SurveyBottomHdr+surveyHeader,""!=e.ScreenSize?document.getElementById("surveyEnd"):(t.hasOwnProperty("Bar")&&t.Bar,document.getElementById("surveyEnd"))}function y(){var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,n=/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification),i=!!document.documentMode,r=!i&&!!window.StyleMedia,a=!!window.chrome&&!!window.chrome.webstore;(a||e)&&window.CSS;1==a?document.getElementById("body-content").className+=" chrome":1==i?document.getElementById("body-content").className+=" IE":1==n?document.getElementById("body-content").className+=" Safari":1==r?document.getElementById("body-content").className+=" Edge":1==t?document.getElementById("body-content").className+=" Firefox":1==e&&(document.getElementById("body-content").className+=" Opera")}function h(){var n=e.GetStartUpPageProperties(),i=n.Text[e.GetSurveyLanguage()]||n.Text[e.GetDefaultLanguage()],r=n.Description[e.GetSurveyLanguage()]||n.Description[e.GetDefaultLanguage()],a=n.Media[e.GetSurveyLanguage()]||n.Media[e.GetDefaultLanguage()],o=n.ButtonText[e.GetSurveyLanguage()]||n.ButtonText[e.GetDefaultLanguage()],s="";e.IsStartUpMediaEnabled()&&(e.GetStartUpMediaType()==t.MediaType.Picture?s+="<img class='img-responsive display-inline-block' src='"+a+"' />":e.GetStartUpMediaType()==t.MediaType.Video&&(s+='<iframe class="video-responsive" src="'+a+'"></iframe>'));var l="";return l+=["<div class='start-up-wrapper column col-12' style='padding: 0px'>","<div class='content-wrap empty padding-5' style='background: none;'>","<div class='img-wrapper'>",s,"</div>","<div class='text-wrapper'>","<p class='empty-title' style='font-size: 1.5rem; font-weight: 500;'>"+i+"</p>","<div class='empty-subtitle'>"+r+"</div>","<div>","<span class='prev-next clickable empty-action' ng-click='CloseStartUpPage()' title='Start Survey'>"+o+"</span>","</div>","</div>","</div>","</div>"].join("")}function m(){return"<h1 class='endMsg font-size-XXlg card text-center' id='waitText' style='font-weight:normal'><b>Please wait while we are saving your answers....</b><br>"}function S(e){return 404==e?'<section class="error-container">\n    <span>4</span>\n    <span class="err-zero"><span class="screen-reader-text">O</span></span>\n    <span class="err-number" style="margin-left: -18px;" class="err-number">4</span>\n</section><section style="height: 100px;font-size: 3rem;width: 70%; margin: 0px auto;" class="error-container"><span class="err-msge">The page you are looking for might have been removed, had its name changed, or is temporarily unavailable.</span></section>':'<section class="error-container">\n    <span>5</span>\n    <span class="err-zero"><span class="screen-reader-text">O</span></span>\n    <span class="err-zero"><span class="screen-reader-text">O</span></span>\n</section><section style="height: 100px;font-size: 3rem;" class="error-container"><span class="err-msge">Sorry! something went wrong at our side.</span></section><section style="height: 90px;font-size: 2rem;" class="error-container"><span onclick="location.reload()" class="err-msge err-rl-btn">Reload</span></section>'}var O=this;O.SurveyMode,O.GetHeader=n,O.GetSectionName=a,O.GetToast=o,O.GetQuestion=l,O.GetSurveyEnd=c,O.GetNavButtons=d,O.GetFooter=g,O.EndNodeFooter=p,O.GetAuthView=v,O.GetNextNavButton=u,O.GetLanguageSelectorView=b,O.AdjustHeight=f,O.DetectBrowser=y,O.ShowAudioListener=s,O.GetStartUpLayout=h,O.GetWaitingView=m,O.GetErrorView=S,window.closeRecording=function(){document.getElementById("recording-toast").style.display="none"}}e.module("SurveyEngineCore").service("SurveyEngine.UIService",["SurveyEngine.SurveySettings","SurveyEngine.Enums",t])}(angular),function(e){"use strict";function t(e,t,n){function i(e){b.API=e+"/"}function r(e,n){var i,r=t.defer();return setTimeout(function(){if(-1!=e.indexOf("GetAllQuestions")){if("function"==typeof DataService.getFullQuestionnaire)return i=DataService.getFullQuestionnaire(e),void(""==i?r.reject():r.resolve(i));r.reject()}else if(-1!==e.indexOf("SurveyProperties"))i=DataService.getSurveyProperties(e);else if(-1!==e.indexOf("SurveyTree"))i=DataService.getSurveyTree(e);else if(e.indexOf("Data")>-1)i=DataService.getRespondent();else if(e.indexOf("Quota")>-1){e=e.replace("Quota","Quotas");var t=DataService.readJson(e);i={},i.Quota=JSON.parse(t),r.resolve(i)}else i=DataService.readJson(e);null!=i&&""!=i&&(i=JSON.parse(i)),r.resolve(i)}),r.promise}function a(e,n){var i=t.defer();return setTimeout(function(){if("object"==typeof n){var t=e.split("=")[1];DataService.updateRespondent(JSON.stringify(n),t)}i.resolve(n)}),i.promise}function o(e,n){var i=t.defer();return setTimeout(function(){void 0!=n&&""!=n&&(n=JSON.stringify(n)),DataService.createRespondent(n),i.resolve()}),i.promise}function s(){return DataService.getOS()}function l(e,n,i,r){var a,o=t.defer();return setTimeout(function(){a=DataService.performFileSearch(i,r),o.resolve(a)}),o.promise}function c(e){var n,i=t.defer();return setTimeout(function(){n=DataService.getFilePath(e),i.resolve(n)}),i.promise}function d(e,t){"function"==typeof DataService.startAudioRecording&&DataService.startAudioRecording(e,t)}function u(){"function"==typeof DataService.stopAudioRecording&&DataService.stopAudioRecording()}function p(e,t){"function"==typeof DataService.closeWebview&&DataService.closeWebview(e,t)}function g(){if("function"==typeof DataService.getLat)return parseFloat(DataService.getLat())}function v(){if("function"==typeof DataService.getLong)return parseFloat(DataService.getLong())}var b=this,f="";b.MediaUrl="https://rebuscloudlivestorage.blob.core.windows.net/rebuscloud-v3-live-blobcontainerpublic/",b.SetSurveyAPI=i,b.SurveyAPI="",b.Get=r,b.Put=a,b.PostAndGetHeaders=o,b.GetOS=s,b.SaveMedia=l,b.GetMedia=c,b.StartRecording=d,b.StopRecording=u,b.Version=1,b.SetAPIPath=function(e,t){f=APIPathConstants.BaseURL+"v3/Subscriptions/"+t+"/Projects/"+e},b.CloseWebview=p,b.GetLatitude=g,b.GetLongitude=v,b.GetOTP=function(n,i,r){var a=t.defer(),o=f+"/otp/"+n+"/"+i+"?mode="+r,s=e.get(o);return s.success(function(e){a.resolve(e)}),s.error(function(e){a.reject(e)}),a.promise}}e.module("SurveyEngineCore").service("EngineCore.IOService",["$http","$q","SurveyEngine.Enums",t])}(angular),function(e){"use strict";function t(){var e=this,t=[],n=null,i=null,r=null,a=null,o=null;e.AddStartUpPageCallback=function(e){o=e},e.AddResetMovementCallback=function(e){a=e},e.AddValidationCallback=function(e){"function"==typeof e&&t.push(e)},e.AddPostValidationCallback=function(e){n=e},e.AddWarningCallback=function(e){i=e},e.AddBeforeBackMoveCallback=function(e){r=e},e.RunValidation=function(){for(var e=0;e<t.length;e++)"function"==typeof t[e]&&t[e]()},e.RunPostValidation=function(e,t){"function"==typeof n&&n(e,t)},e.ShowWarning=function(e){"function"==typeof i&&i(e)},e.ResetMovement=function(){"function"==typeof i&&a()},e.RunBeforeBack=function(){return"function"==typeof r&&r()},e.DrawStartUpPage=function(){"function"==typeof o&&o()},e.Flush=function(){t.length=0,n=null}}e.module("SurveyEngineCore").service("SurveyEngine.PageRouteService",["SurveyEngine.Enums",t])}(angular),function(e){"use strict";function t(t,n,i){function r(e,t){var i=new Chance;switch(e.VariableType){case n.VariableType.SingleChoice:var r=[];for(var a in e.Options)r.push(a);return Array.isArray(t)&&(r=r.filter(function(e){return!t.hasItem(e)})),0==r.length?[]:i.pickset(r,1);case n.VariableType.MultipleChoice:var r=[];for(var a in e.Options)r.push(a);return 0==r.length?[]:i.pickset(r,2);case n.VariableType.Text:var o,s=e.Properties.Min||0,l=e.Properties.Max||100,c=e.Properties.RegexValue1;if(c){o=new RandExp(c).gen()}else{var d=i.integer({min:s,max:l});o=i.word({length:d})}return[o];case n.VariableType.Numeric:var u,s=e.Properties.Min||0,l=e.Properties.Max||1e3,p="Decimal"==e.Properties.Decimal;return u=p?i.floating({min:s,max:l,fixed:e.Properties.DecimalPlacesCount}):i.integer({min:s,max:l}),[u];case n.VariableType.DateTime:var g,v=e.Properties.StartDate,b=e.Properties.EndDate;if(v&&b){var f=new Date(v).getTime(),y=new Date(b).getTime();g=i.integer({min:f+1,max:y-1})}return"number"==typeof g?[new Date(g)]:[i.date()]}}function a(){for(var e=0;e<p.TestResponses.length;e++)for(var t in p.TestResponses[e])if(t in g)if(p.TestResponses[e][t].VariableType==n.VariableType.SingleChoice||p.TestResponses[e][t].VariableType==n.VariableType.MultipleChoice)for(var i=0;i<p.TestResponses[e][t].Values.length;i++)g[t][p.TestResponses[e][t].Values[i]]?g[t][p.TestResponses[e][t].Values[i]]++:g[t][p.TestResponses[e][t].Values[i]]=1;else g[t]++;else if(p.TestResponses[e][t].VariableType==n.VariableType.SingleChoice||p.TestResponses[e][t].VariableType==n.VariableType.MultipleChoice){g[t]={};for(var i=0;i<p.TestResponses[e][t].Values.length;i++)g[t][p.TestResponses[e][t].Values[i]]=1}else g[t]=1;console.log(g)}function o(e){var t="<div style='padding: 20px 40px;'><span style='font-weight: bold;'>"+e.Name+" : </span>"+e.Text["en-us"]+"</div>";switch(e.VariableType){case n.VariableType.SingleChoice:case n.VariableType.MultipleChoice:for(var i in e.Options){var r=g[e.Name][i]||0,a="",o="";l(r)>0&&(a="width: "+l(r)+"%;",o="background: "+s()+";"),t+="<div style='padding: 5px 80px;'><span style='width: 5%;display: inline-block;'>"+i+". </span><span style='width: 30%;display: inline-block;'>"+e.Options[i].Text["en-us"]+"</span><span style='width: 60%;display: inline-block;border: 1px solid whitesmoke;'><span style='display: inline-block;padding: 5px;"+o+a+"'>"+r+"</span></span></div>"}break;case n.VariableType.Text:case n.VariableType.Numeric:case n.VariableType.DateTime:var r=g[e.Name]||0,a="",o="";l(r)>0&&(a="width: "+l(r)+"%;",o="background: "+s()+";"),t+="<div style='padding: 5px 80px;'><span style='width: 5%;display: inline-block;'></span><span style='width: 30%;display: inline-block;'></span><span style='width: 60%;display: inline-block;border: 1px solid whitesmoke;'><span style='display: inline-block;padding: 5px;overflow: hidden;"+o+a+"'>"+r+"</span></span></div>"}return t}function s(){for(var e="BCDEF".split(""),t="#",n=0;n<6;n++)t+=e[Math.floor(Math.random()*e.length)];return t}function l(e){return e/p.TestResponses.length*100}function c(e){return e==n.QuestionType.SimpleGrid||e==n.QuestionType.ComplexGrid||e==n.QuestionType.Distribution||e==n.QuestionType.Distribution2||e==n.QuestionType.Slider||e==n.QuestionType.MaxDiff||e==n.QuestionType.TextGrid}function d(e,n){n.map(function(n){var i=e.Groups[n].VariableSequence.length,r=e.Properties.TotalCount,a=r/i,o=e.Variables[e.Groups[n].VariableSequence[0]],s=t.GetAnswerObject();s.VariableName=o.Name,s.QuestionID=e.ID;var l=a%1;s.Values=[Math.floor(a)],s.VariableType=o.VariableType,t.SaveAnswer(s),e.Groups[n].VariableSequence.slice(1).map(function(i,r){var o=e.Variables[i],s=t.GetAnswerObject();if(s.VariableName=o.Name,s.QuestionID=e.ID,r==e.Groups[n].VariableSequence.length-2){var c=Math.floor(a)+Math.ceil(l*(r+1));">"==e.Properties.TotalOperator||">="==e.Properties.TotalOperator?c+=10:"<"!=e.Properties.TotalOperator&&"<="!=e.Properties.TotalOperator||(c-=10),s.Values=[c]}else s.Values=[Math.floor(a)];s.VariableType=o.VariableType,t.SaveAnswer(s)})})}function u(e){return e[0].map(function(t,n){return e.map(function(e){return e[n]})})}var p=this;p.isTestEnabled=!1,p.MaxTestCount=0,p.AllowSync=!0,p.TestResponses=[];var g={},v={};p.InitTest=function(i){require(["randexp"],function(){for(var r=0;r<i.length;r++){var a,o=[];if(c(i[r].QuestionType)){var s=i[r].Groups;for(var l in s)for(var g=s[l].VariableSequence,v=0;v<g.length;v++)a=i[r].Variables[g[v]],a.QID=i[r].ID,o.push(a)}else{for(var b=i[r].QuestionLevelSequence,f=[],y=[],h=[],m=[],S=[],l=0;l<b.length;l++)if(b[l].ObjectType==n.ObjectType.Variable){if(a=i[r].Variables[b[l].ID])if(a.QID=i[r].ID,i[r].QuestionType===n.QuestionType.HeatMap)if(a.VariableType==n.VariableType.Numeric)for(var O in a.AnalysisText)a.AnalysisText[O].indexOf("._1")>-1&&f.push(a);else f.push(a);else o.push(a)}else if(b[l].ObjectType==n.ObjectType.Attribute){var P=i[r].Attributes[b[l].ID];i[r].QuestionType==n.QuestionType.Rank||i[r].QuestionType==n.QuestionType.RankAndSort?P.GroupSequence.map(function(e,t){t>0||i[r].Groups[e].VariableSequence.map(function(e){var t=i[r].Variables[e];t.QID=i[r].ID,y.push(t)})}):i[r].QuestionType==n.QuestionType.NumericGrid&&i[r].Properties.ShowAs==n.ShowAsProperty.ConstantSum&&("RowTotal"==i[r].Properties.Total?d(i[r],P.GroupSequence):"ColumnTotal"==i[r].Properties.Total&&(m.push(P.GroupSequence),P.GroupSequence.map(function(e){S.push(i[r].Groups[e].VariableSequence)})))}if(m.length>0&&S.length>0){var I=u(m),x=u(S);I.map(function(t){t.map(function(t,n){0==n&&x.map(function(n){var a=e.copy(i[r]);a.Groups[t].VariableSequence=n,d(a,[t])})})})}for(var q in i[r].Groups)"object"==typeof i[r].Groups[q]&&i[r].Groups[q].Text["en-us"].indexOf("rank_holder")>-1&&i[r].Groups[q].VariableSequence.map(function(e){var t=i[r].Variables[e];t.QID=i[r].ID,h.push(t)});if(f.length>0&&p.GenerateTest(f),h.length>0&&y.length>0){var w=[];h.map(function(e,n){p.GenerateTest([e],w);var i=t.GetVariableAnswers(e.Name)[0];w.push(i);var r=y[i-1],a=t.GetAnswerObject();a.VariableName=r.Name,a.QuestionID=r.QID,a.Values=[n+1],a.VariableType=r.VariableType,t.SaveAnswer(a)})}}p.GenerateTest(o)}console.log(t.GetAnswers())})},p.GenerateTest=function(e,a){var o=[],s=[];for(var l in e){var c=[],d=i.getQuesObject(e[l].QID.split("|")[0]),u=r(e[l],a);if(d.QuestionType==n.QuestionType.HeatMap)if(0==l)u=[u[0]];else{var g=e[l],b=e[0],f=t.GetVariableAnswers(b.Name),y=[],h=[],m=b.Options[f[0]];"object"==typeof m.heatMapConfig&&(y[0]=m.heatMapConfig.left+1,y[1]=m.heatMapConfig.top+1,h[0]=m.heatMapConfig.left+m.heatMapConfig.width-1,h[1]=m.heatMapConfig.top+m.heatMapConfig.height-1),1==l?(g.Properties.Min=y[0],g.Properties.Max=h[0],u=r(g)):2==l&&(g.Properties.Min=y[1],g.Properties.Max=h[1],u=r(g))}if(d.QuestionType==n.QuestionType.MaxDiff){if(!(o.length<2)||s.hasItem(e[l].Name))continue;u=u.map(function(e){return o.hasItem(1)?2:o.hasItem(2)?1:e})}for(var S in e[l].Options)if(u.hasItem(S)&&e[l].Options[S].IsOther)c.push(e[l].Options[S].OtherVariableID);else if(u.hasItem(S)&&e[l].Options[S].IsExclusive){u=[S],c=[],e[l].Options[S].IsOther&&c.push(e[l].Options[S].OtherVariableID);break}for(var O=0;O<c.length;O++){try{d.Variables[c[O]].QID=e[l].QID}catch(e){console.log(e)}p.GenerateTest([d.Variables[c[O]]])}var P=e[l].Name.split(".");P.length>1&&(v.hasOwnProperty(P[0])||(v[P[0]]=[]),v[P[0]].hasItem(P[1])||v[P[0]].push(P[1]));var I=t.GetAnswerObject();I.VariableName=e[l].Name,I.QuestionID=e[l].QID,I.Values=u,I.VariableType=e[l].VariableType,I.DisplayedValues=Object.keys(e[l].Options),t.SaveAnswer(I),o=o.concat(u),s.push(e[l].Name)}},p.GenerateReport=function(){a();for(var t=i.getSurveyTreeQuestionIds(),n="",r=0;r<t.length;r++){var s=i.getQuesObject(t[r]);if(s.hasOwnProperty("Name")&&s.hasOwnProperty("Text")){n+="<div style='padding:20px;font-family: sans-serif;border: 1px solid whitesmoke; box-shadow: 1px 1px 1px #eae9e9;border-radius: 4px;margin-bottom: 20px;'><span style='font-weight: bold;'>"+s.Name+" : "+s.Text["en-us"]+"</span>";for(var l in s.Variables)if(g.hasOwnProperty(s.Variables[l].Name))n+=o(s.Variables[l]);else if(v.hasOwnProperty(s.Variables[l].Name))for(var c=0;c<v[s.Variables[l].Name].length;c++){var d=e.copy(s.Variables[l]);d.Name+="."+v[s.Variables[l].Name][c],n+=o(d)}n+="</div>"}}return n}}e.module("SurveyEngineCore").service("EngineCore.TestGenerator",["SurveyEngine.RespondentService","SurveyEngine.Enums","EngineCore.SurveyTreeService",t])}(angular),function(e){e.module("SurveyEngine").constant("SurveyEngine.Enums",{SurveyClosed:{Open:1,Closed:2},SurveyType:{Live:1,Test:2},SurveyMode:{New:1,Resume:2,Review:3,Preview:4,View:5},SurveyStatus:{Partial:1,Completed:2,Terminated:3},BackCheckStatus:{NotDone:1,Accepted:2,Rejected:3},Channel:{AnonymousLink:1,AnonymousEmailCampaignLink:2,PersonalizedEmailCampaignLink:3,PersonalizedLink:4,OfflineAnonymous:5,OfflinePersonalized:6,AutoPersonalizedEmails:7,DataUpload:8,AnonymousSMSCampaignLink:9,PersonalizedSMSCampaignLink:10,FacebookLink:11,TwitterLink:12,LinkedinLink:13,GooglePlusLink:14,PanelLink:15},VariableType:{SingleChoice:1,MultipleChoice:2,Text:3,Numeric:4,DateTime:5},SequenceType:{InOrder:1,InRandomOrder:2,PickNInRandomOrder:3},QuestionType:{SingleChoice:1,MultipleChoice:2,Text:3,Numeric:4,DateTime:5,Rank:6,RankAndSort:7,Slider:8,NPS:9,Display:10,SimpleGrid:11,ComplexGrid:12,TextGrid:13,NumericGrid:14,BipolarGrid:15,MaxDiff:16,Smiley:17,Stars:18,MultimediaCapture:19,ConstantSumGrid:20,Distribution:21,LikeDislike:22,HeatMap:23,HeatZone:24,AutocodeText:25,OTP:26,Distribution2:27},QuestionCategory:{System:1,Survey:2,Sample:3,Calculated:4,External:5},LoopIterationType:{AllAnswered:1,TopNAnswered:2,PickRandomN:3,Numeric:4,DateTime:5},LoopChoice:{QuestionBased:3,Fixed:4},LoopChoiceSelection:{InOrder:1,Randomly:2},SurveyObjectType:{Question:1,Section:2,List:4,Script:5,PageBreak:6,Sequencer:7,Jump:8,SetValue:9,SurveyEnd:13,Quota:23},MetadataProperty:{ETag:1,CreatedOn:2,CreatedBy:3,ModifiedOn:4,ModifiedBy:5,IsDeleted:6,DeletedOn:7,DeletedBy:8},ShowAsProperty:{Radio:1,DropBox:2,CheckBox:3,SelectBox:4,MultiSelectBox:5,NumberBox:6,DragAndDrop:7,PickAndSort:8,RankIntoGroups:9,Rank:10,ConstantSum:11,SingleLine:12,MultiLine:13,SingleSelectImage:14,MultipleSelectImage:15,SingleSelectLonglist:17,MultiSelectLonglist:18},ObjectType:{Question:1,Section:2,SurveyTree:3,List:4,Script:5,PageBreak:6,Sequencer:7,Jump:8,SetValue:9,Variable:10,AttributeHeader:11,Attribute:12,SurveyEnd:13,CarryForward:18,Group:20,Quota:23},SectionObjectType:{Question:"Question",Section:"Section",Logic:"Logic",Jump:"Jump"},DisplayFlag:{Hidden:1,Mandatory:2,QuestionMasking:4,OptionMasking:8,ValidationScript:16,IsLoop:32,Deleted:64},ScriptType:{QuestionMasking:1,OptionMasking:2,Jump:3,Validation:4,SetValue:5,GroupMasking:6,AttributeMasking:7,VariableMasking:8,OptionCarryForwardScript:9,AttributeCarryForwardScript:10,OptionShow:11},ValidationType:{NoValidation:-1,Valid:1,InValid:0,AutoCodeConflict:2,AutoCodeSimilarity:3,SkipValidation:99},Mandatory:{NotMandatory:1,WarnAndContinue:2,Mandatory:3},MediaType:{Picture:1,Audio:2,Video:3,Text:4},ProgressBar:{None:1,WithText:2,WithoutText:3},ShowProgressAs:{Percentage:"percentage",Text:"text"},CarryForwardFromToReferenceType:{OptionToOption:1,OptionToAttribute:2,AttributeToOption:3,AttributeToAttribute:4},CarryForwardReferenceType:{Option:1,Attribute:2},HeatmapProperties:{HiddenUntilHover:1,AlwaysVisible:2,AlwaysHidden:3},QuotaMetAction:{EndSurvey:1,EndSurveyAndPanelRedirect:2,JumpTo:3},TimeoutAction:{AutoMove:1,ShowText:2},NPS:{Detractor:1,Passive:2,Promoter:3}})}(angular),function(e){"use strict";e.module("SurveyEngine").constant("SurveyEngine.APIPathConstants",{BaseURL:"https://beta-v3-live-webrole.rebuscode.com/",MediaUrl:"https://rebuscloudlivestorage.blob.core.windows.net/rebuscloud-v3-live-blobcontainerpublic/",AppInsightsKey:"3d1450ae-2f66-4c46-9179-658a57d7f223"})}(angular),function(e){"use strict";function t(t,n,i,a,o,s,l,c,d,u,p,g,v,b,f,y,h,m,S){function O(e){if(t.$emit("OnBackCheckStatusChange"),c.IsBackCheckChangeJumpEnabled()){var n=c.GetBackCheckJumpNode(e);null!=n?(a.setNextSurveyTreePointer(D(n,null,!0)),t.GoNext(),p.CloseWebview(e,!1)):(parent.postMessage("loader###","*"),l.SaveRespondent("ReviewSave").then(function(){parent.postMessage("review###"+e,"*"),p.CloseWebview(e,!0)}))}else parent.postMessage("loader###","*"),l.SaveRespondent("ReviewSave").then(function(){parent.postMessage("review###"+e,"*"),p.CloseWebview(e,!0)})}function P(e){if("receiver2"==e){parent.document.getElementById("receiver").contentWindow.postMessage("moveback###"+JSON.stringify(o.MOVE_BACKWARD),window.location.href)}else{parent.document.getElementById("receiver2").contentWindow.postMessage("moveback###"+JSON.stringify(o.MOVE_BACKWARD),window.location.href)}}function I(){function e(){var e=a.getNextSurveyTreeNode(),n=e.SurveyObjectID||e.ID,i=a.getParentNodeID(n),r=new NodePointer(i,n,null);a.setNextSurveyTreePointer(r),t.GoNext()}var n=null;t.Navigation.isBackDisabled=c.IsBackButtonDisable,0===o.getTraversalList().length?t.Navigation.isBackDisabled=!0:t.Navigation.isBackDisabled=c.IsBackButtonDisable||!1,h.Flush(),m.ResetErrorCallbacks(),f.removeListeners(),a.getCurrentSurveyTreeNode().then(function(i){if(re.destroyView(),ne.SECTION_ID=null,t.PageBufferObject=[],!(n=i))return x();if(n.IconFlag&&(n.IconFlag&s.DisplayFlag.Deleted)===s.DisplayFlag.Deleted||(n.IconFlag&s.DisplayFlag.Hidden)===s.DisplayFlag.Hidden)return void e();var r=n.SurveyObjectType||n.ObjectType,o=n.SurveyObjectID||n.ID;switch(r){case s.ObjectType.Sequencer:t.IsReviewedAtEnd=!1,i.SequenceType!=s.SequenceType.InOrder&&k(i,r),i.SequenceType=s.SequenceType.InOrder;var l,c,d=i.Children.length>0?i.Children[0]:null;if(null==d){var u=a.getNextSurveyTreeNode();c=u.SurveyObjectID||u.ID;var p=a.getParentNodeID(c);l=new NodePointer(p,c,null)}else c=d.SurveyObjectID||d.ID,l=new NodePointer(o,c,null);a.setNextSurveyTreePointer(l),t.GoNext();break;case s.ObjectType.SetValue:case s.ObjectType.Jump:t.IsReviewedAtEnd=!1,a.getSurveyTreeScript(o).then(function(n){if("object"==typeof n){var i=T(n);a.setNextSurveyTreePointer(i),t.GoNext()}else e()});break;case s.ObjectType.Section:t.IsReviewedAtEnd=!1,q(o);break;case s.ObjectType.SurveyEnd:x(o);break;case s.ObjectType.Quota:a.getQuotaNode(o).then(function(e){U(e.Quota)})}})}function x(e){!c.IsEndReviewEnabled()&&ne.SurveyMode!=s.SurveyMode.View||d.isTestEnabled?a.getSurveyEndNode(e).then(function(e){C(e,re.setSubmitButtonOnEnd(c.IsSubmitButtonEnabled()))}):t.IsReviewedAtEnd?a.getSurveyEndNode(e).then(function(e){C(e,re.setSubmitButtonOnEnd(c.IsSubmitButtonEnabled()))}):(re=new $,re.reviewResponses())}function q(n){function r(e){if(o.getMovement()==o.MOVE_BACKWARD){var n=e.QuestionLevelSequence[e.QuestionLevelSequence.length-1].ID;0===o.getTraversalList().length&&1==e.QuestionLevelSequence.length?t.Navigation.isBackDisabled=!0:t.Navigation.isBackDisabled=!1,o.setAttrPointer(n)}else o.setAttrPointer(e.QuestionLevelSequence[0].ID)}var u=i.defer();return a.getSection(n).then(function(n){function i(){var e;e=0==v.length?a.getNextSurveyTreeNode(999999):a.getNextSurveyTreeNode(h);var t=e.SurveyObjectID||e.ID,n=a.getParentNodeID(t);return new NodePointer(n,t,null)}function p(){null==f&&(f=i()),a.setNextSurveyTreePointer(f)}if(n.IconFlag&&(n.IconFlag===s.DisplayFlag.Deleted||(n.IconFlag&s.DisplayFlag.Deleted)===s.DisplayFlag.Deleted))return p(),t.GoNext(),void u.resolve();a.setCurrentSectionName(n.Name),t.ShowSectionName=n.ShowTitle;var g=n;ne.SECTION_ID=g.ID;var v=[],b=a.getChildIndex();l.SetPossibleLoopIterations([]),g.Sequencer.SequenceType!=s.SequenceType.InOrder&&(k(g,s.ObjectType.Section),g.Sequencer.SequenceType=s.SequenceType.InOrder),g.IsLoopEnabled&&(g=e.copy(g),w(g,b)),v=g.Children,re=new $,0===o.getTraversalList().length&&c.IsLanguageSelectorEnabled()&&!re.isLanguageSelectEnabled()&&(t.Navigation.isBackDisabled=c.IsBackButtonDisable||!1,re.setLanguageSelector(!0));for(var f=null,y=a.getParentNodeID(g.ID),h=b;h<v.length;h++){var m=v[h],S=m.SurveyObjectType||m.ObjectType;if(S==s.SurveyObjectType.PageBreak){if(null==(f=V(g.ID,v,h,re.size())))continue;break}if(re.size()==c.QuestionPerPage){f=new NodePointer(y,g.ID,m.ID||m.SurveyObjectID);break}if(S==s.ObjectType.Script){var O=Q(m.Body);if(m.Type===s.ScriptType.Jump){re.containsAny(O)?f=new NodePointer(y,g.ID,v[h].ID):!(f=T(m,null,h+1))&&h+1<v.length&&(f=new NodePointer(y,g.ID,v[h].ID));break}if(m.Type===s.ScriptType.SetValue){if(re.containsAny(O)){f=new NodePointer(y,g.ID,v[h].ID);break}T(m)}}if("object"==typeof m.Quota&&m.Quota.ObjectType==s.ObjectType.Quota){if(re.size()>0){f=new NodePointer(y,g.ID,v[h].ID);break}if(h<v.length-1){var P=v[h+1].ID||v[h+1].SurveyObjectID;P||"object"!=typeof v[h+1].Quota||(P=v[h+1].ID),f=new NodePointer(y,g.ID,P)}else h++,f=i();return a.setNextSurveyTreePointer(f),U(m.Quota),void u.resolve()}if(S==s.ObjectType.Question){if(!m.hasOwnProperty("ObjectType")){var I=m.SurveyObjectID;f=new NodePointer(y,g.ID,I);break}var x=e.copy(m),q=x.Name.split(".")[1];q&&l.SetCurrentIteration(q),re.initializeMaskingBit(x);var M=A(x);a.setCfQuestion(x);var j=!1;if(x.hasOwnProperty("CarryForwardConfiguration")&&Array.isArray(x.CarryForwardConfiguration.ParentQuestions))for(var D=0;D<x.CarryForwardConfiguration.ParentQuestions.length;D++)j=j||re.containsQuestionByID(x.CarryForwardConfiguration.ParentQuestions[D].QuestionGUID);if(m.ShowInSurvey){if(re.containsAny(x.MaskingVariableIDs)||j){f=new NodePointer(y,g.ID,x.ID);break}if(M)continue;if(re.add(x),x.Properties.MobileFriendly||(x.Properties.MobileFriendly="false"),x.QuestionType==s.QuestionType.SimpleGrid&&"true"==x.Properties.MobileFriendly&&window.jsrcb.isMobile){if(r(x),h<v.length-1){var P=v[h+1].ID||v[h+1].SurveyObjectID;f=new NodePointer(y,g.ID,P)}else h++,f=null;break}}}}if(p(),re.hasQuestions())if(t.PageBufferObject=re.getBuffer(),ne.SECTION_ID=g.ID,ne.SurveyMode==s.SurveyMode.View){for(var C=0;C<t.PageBufferObject.length;C++)t.ReviewScrollService.addQuestion(t.PageBufferObject[C]);t.GoNext()}else d.isTestEnabled?re.runTest():re.renderView(),u.resolve();else t.GoNext()}),u.promise}function w(t,n){function i(e,t,n){var i=[];return i="function"==typeof window.r(e)[t]?n?window.r(e)[t](n):window.r(e)[t]():l.GetVariableAnswers(e),Array.isArray(i)||(i=[i]),i}var r,o=[],d=[],u=[],p=0,g=t.Children;if(t.Children=[],t.LoopChoice===s.LoopChoice.QuestionBased){var v=t.LoopVariableName,b=function(){var e=[],n=a.getQuesObject(t.LoopQuestionGUID),r=t.LoopVariableName,s=t.LoopFunctionName,c=t.LoopOptionCode;if("all"==r&&"object"==typeof n){var d=[];if(Object.keys(n.Attributes))for(var u=0,p=0;p<n.QuestionLevelSequence.length;p++)for(var g=n.Attributes[n.QuestionLevelSequence[p].ID],v=0;v<g.GroupSequence.length;v++)for(var b=n.Groups[g.GroupSequence[v]],f=0;f<b.VariableSequence.length;f++){u++;var y=i(n.Variables[b.VariableSequence[f]].Name,s,c);""!=s?"boolean"==typeof y[0]?(t.FunctionNegation&&!y[0]||!t.FunctionNegation&&y[0])&&(d=l.Union(d,[u]),o=window.r(n.Variables[b.VariableSequence[f]].Name).AllValues()):("UnSelectedValues"==s?(0==d.length&&(d=y),d=l.Intersect(d,y)):d=l.Union(d,y),o=window.r(n.Variables[b.VariableSequence[f]].Name).AllValues()):(y.push(u),d=l.Union(d,y),
o=window.r(n.Variables[b.VariableSequence[f]].Name).AllValues())}else for(var h in n.Variables)o=window.r(n.Variables[h].Name).AllValues(),d=l.Union(d,i(n.Variables[h].Name,s,c));e=d}else o=window.r(r).AllValues(),e=i(r,s,c);return e}(),f=l.GetVariableType(v);if(f==s.VariableType.SingleChoice||f==s.VariableType.MultipleChoice||null==f)o.filter(function(e){return!!b.hasItem(e)||(u.push(e),!1)}),d=b.slice(0),r=o.length;else{if(f!=s.VariableType.Numeric)return void console.log("Skipping Loop either variable is non categorical or it is not present in the respondent.");for(var y=1;y<=b[0];y++)d.push(y);r=t.MaxIterations;for(var y=1;y<=r;y++)o.push(y);u=o.filter(function(e){return!d.hasItem(e)})}}else for(var y=1;y<=t.LoopChoiceCount;y++)d.push(y);if(p=d.length>r?r:d.length,t.LoopChoiceSelection==s.LoopChoiceSelection.Randomly){var h=l.GetSeed(),m=new Chance(h);d=m.shuffle(d)}window.r(t.LoopCountVariable).SetValue(t.LoopCountQuestionID,s.VariableType.Numeric,p),l.SetPossibleLoopIterations(d);for(var S=0;S<p;S++){for(var O=0;O<g.length;O++){var P=e.copy(g[O]),I=(P.SurveyObjectID||P.ID)+"|"+d[S],x=g[O].ObjectType||g[O].SurveyObjectType;if(x===s.ObjectType.Question){for(var q=P.Text[c.GetSurveyLanguage()]||P.Text[c.GetDefaultLanguage()],w=q.split(/\{\{(.*?)\}\}/),T="",M=0;M<w.length;M++){var j="";if(M%2==1){var j,D=w[M],k=D.split("."),V=k[0];j=k.length>1?V+"."+k[1].split("(")[0]+"("+d[S]+")":V,T+=" {{"+j+"}} "}else T+=w[M]}P.Text[c.GetSurveyLanguage()]=T,P.Name=g[O].Name+"."+d[S],P.ID=I;for(var C in P.Variables){P.Variables[C].Name=g[O].Variables[C].Name+"."+d[S];for(var L=0;L<u.length;L++){var A=g[O].Variables[C].Name+"."+u[L];l.SetMaskingBit(A,!0)}}}else if(x===s.ObjectType.PageBreak)P.SurveyObjectID=I;else if(x==s.ObjectType.Script)P.ID=I;else{if(!P.hasOwnProperty("Quota")||P.Quota.ObjectType!=s.ObjectType.Quota)continue;P.ID=I,P.Quota.ID=I,a.setQuotaNode(I,P)}a.addQuestionIndex(I,t.Children.length),t.Children.push(P)}var N=new PageBreak;a.addQuestionIndex(N.SurveyObjectID,t.Children.length),t.Children.push(N)}for(var S=n;S<t.Children.length;S++)if(t.Children[S].ObjectType==s.ObjectType.Question){var k=t.Children[S].Name.split(".");if(k.length>1){l.SetCurrentIteration(k[1]);break}}a.createIndexes(t.Children,t.ID,!0)}function T(e,t,n){var r,o=e.Type,l=e.Body;if(e.hasOwnProperty("ScriptResult"))r=e.ScriptResult;else try{r=(0,eval)(l),r instanceof i&&r.then(function(e){"function"==typeof e&&e()})}catch(t){if(console.log("Error while evaluating script (ID : "+e.ID+"). Check for syntax errors."),ne.SurveyMode!=s.SurveyMode.Preview)return o!==s.ScriptType.QuestionMasking&&(o===s.ScriptType.OptionMasking?[]:new NodePointer(null,null,null));if(re.enableRuntimeAlert(e,t),r={},o===s.ScriptType.QuestionMasking)return!1;if(o===s.ScriptType.OptionMasking)return[];var c=a.getNextSurveyTreeNode(n);if(!(c.hasOwnProperty("ObjectType")||c.hasOwnProperty("SurveyObjectType")&&c.SurveyObjectType==s.SurveyObjectType.PageBreak)){var d=c.SurveyObjectID||c.ID,u=a.getParentNodeID(d);return new NodePointer(u,d,null)}r.ID=c.ID||c.SurveyObjectID,r.Type=c.ObjectType||c.SurveyObjectType}switch(o){case s.ScriptType.QuestionMasking:if(r&&t)for(var p=0;p<t.MaskingVariableIDs.length;p++){var g=t.MaskingVariableIDs[p].split(".");if(g.length>1){var v=g[g.length-1],b=t.Name.split("."),f=b[b.length-1];if(v!==f)return!1}var y=[];for(var p in t.Variables)y.push(t.Variables[p].Name);j(y)}return r;case s.ScriptType.OptionMasking:case s.ScriptType.OptionShow:return r||[];case s.ScriptType.Jump:return D(r,n);case s.ScriptType.SetValue:var h=a.getNextSurveyTreeNode(n),m=h.SurveyObjectID||h.ID,S=a.getParentNodeID(m);return new NodePointer(S,m,null);case s.ScriptType.AttributeMasking:case s.ScriptType.GroupMasking:case s.ScriptType.VariableMasking:case s.ScriptType.Validation:case s.ScriptType.AttributeCarryForwardScript:case s.ScriptType.OptionCarryForwardScript:return r}return null}function M(e,t,n){return o.getOrphanVariables(e,t,n)||[]}function j(e){var t=l.GetAnswers();for(var n in t)e.indexOf(n)>-1&&l.SetMaskingBit(n,!0)}function D(e,t,n){if(!e.ID){var i=a.getNextSurveyTreeNode(t,o.getLoopIterations(ne.SECTION_ID));if(!(i.hasOwnProperty("ObjectType")||i.hasOwnProperty("SurveyObjectType")&&i.SurveyObjectType==s.SurveyObjectType.PageBreak)){var r=i.SurveyObjectID||i.ID,l=a.getParentNodeID(r);return new NodePointer(l,r,null)}e.ID=i.ID||i.SurveyObjectID,e.Type=i.ObjectType||i.SurveyObjectType}if(e.IconFlag===s.DisplayFlag.IsLoop)return null;var c=(new NodePointer(null,null,null),o.getTraversalListPointer()),d=a.getParentNodeID(e.ID);return null==c||n||j(M(c.NodeID,e.ID,c.ChildNodeID)),e.Type==s.ObjectType.Section||e.Type==s.ObjectType.Sequencer||e.Type==s.ObjectType.SurveyEnd?new NodePointer(d,e.ID,null):new NodePointer(null,d,e.ID)}function k(e,t){function n(t){var n=[],i=[];if(t.Sequencer.SequenceType!=s.SequenceType.InOrder){for(var r=0;r<t.OptionSequence.length;r++)e.Options[t.OptionSequence[r]].IsFixed?n.push(r):i.push(r);var a=o.shuffle(i);t.OptionSequence=_(t.OptionSequence,a,n),t.Sequencer.SequenceType==s.SequenceType.PickNInRandomOrder&&(t.OptionSequence=t.Sequencer.PickCount),t.Sequencer.SequenceType=s.SequenceType.InOrder}return t.OptionSequence}var i=e.Sequencer&&e.Sequencer.SequenceType===s.SequenceType.PickNInRandomOrder,r=l.GetSeed(),o=new Chance(r),c=[];switch(t){case s.ObjectType.Sequencer:case s.SurveyObjectType.Sequencer:for(var d=e.SurveyObjectID||e.ID,u=e.Children,p=0;p<u.length;p++){var t=u[p].ObjectType||u[p].SurveyObjectType;if(t===s.ObjectType.SurveyEnd||t===s.ObjectType.Jump)return}c=o.shuffle(u),i&&(c.length=e.Sequencer.PickCount),a.shuffleNodes(d,c),a.createIndexes(c,d),e.Children=c;break;case s.SurveyObjectType.Section:case s.ObjectType.Section:!function(){for(var t=e.Children,n=[],r=[],l=0;l<t.length;l++){if(t[l].ObjectType===s.ObjectType.Script)return;t[l].IsFixed||t[l].SurveyObjectType===s.SurveyObjectType.PageBreak?n.push(l):r.push(l)}var d=o.shuffle(r);c=_(t,d,n),i&&(c.length=e.Sequencer.PickCount),a.adjustPositionsAfterSequencing(e.ID,c),e.Children=c,a.updateQIndexes(c)}();break;case s.ObjectType.Question:for(var u=e.QuestionLevelSequence,g=[],v=[],p=0;p<u.length;p++)if(u[p].ObjectType==s.ObjectType.Attribute){var b=e.Attributes[u[p].ID];b.hasOwnProperty("IsFixed")&&b.IsFixed?g.push(p):v.push(p)}else v.push(p);var f=o.shuffle(v);c=_(u,f,g),i&&(c.length=e.Sequencer.PickCount),e.QuestionLevelSequence=c;break;case s.ObjectType.Variable:!function(){for(var t=e.VariableLevelSequence,r=[],a=[],l=0;l<t.length;l++)if(t[l].IsOption)e.Options[t[l].ID].IsFixed?r.push(l):a.push(l);else{var c=e.OptionGroups[t[l].ID];c.OptionSequence=n(c),a.push(l)}if(e.Sequencer.SequenceType==s.SequenceType.InRandomOrder||e.Sequencer.SequenceType==s.SequenceType.PickNInRandomOrder){var d=o.shuffle(a);e.VariableLevelSequence=_(t,d,r),i&&(e.VariableLevelSequence.length=e.Sequencer.PickCount),e.Sequencer.SequenceType=s.SequenceType.InOrder}}();break;case s.ObjectType.AttributeHeader:var u=e.AttributeSequence;c=o.shuffle(u),i&&(c.length=e.Sequencer.PickCount),e.AttributeSequence=c}}function V(e,t,n,i){var r=i>0,o=null,s=n+1;if(r&&s<t.length){var l=a.getParentNodeID(e),c=t[s].ID||t[s].SurveyObjectID;o=new NodePointer(l,e,c)}return o}function C(e){if(d.isTestEnabled)d.AllowSync?l.CloseRespondent(s.SurveyStatus.Completed).then(function(){L()}):L();else{var n=new $;n.setSubmitButtonOnEnd(c.IsSubmitButtonEnabled());var i=c.GetSurveyEndText(),r=s.SurveyStatus.Completed,a=n.isSubmitButtonEnabled();if(e?(i=e.Message.Messages[c.GetSurveyLanguage()]||i,r=e.SurveyStatus):e=new EndNode(r),ne.SurveyMode!==s.SurveyMode.Preview&&ne.SurveyMode!==s.SurveyMode.View&&e.SurveyStatus)if(a)n.setEndNode(e),n.setSurveyEndMessage(i),n.setSurveyFooterMessage(i),n.renderView();else{var o=function(e){n.setSurveyEndMessage(e),n.renderView()};t.OnSubmitResponse(encodeURIComponent(i),e,o)}else n.setSurveyEndMessage(i),n.setSurveyFooterMessage(i),n.renderView()}}function L(){function e(){if(t.TestCount<=d.MaxTestCount)I(),console.log(t.TestCount);else if(t.ShowProgress=!1,t.autoTest.text="All the test respondents generated successfully.",!d.AllowSync){var e=window.open();e.document.write(d.GenerateReport()),e.document.close()}}t.TestCount++,t.autoTest.progress++,t.autoTest.text=t.autoTest.progress+" test respondent(s) generated out of "+t.autoTest.max,d.AllowSync||d.TestResponses.push(l.GetAnswers()),l.InitRespondent(c.QueryParameter,c.GetSurveyLanguage(),c.GetQuesVersion()),a.resetSurveyTree(!0),d.AllowSync?l.CreateRespondent().then(function(t){l.GetRespondent(t).then(function(){e()})}):(l.SetRespondentID(t.TestCount),e())}function A(e){if(e.QuestionMaskingScriptID){var t=a.getScript(e.QuestionMaskingScriptID);e.MaskingVariableIDs=Q(t.Body);var n=T(t,e);if(n)return n}switch(e.QuestionType){case s.QuestionType.SingleChoice:case s.QuestionType.MultipleChoice:return N(e);case s.QuestionType.Text:break;case s.QuestionType.SimpleGrid:case s.QuestionType.NumericGrid:case s.QuestionType.TextGrid:case s.QuestionType.ComplexGrid:case s.QuestionType.Rank:case s.QuestionType.RankAndSort:case s.QuestionType.Distribution:case s.QuestionType.Distribution2:case s.QuestionType.ConstantSumGrid:case s.QuestionType.Slider:case s.QuestionType.MaxDiff:return R(e)}}function N(e){for(var t=!1,n=0;n<e.QuestionLevelSequence.length;n++){var i=e.Variables[e.QuestionLevelSequence[n].ID];B(i,E(i,s.CarryForwardReferenceType.Option)),k(i,e.QuestionLevelSequence[n].ObjectType),t=t||F(i,e)}return e.Sequencer.SequenceType!==s.SequenceType.InOrder&&(k(e,s.ObjectType.Question),e.Sequencer.SequenceType=s.SequenceType.InOrder),t}function E(e,t){var n=[];if(t==s.CarryForwardReferenceType.Option){if(e.hasOwnProperty("OptionCarryForwardScriptID")&&null!=e.OptionCarryForwardScriptID){var i=a.getScript(e.OptionCarryForwardScriptID);null!=i&&(n=T(i))}}else if(t==s.CarryForwardReferenceType.Attribute&&e.hasOwnProperty("AttributeCarryForwardScriptID")&&null!=e.AttributeCarryForwardScriptID){var i=a.getScript(e.AttributeCarryForwardScriptID);null!=i&&(n=T(i))}return n}function G(e,t){var n=e.Attributes;for(var i in n){var r=n[i];if(null!=r.LinkID&&Array.isArray(r.LinkID)&&Array.isArray(t))for(var a=0;a<r.LinkID.length;a++){t.hasItem(r.LinkID[a])?r.ShowInSurvey=!0:r.ShowInSurvey=!1;break}}}function B(e,t){for(var n in e.Options)if(null!=e.Options[n].LinkID&&Array.isArray(e.Options[n].LinkID)&&Array.isArray(t))for(var i=0;i<e.Options[n].LinkID.length;i++){t.hasItem(e.Options[n].LinkID[i])?e.Options[n].ShowInSurvey=!0:e.Options[n].ShowInSurvey=!1;break}}function R(t){function n(e,t){var n=a.getScript(e.VariableMaskingScriptID);return!!n&&(Array.isArray(t.MaskingVariableIDs)||(t.MaskingVariableIDs=[]),t.MaskingVariableIDs=t.MaskingVariableIDs.concat(Q(n.Body)),T(n))}!function(){t.Sequencer.SequenceType!==s.SequenceType.InOrder&&(k(t,s.ObjectType.Question),t.Sequencer.SequenceType=s.SequenceType.InOrder);for(var e in t.Groups){var n=t.Groups[e];if("object"==typeof n.Sequencer&&n.Sequencer.SequenceType!=s.SequenceType.InOrder){for(var i=0;i<n.VariableSequence.length;i++){var r=t.Variables[n.VariableSequence[i]];r.Sequencer.SequenceType=n.Sequencer.SequenceType,r.Sequencer.PickCount=n.Sequencer.PickCount,k(r,s.ObjectType.Variable)}n.Sequencer.SequenceType=s.SequenceType.InOrder}}for(var a in t.AttributeHeaders){var o=t.AttributeHeaders[a];o.Sequencer.SequenceType!==s.SequenceType.InOrder&&k(o,s.ObjectType.AttributeHeader)}}();var i=E(t,s.CarryForwardReferenceType.Attribute);G(t,i);var r=function(){var r=[];t.MaskingVariableIDs=t.MaskingVariableIDs||[];for(var o in t.Groups){var l=a.getScript(t.Groups[o].GroupMaskingScriptID);if(l)try{t.MaskingVariableIDs=t.MaskingVariableIDs.concat(Q(l.Body));if(T(l,t)){for(var c in t.Attributes){var d=t.Attributes[c].GroupSequence.indexOf(o);d>-1&&(r=r.concat(t.Attributes[c].GroupSequence.splice(d,1)))}if(t.MasterAttribute&&Array.isArray(t.MasterAttribute.GroupSequence)){var d=t.MasterAttribute.GroupSequence.indexOf(o);d>-1&&(r=r.concat(t.MasterAttribute.GroupSequence.splice(d,1)))}}}catch(e){}if(-1===r.indexOf(o)){for(var u=e.copy(t.Groups[o].VariableSequence),p=[],c=0;c<u.length;c++){var g=t.Variables[u[c]];i=E(g,s.CarryForwardReferenceType.Option),B(g,i),((g.VariableType==s.VariableType.SingleChoice||g.VariableType==s.VariableType.MultipleChoice)&&F(g,t)||g.VariableMaskingScriptID&&n(g,t))&&p.push(c)}if(t.Groups[o].VariableSequence=u.filter(function(e,t){return-1===p.indexOf(t)}),p.length===u.length){for(var c in t.Attributes){var d=t.Attributes[c].GroupSequence.indexOf(o);d>-1&&(r=r.concat(t.Attributes[c].GroupSequence.splice(d,1)))}if(t.MasterAttribute&&Array.isArray(t.MasterAttribute.GroupSequence)){var d=t.MasterAttribute.GroupSequence.indexOf(o);d>-1&&(r=r.concat(t.MasterAttribute.GroupSequence.splice(d,1)))}}}}return r}().concat(function(){t.MaskingVariableIDs=t.MaskingVariableIDs||[];var e=[];for(var n in t.Attributes){var i=a.getScript(t.Attributes[n].AttributeMaskingScriptID),r=!t.Attributes[n].ShowInSurvey;if(i||r)try{var o;if(r?o=r:(t.MaskingVariableIDs=t.MaskingVariableIDs.concat(Q(i.Body)),o=T(i,t)),o){for(var l=[],c=0;c<t.QuestionLevelSequence.length;c++){var d=t.QuestionLevelSequence[c];if(d.ObjectType===s.ObjectType.AttributeHeader){var u=t.AttributeHeaders[d.ID].AttributeSequence.indexOf(n);u>-1&&(e=e.concat(t.AttributeHeaders[d.ID].AttributeSequence.splice(u,1))),t.AttributeHeaders[d.ID].AttributeSequence.length>0?l.push(d):l=l.filter(function(e){return e.ID!==d.ID})}else d.ObjectType===s.ObjectType.Attribute&&(d.ID!==n?l.push(d):e.push(d.ID))}t.QuestionLevelSequence=l}}catch(e){console.log("Error while getting variable from script (ID : "+i.ID+"). Check for syntax errors.")}}for(var p=[],n=0;n<e.length;n++)p=p.concat(t.Attributes[e[n]].GroupSequence);return p}());return function(e){for(var n in t.Groups)for(var i=0;i<t.Groups[n].VariableSequence.length;i++){var r=t.Variables[t.Groups[n].VariableSequence[i]].Name;e.indexOf(n)>-1?l.SetMaskingBit(r,!0):l.SetMaskingBit(r,!1)}}(r),function(e){return t.MasterAttribute?e==Object.keys(t.Groups).length-t.MasterAttribute.GroupSequence.length:e==Object.keys(t.Groups).length}(r.length)}function Q(e){var t=[];try{var n=e.substring(e.indexOf("r(")).split('"');if(1==n.length&&(n=e.substring(e.indexOf("r(")).split("'")),n.length>1)for(var i=1;i<n.length;i+=2)t.push(n[i].replace(new RegExp('"',"g"),"").split(".")[0])}catch(e){}return t}function z(e){var t=[];try{if(Array.isArray(e))for(var n=0;n<e.length;n++)t.push(e[n].SelectedVariable),Array.isArray(e[n].Children)&&e[n].Children.length>0&&(t=t.concat(z(e[n].Children)))}catch(e){}return t}function F(e,t){var n=a.getScript(e.OptionMaskingScriptID),i=[];if(n&&(t.MaskingVariableIDs=Q(n.Body),i=T(n)||[],n.Type==s.ScriptType.OptionShow)){if(H(e,i)){for(var r in t.Variables)t.Variables[r].IsMasking=!0,t.Variables[r].ShowInSurvey=!1,l.SetMaskingBit(t.Variables[r].Name,!0);return!0}return!1}for(var o=e.VariableLevelSequence||[],c=[],d=0;d<o.length;d++)if(o[d].IsOption){if(i.hasItem(o[d].ID))continue;e.Options[o[d].ID].ShowInSurvey&&c.push(o[d])}else{for(var u=e.OptionGroups[o[d].ID].OptionSequence,p=[],g=0;g<u.length;g++)i.hasItem(u[g])||e.Options[u[g]].ShowInSurvey&&p.push(u[g]);p.length>0&&(e.OptionGroups[o[d].ID].OptionSequence=p,c.push(o[d]))}if(0===c.length){for(var r in t.Variables)t.Variables[r].IsMasking=!0,t.Variables[r].ShowInSurvey=!1,l.SetMaskingBit(t.Variables[r].Name,!0);return!0}return e.VariableLevelSequence=c,!1}function H(e,t){for(var n=e.VariableLevelSequence||[],i=[],r=0;r<n.length;r++)if(n[r].IsOption){if(e.Options[n[r].ID].ShowInSurvey){var a=t.getIndexOf(n[r].ID);a>-1&&(i[a]=n[r])}}else{for(var o=e.OptionGroups[n[r].ID].OptionSequence,s=[],l=0;l<o.length;l++){var a=t.getIndexOf(o[l]);a>-1&&e.Options[o[l]].ShowInSurvey&&(s[a]=o[l])}s=s.filter(function(e){return void 0!=e}),s.length>0&&(e.OptionGroups[n[r].ID].OptionSequence=s,i.push(n[r]))}return i=i.filter(function(e){return void 0!=e}),0===i.length||(e.VariableLevelSequence=i,!1)}function U(e){var n=[];n=n.concat(z(e.QuotaDefinition.SideBreak)),n=n.concat(z(e.QuotaDefinition.TopBreak));for(var i={},r=0;r<n.length;r++)i[n[r]]=l.GetVariableAnswers(n[r]);l.GetSurveyStatus()!=s.SurveyStatus.Partial||l.GetSurveyMode()==s.SurveyMode.Preview||l.GetSurveyMode()==s.SurveyMode.View||l.IsOffline()?setTimeout(function(){t.GoNext()}):p.CheckQuota(e.ID.split("|")[0],i).then(function(n){if(window.qresults[e.ID.split("|")[0]]=n,n)switch(e.Properties.Action){case s.QuotaMetAction.EndSurveyAndPanelRedirect:case s.QuotaMetAction.EndSurvey:a.getSurveyEndNode(e.Properties.JumpTo.ID).then(function(t){var n=new EndNode(s.SurveyStatus.Terminated);n.Message.Messages[c.GetSurveyLanguage()]=c.GetSurveyEndText(),e.Properties.JumpTo.ID?n.Message=t.Message:e.Properties.IsOtherMessage&&(n.Message=e.Properties.Message),e.Properties.Action==s.QuotaMetAction.EndSurveyAndPanelRedirect&&(n.RedirectToURL=!0,n.AppendPanelParameters=e.Properties.AppendAllPanelParameters,n.RedirectURL=e.Properties.RedirectURL),C(n)});break;case s.QuotaMetAction.JumpTo:var i=D(e.Properties.JumpTo);null!=i&&a.setNextSurveyTreePointer(i),t.GoNext()}else t.GoNext()})}function $(){var i,u,v,S,O=!1,P=!1,I=[],x=0,q=[],w=!1,M=!1,j={},D=!1,k={},V=!1,C={};return t.showToastMessage=!1,l.StopWatch.start(),{size:function(){return I.length},add:function(e){if("true"==e.Properties.AllowRecording){w=!0,j.file=e.ID.replace("|","-")+"_recording.aac",j.time=1e3*(parseInt(e.Properties.Duration)||1);var n=e.Variables[e.Properties.RecordingVariable].Name;if(ne.SurveyMode!=s.SurveyMode.Review){var i;i=p.PLATFORM==p.ANDROID?j.file:"Not Available";var a=l.GetAnswerObject([i],s.VariableType.Text,n,e.ID.split("|")[0]);l.SaveAnswer(a)}else j.toPlay=r(n).GetValue()}"true"==e.Properties.EnableTimer&&(M=!0,k.Variable=e.Variables[e.Properties.TimerVariable].Name,k.QGUID=e.ID),e.hasOwnProperty("Timer")&&e.Timer.IsTimerEnabled&&(V=!0,C.Message=e.Timer.Message,e.Timer.TimerAction==s.TimeoutAction.AutoMove?C.Callback=function(){t.GoNext()}:e.Timer.TimerAction==s.TimeoutAction.ShowText&&(C.Callback=function(){var e="*Try to Respond quick.";"object"==typeof C.Message&&"object"==typeof C.Message.Messages&&(e=C.Message.Messages[c.GetSurveyLanguage()]||C.Message.Messages[c.GetDefaultLanguage()]),t.showToastMessage=!0,t.toastMessage=e}),C.Duration=parseFloat(e.Timer.Duration)||0),I.push(e)},containsAny:function(e){if(!e)return!1;for(var t=0;t<I.length;t++)for(var n in I[t].Variables){var i=I[t].Variables[n].Name.split(".")[0];if(e.indexOf(i)>-1)return!0}return!1},initializeMaskingBit:function(e){for(var t in e.Variables)l.SetMaskingBit(e.Variables[t].Name,!1)},containsQuestionByID:function(e){if(!e)return!1;for(var t=0;t<I.length;t++)if(I[t].ID==e)return!0},hasQuestions:function(){return I.length>0},validateQuestion:function(e){x+=e},isValid:function(){return x==I.length},resetValidation:function(){t.ValidationMessage={},x=0},addWarning:function(e,n){q.hasItem(e)||q.push(e),t.showToastMessage=!0,t.toastMessage=n?"Question : "+q.join(", ")+" - "+n:"Question : "+q.join(", ")+" left unanswered. Click next to continue",h.ResetMovement()},resetWarning:function(){q=[],t.showToastMessage=!1},setAuth:function(e){O=e},setSurveyEndMessage:function(e){u=e},setSurveyFooterMessage:function(e){v=e},setEndNode:function(e){S=e},isAuthEnabled:function(){return O},setLanguageSelector:function(e){P=e},isLanguageSelectEnabled:function(){return P},getBuffer:function(){return I},setSubmitButtonOnEnd:function(e){D=e},isSubmitButtonEnabled:function(){return D},updateSurveyFooter:function(){var i=e.element(document.getElementById("survey-bottomHdr"));i.empty(),i.html(g.GetFooter(!0,t.showProgressBar,c.GetSurveyFooterText())),n(i.contents())(t)},updateSurveyHeader:function(){var i=e.element(document.getElementById("hdr-Layout"));i.empty(),i.html(g.GetHeader("",c.GetLanguageSetting())),n(i.contents())(t)},setStartupPage:function(){var i=g.GetHeader("",c.GetLanguageSetting());i+="<div id='surveyParent' style='overflow:auto;width:100%;'>",i+="<div id='scrollable' style='margin:0 auto;max-width:800px;padding:10px;padding-top:0px;'></div>",i+="</div>",i+=g.GetFooter(!0,t.showProgressBar,c.GetSurveyFooterText());var r=e.element(document.getElementById("page"));r.empty(),r.append(i),n(r.contents())(t);var a=document.getElementById("survey-bottomHdr").offsetHeight;if("eccaad3e-59b1-6af8-1407-4a3baf54c153"==c.QueryParameter.ProjectGUID||"667c7173-1f74-3df1-a120-300ed209a6f9"==c.QueryParameter.ProjectGUID)var o=90;else var o=document.getElementById("hdr-Layout").offsetHeight;var s=document.getElementById("page").offsetHeight;document.getElementById("surveyParent").style.height=s-o-a-10+"px",document.getElementById("scrollable").style.marginTop="0px",document.getElementById("scrollable").style.marginBottom="0px",document.getElementById("scrollable").style.top="55px",document.getElementById("scrollable").style.paddingBottom="10px",document.getElementById("scrollable").style.height="100%"},updateSurveyTitle:function(){e.element(document.getElementById("header_top").getElementsByClassName("survey-title-text-color")[0]).html(c.GetSurveyTitle())},renderView:function(){l.SetOnReviewAtEndPage(!1);window.innerHeight;""!=c.ScreenSize&&parseInt(c.ScreenSize),m.ResetWarning();var r="";if(0!=I.length){t.ShowSectionName&&(r+=g.GetSectionName(a.getCurrentSectionName())),r+=g.GetToast(),w&&ne.SurveyMode==s.SurveyMode.Review&&j.toPlay&&"Not Available"!=j.toPlay&&(r+=g.ShowAudioListener(),p.GetMedia(j.toPlay,l.GetRespondentID()).then(function(e){if(e){var t=document.getElementById("recording-toast"),n=document.createElement("audio");n.style.width="80%",n.src=b.trustAsResourceUrl(e),n.load(),n.controls=!0,t.appendChild(n)}}));for(var o=0;o<I.length;o++)r+=g.GetQuestion(o,I[o].ValidationScriptID);var d=document.getElementsByClassName("s-progress")[0];d&&(d.style.display="block");var v=document.getElementsByClassName("end-progress")[0];v&&(v.style.display="none");var f=document.getElementById("languageSelector");f&&(f.style.display="block"),this.changeProgress()}else{r+="<div id='surveyEnd'><div class='thankMsg'>",c.IsThumbsUpAllowed()&&(r+="<div class='text-center'><img src='assets/images/thank-you-gif.gif'/></div>"),r+=g.GetSurveyEnd(u,D,S),r+="</div>",c.IsSurveyByRebusCloudAllowed()&&(r+="<div id='rebusText'><img src='assets/images/logo.png'/><br> Survey By RebusCloud - Where Your Questions Get Answered</div>"),c.Settings.NavigationButtons&&(c.IsShowProgressBarTextAllowed()?r+=g.EndNodeFooter(this.getProgressText(),100,t.showProgressBar,c.GetSurveyFooterText()):r+=g.EndNodeFooter("",100,t.showProgressBar,c.GetSurveyFooterText()));var y=document.getElementsByClassName("footer-design")[0];y&&(y.style.display="none");var d=document.getElementsByClassName("s-progress")[0];d&&(d.style.display="none");var f=document.getElementById("languageSelector");f&&(f.style.display="none")}var h=e.element(document.getElementById("scrollable"));h.empty(),h.append(r),h[0]&&h[0].classList.contains("section-header")&&h[0].classList.remove("section-header");var O=document.getElementsByClassName("footer-design")[0];O&&(O.style.display="block"),i=t.$new();var P=n(h.contents())(i);if(0===I.length){var x=document.getElementById("survey-bottomHdr").offsetHeight,q=document.getElementById("rebusText");q&&(q.style.bottom=x+15+"px")}t.ShowProgress=!1,ne.RuntimeError.isEnabled&&this.showRuntimeError(ne.RuntimeError.script,ne.RuntimeError.message),w&&ne.SurveyMode!=s.SurveyMode.Review&&p.StartRecording(j.file,j.time),M&&l.StopWatchStart(),V&&this.startTimeout(),P[1]&&this.showBlurredEffect(P[1].outerHTML),this.postRendering()},destroyView:function(){h.Flush();var a=e.element(document.getElementById("scrollable"));if(document.getElementById("scrollable").style.top="55px",a.empty(),i&&i.$destroy(),a.append(""),i=t.$new(),n(a.contents())(i),p.StopRecording(),M){var o=l.GetElapsedTime();r(k.Variable).SetValue(k.QGUID,s.VariableType.Numeric,o)}V&&y.cancel(C.stopTimeout),l.DestroyListeners()},authView:function(){if(ne.SurveyMode==s.SurveyMode.View)return void t.GoNext();var r=g.GetAuthView(),a=e.element(document.getElementById("page"));a.empty(),a.append(r),i=t.$new(),n(a.contents())(i),t.ShowProgress=!1},languageSelectorView:function(){if(ne.SurveyMode==s.SurveyMode.View)return void t.GoNext();var r="";r+="<div class='padding-5 card center-div'><div class='padding-5 font-size-XXlg choose-lang'>Choose the language</div>"+g.GetLanguageSelectorView(c.GetAllVisibleLanguages())+"</div>",r+=g.GetNextNavButton(),document.getElementsByClassName("footer-design")[0].style.display="none";var a=e.element(document.getElementById("scrollable"));a.empty(),a.append(r),i=t.$new(),n(a.contents())(i),t.ShowProgress=!1},runTest:function(){d.InitTest(I),t.GoNext()},validate:function(){for(var e=!0,n=0;n<I.length;n++)if(I[n].ValidationScriptID){var i=a.getScript(I[n].ValidationScriptID),r=T(i,I[n]);if(r){var o=function(e){var t="*Validation failed";return e.ValidationUI&&e.ValidationUI.ValidationMessage&&e.ValidationUI.ValidationMessage.Messages&&(t=e.ValidationUI.ValidationMessage.Messages[c.GetSurveyLanguage()]||e.ValidationUI.ValidationMessage.Messages[c.GetDefaultLanguage()]),t}(i);i.ValidationUI.Mandatory==s.Mandatory.WarnAndContinue?m.WarningShown?r=!1:m.ShowError(!0,o,I[n].ID):m.ShowError(!1,o,I[n].ID)}else t.ValidationMessage[I[n].ValidationScriptID]="";e=e&&!r}return e},setRedirection:function(e,t){e&&(t?window.location=e:setTimeout(function(){window.location=e},5e3))},reviewResponses:function(){t.ReviewScrollService.items.length=0,t.qids=t.ReviewScrollService.qids,t.qids.length=0,Array.prototype.push.apply(t.qids,o.getQids()),t.ReviewBuffer=t.ReviewScrollService.items,t.ReviewScrollService.nextQuestion(),t.IsReviewedAtEnd=!0,l.SetOnReviewAtEndPage(!0),t.Navigation.isBackDisabled=!1,t.Navigation.isNextDisabled=!1,t.ShowProgress=!0;var r="<div>       <div ng-class='{\"disabled\": q.QuestionType != 11 && q.QuestionType != 12 && q.QuestionType != 13 && q.QuestionType != 14 && q.QuestionType != 15 && q.QuestionType != 16 && q.QuestionType != 20 && q.QuestionType != 21}'ng-repeat='q in ReviewBuffer track by $index'>           <survey-question  q-object='::q' review='::true' language='"+c.GetSurveyLanguage()+"'></survey-question>       </div>   </div><div style='margin-top: 25px; height: 50px;'><div ng-click='loadPrev()' class='prev-next clickable  float-left'>Prev</div><div ng-click='loadNext()' class='prev-next clickable  float-right'>Next</div></div>",a=e.element(document.getElementById("scrollable"));a.empty(),a.append(r),a[0]&&a[0].classList.contains("section-header")&&a[0].classList.remove("section-header");var s=document.getElementsByClassName("footer-design")[0];s&&(s.style.display="block"),i=t.$new();var d=(n(a.contents())(i),document.getElementById("survey-bottomHdr").offsetHeight),u=document.getElementById("hdr-Layout").offsetHeight,p=document.getElementById("page").offsetHeight;document.getElementById("surveyParent").style.height=p-u-d-10+"px",t.ShowProgress=!1},showLanguageSelector:function(){var i=e.element(document.getElementById("page")),r=n(g.GetLanguageSelectorView(c.GetAllVisibleLanguages()))(t),a=['<div id="modal" class="modal active" >','<div class="modal-overlay"></div>','<div class="modal-container">','<div class="modal-header">','<button onclick="closeModal()" class="btn btn-clear float-right"></button>','<div class="modal-title ">Choose language</div>',"</div>",'<div class="modal-body">','<div class="content">',"</div>",'<div class="modal-footer">','<button onclick="closeModal()" class="btn btn-link btn-sm" style="font-size: 14px;">Cancel</button>','<button onclick="showCode()" class="btn btn-primary btn-sm" style="font-size: 14px;">Continue</button>',"</div>","</div>","</div>"].join("");i.append(a),setTimeout(function(){var t=document.getElementById("modal").getElementsByClassName("content")[0];e.forEach(r,function(e){t.appendChild(e)})}),window.closeModal=function(e){var t=document.getElementById("page"),n=document.getElementById("modal");t.removeChild(n),ne.SurveyMode===s.SurveyMode.Preview&&window.frameElement&&"DoNotRefresh"!=e&&te("closeLang",window.frameElement.id),ne.RuntimeError.isEnabled=!1,ne.RuntimeError.script={},ne.RuntimeError.message=""},window.showCode=function(e){X(),l.SetAnimation("zoomIn"),K(),t.$broadcast("refreshSurvey"),window.closeModal(""),ne.SurveyMode===s.SurveyMode.Preview&&window.frameElement&&"DoNotRefresh"!=e&&te("showCode",window.frameElement.id)}},showRuntimeError:function(t,n){var i=e.element(document.getElementById("page")),r=['<div id="modal" class="modal active" >','<div class="modal-overlay"></div>','<div class="modal-container">','<div class="modal-header">','<button onclick="closeModal()" class="btn btn-clear float-right"></button>','<div class="modal-title ">Error in Script</div>',"</div>",'<div class="modal-body">','<div class="content">',"<div>","<strong><b> Script ID :  </b></strong>","<mark>"+t.ID+"</mark>","</div>",'<div style="margin-top: 5px;">',"<strong><b> Script Name :  </b></strong>","<mark>"+t.Name+"</mark>","</div>",'<pre class="code" data-lang="JAVASCRIPT" style="margin-top: 20px;"><code><span class="com" id="js-code">'+n+"</span></code></pre>","</div>","</div>",'<div class="modal-footer">','<button onclick="closeModal()" class="btn btn-link btn-sm" style="font-size: 14px;">Ignore</button>','<button onclick="showCode()" class="btn btn-primary btn-sm" style="font-size: 14px;">Show Script</button>',"</div>","</div>","</div>"].join("");i.append(r),window.closeModal=function(){var e=document.getElementById("page"),t=document.getElementById("modal");e.removeChild(t),ne.RuntimeError.isEnabled=!1,ne.RuntimeError.script={},ne.RuntimeError.message=""},window.showCode=function(){document.getElementById("js-code").innerHTML=ne.RuntimeError.script.Body}},enableRuntimeAlert:function(e,t){ne.RuntimeError.isEnabled=!0,ne.RuntimeError.script=e,ne.RuntimeError.message=t},showAutoCodeConflict:function(t,n){var i=e.element(document.getElementById("page")),r=document.getElementById("page").getElementsByClassName("modal");if(!(Array.isArray(r)&&r.length>0)){var a="";"function"==typeof n&&(a=n(t));var o=['<div id="modal" class="modal active" >','<div class="modal-overlay"></div>','<div class="modal-container" style="color: black;">','<div class="modal-header">','<div class="modal-title font-size-XXlg">Which of the following did you mean?</div>',"</div>",'<div class="modal-body">','<div class="content">','<div style="margin-top: 5px;">',a,"</div>","</div>","</div>",'<div class="modal-footer">','<button onclick="closeModal()" class="btn btn-link btn-sm font-size-lg border-all border-radius">OK <i class="fa fa-check"></i></button>',"</div>","</div>","</div>"].join("");i.append(o)}},showBlurredEffect:function(t,n){e.element(document.getElementById("scrollable"))},changeViewToSubmitted:function(e){var n=document.getElementById("submit");n.classList.add("surveySubmitted"),n.innerHTML=c.GetSubmittedButtonText(),t.ShowProgress=!1,ne.SurveyMode===s.SurveyMode.Preview&&window.frameElement&&"DoNotRefresh"!=e&&te("submit",window.frameElement.id)},changeMessageToEnd:function(){var e=c.GetSurveyEndText();document.getElementById("endText").innerHTML=e},changeProgress:function(){var e=0;if(!(l.GetPossibleLoopIterations().getIndexOf(l.GetCurrentIteration())>0)){ie?(e=a.getDistanceBetweenNodes(o.getLastRenderedQuestion(),I[I.length-1].ID),a.setProgress(-e)):(e=a.getDistanceBetweenNodes(o.getLastAnsweredQuestionID(),I[I.length-1].ID),a.setProgress(e)),o.setLastRenderedQuestion(I[I.length-1].ID),t.progressBar.Properties=c.GetProgressBarProperties();var n=a.getMaxQuestions(),i=a.getProgress();n+=1;var r=parseInt(i/n*100);if("function"==typeof t.progressBar.Callbacks.updateProgress&&t.progressBar.Callbacks.updateProgress(r),"function"==typeof t.progressBar.Callbacks.updateText&&c.IsShowProgressBarTextAllowed()){var d="";c.ProgressBarType==s.ShowProgressAs.Percentage?d+=r+"% ":d+=i+" "+c.GetProgressPrefix()+" "+n+" "+c.GetProgressSuffix(),t.progressBar.Callbacks.updateText(d)}}
},getProgressText:function(){t.progressBar.Properties=c.GetProgressBarProperties();var e="",n=a.getMaxQuestions();if(n+=1,c.ProgressBarType==s.ShowProgressAs.Percentage)e+="100% ";else{e+=n+" "+c.GetProgressPrefix()+" "+n+" "+c.GetProgressSuffix()}return e},startTimeout:function(){C.stopTimeout=y(function(){C.Callback()},1e3*C.Duration)},postRendering:function(){f.bindListeners(t.ValidateBeforeNext,t.GoBack),h.AddPostValidationCallback(function(e,n,i){"function"!=typeof n&&(e==s.ValidationType.Valid||e==s.ValidationType.NoValidation?re.validateQuestion(1):e==s.ValidationType.InValid&&re.validateQuestion(0)),e==s.ValidationType.AutoCodeConflict||e==s.ValidationType.AutoCodeSimilarity?re.showAutoCodeConflict(e,n):e===s.ValidationType.SkipValidation?(t.GoNext(),re.resetWarning()):re.isValid()&&(t.GoNext(),re.resetWarning())})},updateFooter:function(){var t=e.element(document.getElementById("nxt-btn")),n=e.element(document.getElementById("bck-btn"));t[0].innerHTML=(c.GetButtons().Next[c.GetSurveyLanguage()]||c.GetButtons().Next[c.GetDefaultLanguage()])+'<i class="icon icon-arrow-down" style="margin-left:5px;"></i>',n[0].innerHTML=(c.GetButtons().Back[c.GetSurveyLanguage()]||c.GetButtons().Back[c.GetDefaultLanguage()])+'<i class="icon icon-arrow-up" style="margin-left:5px;"></i>'},renderWaitingView:function(){t.ShowProgress=!0},showErrorView:function(r){var a=g.GetErrorView(r),o=document.getElementById("scrollable");o.style.margin="70px auto";var s=e.element(o);s.empty(),s.append(a),i=t.$new(),n(s.contents())(i),t.ShowProgress=!1}}}function _(e,t,n){var i=[];if(n&&0!=n.length)for(var r=0,a=0,o=e.length-1;o>=0;)n.length>a&&n[a]==i.length?(i.push(n[a]),a++):(i.push(t[r]),r++),o--;else i=t;for(var s=[],l=0;l<i.length;l++)s.push(e[i[l]]);return s}function W(e,n,i){if(parent.postMessage("surveystatus###"+n.SurveyStatus,"*"),ne.SurveyMode!==s.SurveyMode.Review){var a=c.GetSurveyEndApiPath();a?(S.trackEvent("CallbackHit",{RID:l.GetRespondentID(),PGuid:r("ProjectGUID").GetValue()}),p.HitApi(a).then(function(a){S.trackEvent("CallbackSuccess",{RID:l.GetRespondentID(),PGuid:r("ProjectGUID").GetValue()}),t.ShowProgress=!1,Z(e,n,i)},function(e){S.trackEvent("CallbackFailed",{RID:l.GetRespondentID(),Error:JSON.stringify(e),PGuid:r("ProjectGUID").GetValue()})})):(t.ShowProgress=!1,Z(e,n,i))}else t.ShowProgress=!1,Z(e,n,i)}function J(e,n,i){if(t.ShowProgress=!1,"function"==typeof i){i(c.GetSurveyEndText())}else re.changeViewToSubmitted(),re.changeMessageToEnd()}function K(){c.IsLanguageChangeActionEnabled()&&r("CLang").GetValue()!=l.GetLanguageCode(t.UserSelected.Language)&&c.ExecuteCallback(),l.SetSurveyLanguage(t.UserSelected.Language),c.SetSurveyLanguage(t.UserSelected.Language),re.updateFooter()}function Z(e,t,n){if("function"==typeof n?n(e):re.changeViewToSubmitted(),t.RedirectToURL&&t.RedirectURL){if(t.AppendPanelParameters){var i=c.GetPanelVariables(),a=t.RedirectURL.split("?"),o={};if(a[1])for(var s=a[1].split("&"),l=0;l<s.length;l++){var d=s[l].split("=");2==d.length&&(o[d[0]]=d[1])}for(var u in i)o[u]=r(i[u][0]).GetValue();var p="";for(var g in o)p+=g+"="+o[g]+"&";p=p.substring(0,p.length-1),t.RedirectURL=a[0]+"?"+p}var v="function"!=typeof n||!1;re.setRedirection(t.RedirectURL,v)}}function X(){var e=r("ProjectGUID").GetValue();"1d355fdc-ff35-e199-de1d-97b8f42451b1"!=e&&"da4b5120-f542-0cb1-7718-f2a1d1a1cd9f"!=e&&"40b3974e-6deb-093a-8baf-37c341654656"!=e&&"9d810f1b-a166-176a-beb3-937683a06fd7"!=e||"en-us"!=t.UserSelected.Language?t.SelectedLanguage=t.UserSelected.Language:t.SelectedLanguage="en-IN"}function Y(){return o.getMaxAttributes()==o.getAttributePosition()}function ee(e){return e.reduce(function(e,t){return e||t.QuestionType==s.QuestionType.SimpleGrid&&"true"==t.Properties.MobileFriendly&&window.jsrcb.isMobile},!1)}function te(e,t){var n=a.getSurveyTreePointer();if("receiver2"==t){parent.document.getElementById("receiver").contentWindow.postMessage(e+"###"+JSON.stringify(n),window.location.href)}else{parent.document.getElementById("receiver2").contentWindow.postMessage(e+"###"+JSON.stringify(n),window.location.href)}}t.PageBufferObject=[{}],t.IsReviewedAtEnd=!1,t.ReviewScrollService=new v,t.AppliedTheme="",t.progressBar={Callbacks:{}},t.ShowProgress=!0,t.autoTest={text:"Initializing Testing Environment",progress:0},l.IsTest=d.isTestEnabled?s.SurveyType.Test:s.SurveyType.Live;var ne=this,ie=!1;t.Navigation={isBackDisabled:!0,isNextDisabled:!1,isSubmitDisabled:!1},t.UserSelected={Password:"",Language:""},ne.RuntimeError={},ne.RuntimeError.isEnabled=!1,ne.RuntimeError.script={},ne.RuntimeError.message="",t.ValidationMessage={},t.ShowSectionName=!1;var re=new $;ne.SurveyStatus=null,ne.SurveyMode=null,ne.SECTION_ID=null,t.TestCount=1,g.DetectBrowser(),u.InitSurvey().then(function(){t.showAutoProgress=d.isTestEnabled,t.autoTest.max=d.MaxTestCount;var e=[];c.ApplyChanges(),t.showProgressBar=c.ShowProgressBar(),e.push(l.load(c.QueryParameter.ProjectGUID)),e.push(a.load()),re.setStartupPage(),i.all(e).then(function(e){var n=r("CLang").GetValue(),i=c.GetAllLanguages();for(var d in i)n==l.GetLanguageCode(d)&&c.SetSurveyLanguage(d);if(ne.SurveyMode=l.GetSurveyMode(),t.UserSelected.Language=c.GetSurveyLanguage(),X(),g.SurveyMode=ne.SurveyMode,ne.SurveyMode===s.SurveyMode.Preview&&(t.$emit("OnInitPreview"),a.resetSurveyTree()),t.progressBar.Properties=c.GetProgressBarProperties(),o.initTraversalList(e[0],ne.SurveyMode),a.setSurveyTreePointer(o.getLastTNode()),ne.SurveyMode==s.SurveyMode.Review||ne.SurveyMode==s.SurveyMode.View?a.setProgress(0):a.initProgress(o.getLastAnsweredQuestionID()),ne.SurveyMode==s.SurveyMode.New&&p.HitApi(c.GetSurveyLaunchApiPath()),re.updateSurveyTitle(),re.isAuthEnabled())re.authView();else if(re.isLanguageSelectEnabled())re.languageSelectorView();else{var u=o.getTraversalListPointer();if(ne.SurveyMode==s.SurveyMode.Resume&&u&&u.ParentNodeID){var v=a.getSequencerNode(u.ParentNodeID);v&&(v.SequenceType!=s.SequenceType.InOrder&&k(v,s.ObjectType.Sequencer),v.SequenceType=s.SequenceType.InOrder)}I()}})}),t.OnPassKeyUp=function(e){13===e.keyCode&&t.Authenticate()},t.Authenticate=function(){var e=i.defer();return p.Authenticate(t.UserSelected.Password).then(function(t){re.isLanguageSelectEnabled()?re.languageSelectorView():I(),e.resolve()},function(n){t.UserSelected.isFailed=!0,e.reject()}),e.promise},t.SelectLanguage=function(){K(),I()},t.SetLanguage=function(e){t.UserSelected.Language=e},t.ShowLanguages=function(e){re.showLanguageSelector(),ne.SurveyMode===s.SurveyMode.Preview&&window.frameElement&&"DoNotRefresh"!=e&&te("showLang",window.frameElement.id)},t.GoBack=function(){if(!f.blockNavigation)if(l.SetAnimation("fadeInDownBig"),ie=!0,c.IsLanguageSelectorEnabled()&&re.isLanguageSelectEnabled())re.setLanguageSelector(!1),re.languageSelectorView();else{var e=o.getTraversalListPointer();a.setSurveyTreePointer(e),a.moveSurveyTreePointer(o.MOVE_BACKWARD);try{if(o.deleteFromList(),ne.SurveyMode==s.SurveyMode.Resume&&e.ParentNodeID){var n=a.getSequencerNode(e.ParentNodeID);n&&(n.SequenceType!=s.SequenceType.InOrder&&k(n,s.ObjectType.Sequencer),n.SequenceType=s.SequenceType.InOrder)}I()}catch(e){t.Navigation.isBackDisabled=!0}}},t.GoNext=function(){if(l.SetAnimation("fadeInUpBig"),ne.SurveyMode===s.SurveyMode.Preview||ne.SurveyMode===s.SurveyMode.Review||ne.SurveyMode===s.SurveyMode.View||d.isTestEnabled?ne.SurveyMode==s.SurveyMode.Review&&l.IsOffline()&&l.SaveRespondent("InterimSave"):l.SaveRespondent("InterimSave"),ie=!1,t.PageBufferObject.length>0){var e=new TraversalNode(ne.SECTION_ID,t.PageBufferObject);o.addToList(e,ne.SECTION_ID)}a.moveSurveyTreePointer(o.MOVE_FORWARD),I(),console.log(l.GetAnswers())},t.Accept=function(){l.SetBackCheck(s.BackCheckStatus.Accepted),O(s.BackCheckStatus.Accepted)},t.Reject=function(){var e=l.GetVariableAnswers("ModifiedBy");l.RollbackRespondent(),l.CreateSystemVariable("ModifiedBy",e,s.VariableType.Text),l.SetBackCheck(s.BackCheckStatus.Rejected),O(s.BackCheckStatus.Rejected)},t.ValidateBeforeNext=function(e){document.getElementById("page").scrollTop=0,f.blockNavigation||(o.setMovement(o.MOVE_FORWARD),re.resetValidation(),t.IsReviewedAtEnd?t.GoNext():ee(re.getBuffer())?Y()?re.validate()?h.RunValidation():t.$broadcast("ResetMimic"):h.RunValidation():re.validate()?h.RunValidation():t.$broadcast("ResetMimic"))},t.BroadcastBeforeBack=function(e){o.setMovement(o.MOVE_BACKWARD),h.RunBeforeBack()?t.GoBack():c.IsBackButtonDisable&&(t.Navigation.isBackDisabled=!0),ne.SurveyMode===s.SurveyMode.Preview&&window.frameElement&&"DoNotRefresh"!=e&&P(window.frameElement.id)},t.$on("OnAuthorizationRequest",function(){re.setAuth(!0)}),t.$on("OnLanguageSelectRequest",function(){re.setLanguageSelector(!0)}),t.$on("OnNextClickProcessed",function(){t.Navigation.isBackDisabled=c.IsBackButtonDisable||!1}),t.$on("OnNextClick",function(e){ne.SurveyMode===s.SurveyMode.Preview&&t.ValidateBeforeNext("DoNotRefresh")}),h.AddWarningCallback(function(e){re.addWarning(e)}),t.$on("refreshSurvey",function(){c.ApplyChanges(),re.destroyView(),re.renderView()}),t.$on("OnEndSurvey",function(){c.ApplyChanges(),re.setStartupPage();var e=new EndNode;e.Message.Messages[c.GetSurveyLanguage()]=c.GetSurveyEndText(),t.Navigation.isSubmitDisabled=!0,t.Navigation.hideSubmit=!0,C(e,!1)}),t.$on("OnInactiveSurvey",function(){c.ApplyChanges(),re.setStartupPage();var e=new EndNode;e.Message.Messages[c.GetSurveyLanguage()]=c.GetSurveyClosedText(),t.Navigation.isSubmitDisabled=!0,t.Navigation.hideSubmit=!0,C(e,!1)}),t.$on("ServerError",function(e,t){c.ApplyChanges(),re.showErrorView(t)}),window.addEventListener("message",function(e){var n=e.data.split("###");switch(n[0]){case"jumpnode":var i=JSON.parse(n[1]);a.setNextSurveyTreePointer(i),t.$broadcast("OnNextClick","DoNotRefresh");break;case"moveNext":t.$broadcast("OnNextClick","DoNotRefresh");break;case"submit":re.changeViewToSubmitted(),t.Navigation.isSubmitDisabled=!0,t.Navigation.isBackDisabled=!0;break;case"showLang":t.ShowLanguages("DoNotRefresh");break;case"closeLang":window.closeModal("DoNotRefresh");break;case"showCode":window.showCode("DoNotRefresh");break;case"moveback":a.moveSurveyTreePointer(o.MOVE_BACKWARD),t.BroadcastBeforeBack("DoNotRefresh");break;case"surveysettings":var r=JSON.parse(n[1]);n[2]&&(window.jsrcb.isMobile=n[2]),c.SetSurveyProperties(r,!0),c.ApplyChanges(),re.isLanguageSelectEnabled()?re.languageSelectorView():(re.destroyView(),re.renderView(),re.updateSurveyHeader(),re.updateSurveyFooter())}t.$apply()}),f.checkBackDisable=function(){return t.Navigation.isBackDisabled},h.AddStartUpPageCallback(function(){if(c.IsStartupEnabled()){f.blockNavigation=!0;var e=g.GetStartUpLayout();document.getElementById("page").classList.add("invisible");var i=document.getElementById("startup-page");i.style.backgroundColor=c.GetBackgroundColor(),i.style.display="block",i.appendChild(n(e)(t)[0]),f.startUpSubmit=t.CloseStartUpPage}}),t.CloseStartUpPage=function(){f.blockNavigation=!1,document.getElementById("page").classList.remove("invisible");var e=document.getElementById("startup-page");e.remove(),e.style.display="none!important";var t=document.getElementById("footer-design").offsetHeight,n=document.getElementById("hdr-Layout").offsetHeight,i=document.getElementById("page").offsetHeight;document.getElementById("surveyParent").style.height=i-n-t-10+"px"},t.OnSubmitResponse=function(e,n,i){re.renderWaitingView(),e=decodeURIComponent(e),ne.SurveyMode!==s.SurveyMode.Preview&&ne.SurveyMode!==s.SurveyMode.View?ne.SurveyMode!=s.SurveyMode.Review?l.CloseRespondent(n.SurveyStatus).then(function(){W(e,n,i)},function(t){500===t.status&&re.showErrorView(500),J(e,n,i)}):(l.SetRespondentEndVariables(n.SurveyStatus),l.SaveRespondent("ReviewSave").then(function(){W(e,n,i)})):re.changeViewToSubmitted(),t.Navigation.isBackDisabled=!0,t.Navigation.isNextDisabled=!0,t.Navigation.isSubmitDisabled=!0},t.loadNext=function(e){t.ShowProgress=!0,t.ReviewScrollService.items.length=0,t.ReviewScrollService.displayedStartIndex=t.ReviewScrollService.displayedEndIndex+1,t.ReviewScrollService.displayedEndIndex+=5,re.reviewResponses()},t.loadPrev=function(e){t.ShowProgress=!0,t.ReviewScrollService.items.length=0,t.ReviewScrollService.displayedEndIndex=t.ReviewScrollService.displayedStartIndex-1,t.ReviewScrollService.displayedStartIndex-=5,re.reviewResponses()}}e.module("SurveyEngineCore").controller("EngineCore.FlowController",t),t.$inject=["$scope","$compile","$q","EngineCore.SurveyTreeService","EngineCore.TraversalListService","SurveyEngine.Enums","SurveyEngine.RespondentService","SurveyEngine.SurveySettings","EngineCore.TestGenerator","SurveyInitializationService","EngineCore.CommunicationService","SurveyEngine.UIService","EngineCore.ReviewScrollService","$sce","SurveyEngine.NavigatorService","$timeout","SurveyEngine.PageRouteService","SurveyEngine.ValidatorService","insights"]}(angular),function(e){"use strict";function t(e,t){function n(e){return"INPUT"==e.target.tagName}function i(e){"function"==typeof g.focusListener&&g.focusListener(e)}function a(e){"function"==typeof g.numKeyListener&&g.numKeyListener(e)}function o(e,t){if("INPUT"!=e.target.tagName&&"TEXTAREA"!=e.target.tagName||"number"==e.target.type){if("BODY"==e.target.tagName){var n=document.getElementsByClassName("focusableInput");n.length>0&&!window.jsrcb.isMobile&&n[0].focus()}}else switch(t){case g.Direction.LEFT:e.target.selectionEnd--,y.stop(e);break;case g.Direction.RIGHT:e.target.selectionEnd++,y.stop(e);break;case g.Direction.UP:case g.Direction.DOWN:}}function s(e){var t=document.getElementsByClassName("focusableInput"),n=-1,i=Array.prototype.slice.call(t).reduce(function(e,t,i){return t==document.activeElement&&(n=i),e||n>-1},!1);return i&&(e==g.Direction.UP?0==n?t[t.length-1].focus():t[n-1].focus():e==g.Direction.DOWN&&(n<t.length-1?t[n+1].focus():t[0].focus())),i}function l(e){return e=e||window.event,e.target||(e.target=e.srcElement),e.currentTarget||(e.currentTarget=e.srcElement),!e.which&&e.keyCode&&(e.which=e.keyCode),e}function c(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function d(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?16&e.compareDocumentPosition(t):0}function u(e,t,n,i){"string"==typeof t&&(t=[t]);for(var r,a=0;r=t[a];a++)r="click"===r&&"ontouchstart"in window?"touchend":e.attachEvent?"on"+r:r,e.attachEvent?i?e.detachEvent(r,n):e.attachEvent(r,n):i?e.removeEventListener(r,n):e.addEventListener(r,n,{passive:!1})}function p(e){return e%48}var g=this,v={SPACE:32,ENTER:13,ESCAPE:27,TAB:9,IS_NUM:function(e){return e>=48&&e<=57||e>=96&&e<=105}};g.Direction={LEFT:1,RIGHT:2,UP:3,DOWN:4};var b=null,f=null;g.checkBackDisable=function(){return!0},g.setListener=null,g.focusListener=null,g.submit=null,g.toggleSelection=null,g.TOGGLE_BUTTON=!1,g.numKeyListener=null,g.tabPressListener=null,g.startUpSubmit=null,g.IS_BLUR_EVENT=!1,g.IS_BLUR_EVENT=!1;var y={mouse:{over:[],isOver:function(e){return c(y.mouse.over,e)>=0},add:function(e){y.mouse.isOver(e)||y.mouse.over.push(e)},remove:function(e){y.mouse.isOver(e)&&y.mouse.over.splice(c(y.mouse.over,e),1)},current:function(){for(var e=y.mouse.over[y.mouse.over.length-1],t=0,n=y.mouse.over.length,i=y.mouse.over[t];t<n;t++)d(e,i)&&(e=i);return e},track:function(e){u(e,"mouseenter",function(e){y.mouse.add(l(e).currentTarget.id)}),u(e,"mouseleave",function(e){y.mouse.remove(l(e).currentTarget.id)})}},keyboard:function(){u(document,"keydown",function(e){if(e=l(e),n(e)&&t.HideError(),g.TOGGLE_BUTTON=!1,e.which==v.ESCAPE){var r=document.getElementById("page"),s=document.getElementsByClassName("modal");Array.prototype.slice.call(s).map(function(e){r.removeChild(e)})}else if(e.which==v.ENTER)"function"==typeof g.startUpSubmit?(g.startUpSubmit(),g.startUpSubmit=null):"function"==typeof g.submit&&g.submit();else if(e.which==v.SPACE)"function"==typeof g.toggleSelection&&g.toggleSelection();else if(e.which==v.TAB)"function"==typeof g.tabPressListener&&g.tabPressListener();else if(v.IS_NUM(e.which)){var c=p(e.which);a(c)}else if(!(e.ctrlKey||e.altKey||e.shiftKey)&&e.which<=40&&e.which>=37){var d=document.getElementById("surveyParent"),u=null;if(40===e.which)if(u=g.Direction.DOWN,d.scrollHeight>d.clientHeight){if(d.scrollTop+d.clientHeight<d.scrollHeight)return void(d.scrollTop+=20);y.slide(u)}else y.slide(u);else if(39===e.which)u=g.Direction.RIGHT;else if(38===e.which)if(u=g.Direction.UP,d.scrollHeight>d.clientHeight){if(0!=d.scrollTop)return void(d.scrollTop-=20);y.slide(u)}else y.slide(u);else 37===e.which&&(u=g.Direction.LEFT);o(e,u),i(u)}})}(),stop:function(e){return e=e||window.event,e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},touch:function(){var e={},t={};u(document,"touchstart",function(n){n=l(n),e={x:n.touches[0].pageX,y:n.touches[0].pageY,time:+new Date},t={x:0,y:0,duration:0},t.scrollPosition=document.getElementById("surveyParent").scrollTop}),u(document,"touchmove",function(n){if(n=l(n),!(n.touches.length>1||n.scale&&1!==n.scale)){var i=document.getElementById("surveyParent"),r=n.touches[0].pageY-e.y<0?g.Direction.DOWN:g.Direction.UP;if(t.duration=+new Date-e.time,!(t.duration>100&&(Math.abs(t.x)+Math.abs(t.y))/t.duration<.25)){if(i.scrollHeight>i.clientHeight){if(0==t.scrollPosition){if(r!=g.Direction.UP)return;y.slide(r)}if(r!=g.Direction.DOWN)return;if(i.scrollTop+i.clientHeight<i.scrollHeight)return;y.slide(r)}t.x=n.touches[0].pageX-e.x,t.y=n.touches[0].pageY-e.y;i.getElementsByTagName("survey-question")[0];y.stop(n)}}}),u(document,"touchend",function(n){var i=document.getElementById("surveyParent"),r=i.getElementsByTagName("survey-question")[0];n=l(n);var a=!1;if(Number(+new Date-e.time)<250){var o=Math.abs(t.x),s=Math.abs(t.y),c=o>20,d=s>20,u=t.x<0?g.Direction.RIGHT:g.Direction.LEFT,p=t.y<0?g.Direction.DOWN:g.Direction.UP,v=c&&d?o>s?u:p:c?u:d?p:null;v&&(a=!0,y.slide(v))}r&&!a&&(r.style.position="relative",r.style.top="0px")})},slide:function(e){"eccaad3e-59b1-6af8-1407-4a3baf54c153"!=r("ProjectGUID").GetValue()&&(s(e)||(e!=g.Direction.UP||g.checkBackDisable()?e==g.Direction.DOWN&&g.Next():g.Back()))},mouseDown:function(){u(document,"mousedown",function(e){g.TOGGLE_BUTTON=!1})}()};g.bindListeners=function(e,t){b=e,f=t,y.keyboard,y.touch()},g.removeListeners=function(){b=null,f=null},g.Next=function(){"function"==typeof b&&b()},g.Back=function(){"function"==typeof f&&f()},g.blockNavigation=!1}e.module("SurveyEngineCore").service("SurveyEngine.NavigatorService",["$timeout","SurveyEngine.ValidatorService",t])}(angular),function(e){"use strict";function t(e,t){var n=this;n.IsDataValid=!0,n.WarningShown=!1,n.VerifiedQuestionOTPMap={},n.QuestionOTPMap={};var i={},r={};n.ValidOTP=null,window.IsOTPValid=function(e){return n.VerifiedQuestionOTPMap[e]},n.AddErrorCallback=function(e,t){i[t]=e},n.AddHideErrorCallback=function(e,t){r[t]=e},n.ShowError=function(e,t,r){"function"==typeof i[r]&&(n.WarningShown=e,i[r](e,t))},n.HideError=function(e){"function"==typeof r[e]&&r[e]()},n.ResetWarning=function(){n.WarningShown=!1},n.ContainsValidData=function(t,i){var r=!1;switch(t.VariableType){case e.VariableType.SingleChoice:r=1==i.length&&n.IsNotNull(i[0])||0==i.length;break;case e.VariableType.MultipleChoice:i=i.filter(function(e){return n.IsNotNull(e)}),r=!0;break;case e.VariableType.Numeric:1==i.length&&(r=!isNaN(i[0])&&n.IsNotNull(i[0]),!isNaN(t.Properties.Min)&&n.IsNotNull(t.Properties.Min)&&(r=r&&parseInt(i[0])>=parseInt(t.Properties.Min)),!isNaN(t.Properties.Max)&&n.IsNotNull(t.Properties.Max)&&(r=r&&parseInt(i[0])<=parseInt(t.Properties.Max)));break;case e.VariableType.Text:if(1==i.length){r=n.IsNotNull(i[0])&&n.IsNotEmpty(i[0]),!isNaN(t.Properties.Min)&&n.IsNotNull(t.Properties.Min)&&(r=r&&i[0].length>=t.Properties.Min),!isNaN(t.Properties.Max)&&n.IsNotNull(t.Properties.Max)&&(r=r&&i[0].length<=t.Properties.Max);var a=new RegExp(t.Properties.RegexValue1);r=r&&a.test(i[0])}break;case e.VariableType.DateTime:if(1==i.length){r=n.IsNotNull(i[0]);var o=new Date(t.Properties.StartDate),s=new Date(t.Properties.EndDate),l=new Date(i[0]);l.setHours(12),r=r&&!(o&&l<o||s&&l>s)}}return r},n.IsNotNull=function(e){return null!=e&&void 0!=e},n.ShakeMe=function(){var e=document.getElementById("scrollable");e.classList.contains("shake")&&e.classList.remove("shake"),t(function(){e.classList.add("shake")})},n.IsNotNullOrEmpty=function(e){return null!=e&&void 0!=e&&""!=e.toString().trim()},n.IsNotEmpty=function(e){return""!=e},n.MakeBorderRed=function(e){var n=document.getElementById(e);n&&(n.classList.contains("border-red")&&n.classList.remove("border-red"),t(function(){n.classList.add("border-red")}))},n.RemoveBorderRed=function(e){var t=document.getElementById(e);t&&t.classList.contains("border-red")&&t.classList.remove("border-red")},n.VerifyOTP=function(e,t,i){return n.GetOTP()===parseInt(i)},n.SetOTP=function(e){n.ValidOTP=parseInt(e)-79},n.GetOTP=function(){return n.ValidOTP},n.ResetErrorCallbacks=function(){i={},r={}}}e.module("SurveyEngineCore").service("SurveyEngine.ValidatorService",["SurveyEngine.Enums","$timeout",t])}(angular);